"use strict";(self.webpackChunkpeertube_client=self.webpackChunkpeertube_client||[]).push([[440],{12440:($,b,a)=>{a.r(b),a.d(b,{SearchModule:()=>on});var p=a(63192),P=a(84167),D=a(62026),A=a(68237),O=a(33957),v=a(15586),C=a(36226),E=a(7958),T=a(49393),M=a(19212),R=a(86804),y=a(86395),e=a(42741),h=a(54755),S=a(66717),r=a(16274),l=a(76476),c=a(93324),f=a(18736);function g(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("sort","-match")}),e.SDv(1,61),e.qZA()}}function u(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"input",62),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().advancedSearch.sort=i}),e.qZA(),e.TgZ(2,"label",63),e._uU(3),e.qZA(),e.qZA()}if(2&_){const n=o.$implicit,t=e.oxw();e.xp6(1),e.Q6J("id",n.id)("value",n.id)("ngModel",t.advancedSearch.sort),e.xp6(1),e.Q6J("for",n.id),e.xp6(1),e.Oqu(n.label)}}function L(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("isLive")}),e.SDv(1,64),e.qZA()}}function Ee(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("nsfw")}),e.SDv(1,65),e.qZA()}}function he(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetLocalField("publishedDateRange")}),e.SDv(1,66),e.qZA()}}function pe(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"input",67),e.NdJ("change",function(){return e.CHM(n),e.oxw().onDurationOrPublishedUpdated()})("ngModelChange",function(i){return e.CHM(n),e.oxw().publishedDateRange=i}),e.qZA(),e.TgZ(2,"label",63),e._uU(3),e.qZA(),e.qZA()}if(2&_){const n=o.$implicit,t=e.oxw();e.xp6(1),e.Q6J("id",n.id)("value",n.id)("ngModel",t.publishedDateRange),e.xp6(1),e.Q6J("for",n.id),e.xp6(1),e.Oqu(n.label)}}function Ce(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetOriginalPublicationYears()}),e.SDv(1,68),e.qZA()}}function Re(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetLocalField("durationRange")}),e.SDv(1,69),e.qZA()}}function Ae(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"input",70),e.NdJ("change",function(){return e.CHM(n),e.oxw().onDurationOrPublishedUpdated()})("ngModelChange",function(i){return e.CHM(n),e.oxw().durationRange=i}),e.qZA(),e.TgZ(2,"label",63),e._uU(3),e.qZA(),e.qZA()}if(2&_){const n=o.$implicit,t=e.oxw();e.xp6(1),e.Q6J("id",n.id)("value",n.id)("ngModel",t.durationRange),e.xp6(1),e.Q6J("for",n.id),e.xp6(1),e.Oqu(n.label)}}function Te(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("categoryOneOf")}),e.SDv(1,71),e.qZA()}}function Oe(_,o){if(1&_&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&_){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.label)}}function fe(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("licenceOneOf")}),e.SDv(1,72),e.qZA()}}function Me(_,o){if(1&_&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&_){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.label)}}function Ne(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("languageOneOf")}),e.SDv(1,73),e.qZA()}}function me(_,o){if(1&_&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&_){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.label)}}function Pe(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("tagsAllOf")}),e.SDv(1,74),e.qZA()}}function ve(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetField("tagsOneOf")}),e.SDv(1,75),e.qZA()}}function De(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"label"),e.SDv(3,76),e.qZA(),e.qZA(),e.TgZ(4,"div",9),e.TgZ(5,"input",77),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().advancedSearch.searchTarget=i}),e.qZA(),e.TgZ(6,"label",78),e.SDv(7,79),e.qZA(),e.qZA(),e.TgZ(8,"div",9),e.TgZ(9,"input",80),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().advancedSearch.searchTarget=i}),e.qZA(),e.TgZ(10,"label",81),e.SDv(11,82),e.qZA(),e.qZA(),e.qZA()}if(2&_){const n=e.oxw();e.xp6(5),e.Q6J("ngModel",n.advancedSearch.searchTarget),e.xp6(4),e.Q6J("ngModel",n.advancedSearch.searchTarget)}}function be(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){return e.CHM(n),e.oxw().reset()}),e.SDv(1,84),e.qZA()}}let Le=(()=>{class _{constructor(n){this.serverService=n,this.advancedSearch=new A.ZJ,this.filtered=new e.vpe,this.videoCategories=[],this.videoLicences=[],this.videoLanguages=[],this.publishedDateRanges=[],this.sorts=[],this.durationRanges=[],this.videoType=[],this.publishedDateRanges=[{id:"today",label:"U\xE8i"},{id:"last_7days",label:"Los darri\xE8rs 7 jorns"},{id:"last_30days",label:"Los darri\xE8rs 30 jorns"},{id:"last_365days",label:"Los darri\xE8rs 365 jorns"}],this.videoType=[{id:"vod",label:"VOD videos"},{id:"live",label:"Live videos"}],this.durationRanges=[{id:"short",label:"Corta (< 4 min)"},{id:"medium",label:"Mejana (4-10 min)"},{id:"long",label:"Longa (> 10 min)"}],this.sorts=[{id:"-match",label:"Pertin\xE9ncia"},{id:"-publishedAt",label:"Data de publicacion"},{id:"-views",label:"Visualizacions"}]}ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig(),this.serverService.getVideoCategories().subscribe(n=>this.videoCategories=n),this.serverService.getVideoLicences().subscribe(n=>this.videoLicences=n),this.serverService.getVideoLanguages().subscribe(n=>this.videoLanguages=n),this.loadFromDurationRange(),this.loadFromPublishedRange(),this.loadOriginallyPublishedAtYears()}onDurationOrPublishedUpdated(){this.updateModelFromDurationRange(),this.updateModelFromPublishedRange(),this.updateModelFromOriginallyPublishedAtYears()}formUpdated(){this.onDurationOrPublishedUpdated(),this.filtered.emit(this.advancedSearch)}reset(){this.advancedSearch.reset(),this.resetOriginalPublicationYears(),this.durationRange=void 0,this.publishedDateRange=void 0,this.onDurationOrPublishedUpdated()}resetField(n,t){this.advancedSearch[n]=t}resetLocalField(n,t){this[n]=t,this.onDurationOrPublishedUpdated()}resetOriginalPublicationYears(){this.originallyPublishedStartYear=this.originallyPublishedEndYear=void 0}isSearchTargetEnabled(){return this.serverConfig.search.searchIndex.enabled&&!0!==this.serverConfig.search.searchIndex.disableLocalSearch}loadOriginallyPublishedAtYears(){this.originallyPublishedStartYear=this.advancedSearch.originallyPublishedStartDate?new Date(this.advancedSearch.originallyPublishedStartDate).getFullYear().toString():null,this.originallyPublishedEndYear=this.advancedSearch.originallyPublishedEndDate?new Date(this.advancedSearch.originallyPublishedEndDate).getFullYear().toString():null}loadFromDurationRange(){if(this.advancedSearch.durationMin||this.advancedSearch.durationMax){const n=240,t=600;this.advancedSearch.durationMin===n&&this.advancedSearch.durationMax===t?this.durationRange="medium":this.advancedSearch.durationMax===n?this.durationRange="short":this.advancedSearch.durationMin===t&&(this.durationRange="long")}}loadFromPublishedRange(){if(this.advancedSearch.startDate){const n=new Date(this.advancedSearch.startDate),t=new Date,N=Math.abs(n.getTime()-t.getTime())/864e5;N>=365?this.publishedDateRange="last_365days":N>=30?this.publishedDateRange="last_30days":N>=7?this.publishedDateRange="last_7days":N>=0&&(this.publishedDateRange="today")}}updateModelFromOriginallyPublishedAtYears(){const n=new Date;if(n.setHours(0,0,0,0),n.setMonth(0,1),this.originallyPublishedStartYear){const t=parseInt(this.originallyPublishedStartYear,10),i=new Date(n);i.setFullYear(t),this.advancedSearch.originallyPublishedStartDate=i.toISOString()}else this.advancedSearch.originallyPublishedStartDate=null;if(this.originallyPublishedEndYear){const t=parseInt(this.originallyPublishedEndYear,10),i=new Date(n);i.setFullYear(t),this.advancedSearch.originallyPublishedEndDate=i.toISOString()}else this.advancedSearch.originallyPublishedEndDate=null}updateModelFromDurationRange(){if(this.durationRange)switch(this.durationRange){case"short":this.advancedSearch.durationMin=void 0,this.advancedSearch.durationMax=240;break;case"medium":this.advancedSearch.durationMin=240,this.advancedSearch.durationMax=600;break;case"long":this.advancedSearch.durationMin=600,this.advancedSearch.durationMax=void 0}}updateModelFromPublishedRange(){if(!this.publishedDateRange)return;const n=new Date;switch(n.setHours(0,0,0,0),this.publishedDateRange){case"last_7days":n.setDate(n.getDate()-7);break;case"last_30days":n.setDate(n.getDate()-30);break;case"last_365days":n.setDate(n.getDate()-365)}this.advancedSearch.startDate=n.toISOString()}}return _.\u0275fac=function(n){return new(n||_)(e.Y36(h.NG))},_.\u0275cmp=e.Xpm({type:_,selectors:[["my-search-filters"]],inputs:{advancedSearch:"advancedSearch"},outputs:{filtered:"filtered"},decls:104,vars:34,consts:function(){let o,n,t,i,s,N,I,F,m,V,B,w,G,J,K,z,k,X,q,Q,j,W,ee,ne,te,_e,ie,oe,ae,re,se,le,ce,de,ge,Se,ue;return o="Tria",n="Display only",t="Live videos",i="VOD videos",s="Mostrar lo contengut sensible",N="\xD2c",I="Non",F="Data de publicacion",m="Annada de publicacion originala",V="Apr\xE8p...",B="Abans...",w="Durada",G="Categoria",J="Mostrar totas las categorias",K="Lic\xE9ncia",z="Mostrar totas las lic\xE9ncias",k="Lenga",X="Mostrar totas las lengas",q="Totas aquestas etiquetas",Q="Una d\u2019aquestas etiquetas",j="PeerTube instance host",W="Filtrar",ee="Re\xEFnicializar",ne="Re\xEFnicializar",te="Re\xEFnicializar",_e="Re\xEFnicializar",ie="Re\xEFnicializar",oe="Re\xEFnicializar",ae="Re\xEFnicializar",re="Re\xEFnicializar",se="Re\xEFnicializar",le="Re\xEFnicializar",ce="Re\xEFnicializar",de="Search target",ge="Inst\xE0ncia",Se="Vidiverse",ue="Re\xEFnicializar",[["role","form",3,"ngSubmit"],[1,"row"],[1,"col-lg-4","col-md-6","col-xs-12"],[1,"form-group"],[1,"radio-label","label-container"],o,["class","reset-button reset-button-small",3,"click",4,"ngIf"],["class","peertube-radio-container",4,"ngFor","ngForOf"],n,[1,"peertube-radio-container"],["type","radio","name","isLive","id","isLiveTrue","value","true",3,"ngModel","ngModelChange"],["for","isLiveTrue",1,"radio"],t,["type","radio","name","isLive","id","isLiveFalse","value","false",3,"ngModel","ngModelChange"],["for","isLiveFalse",1,"radio"],i,s,["type","radio","name","sensitiveContent","id","sensitiveContentYes","value","both",3,"ngModel","ngModelChange"],["for","sensitiveContentYes",1,"radio"],N,["type","radio","name","sensitiveContent","id","sensitiveContentNo","value","false",3,"ngModel","ngModelChange"],["for","sensitiveContentNo",1,"radio"],I,F,[1,"label-container"],["for","original-publication-after"],m,[1,"pl-0","col-sm-6"],["type","text","id","original-publication-after","name","original-publication-after","placeholder",V,1,"form-control",3,"ngModel","change","keydown.enter","ngModelChange"],[1,"pr-0","col-sm-6"],["type","text","id","original-publication-before","name","original-publication-before","placeholder",B,1,"form-control",3,"ngModel","change","keydown.enter","ngModelChange"],w,["for","category"],G,[1,"peertube-select-container"],["id","category","name","category",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],J,[3,"value",4,"ngFor","ngForOf"],["for","licence"],K,["id","licence","name","licence",1,"form-control",3,"ngModel","ngModelChange"],z,["for","language"],k,["id","language","name","language",1,"form-control",3,"ngModel","ngModelChange"],X,["for","tagsAllOf"],q,["name","tagsAllOf","labelForId","tagsAllOf","id","tagsAllOf",3,"ngModel","ngModelChange"],["for","tagsOneOf"],Q,["name","tagsOneOf","labelForId","tagsOneOf","id","tagsOneOf",3,"ngModel","ngModelChange"],["for","host"],j,["type","text","id","host","name","host","placeholder","example.com",1,"form-control",3,"ngModel","change","keydown.enter","ngModelChange"],["class","form-group",4,"ngIf"],[1,"submit-button"],["class","reset-button",3,"click",4,"ngIf"],["type","submit","value",W],[1,"reset-button","reset-button-small",3,"click"],ee,["type","radio","name","sort",3,"id","value","ngModel","ngModelChange"],[1,"radio",3,"for"],ne,te,_e,["type","radio","name","publishedDateRange",3,"id","value","ngModel","change","ngModelChange"],ie,oe,["type","radio","name","durationRange",3,"id","value","ngModel","change","ngModelChange"],ae,re,se,le,ce,de,["type","radio","name","searchTarget","id","searchTargetLocal","value","local",3,"ngModel","ngModelChange"],["for","searchTargetLocal",1,"radio"],ge,["type","radio","name","searchTarget","id","searchTargetSearchIndex","value","search-index",3,"ngModel","ngModelChange"],["for","searchTargetSearchIndex",1,"radio"],Se,[1,"reset-button",3,"click"],ue]},template:function(n,t){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.formUpdated()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"label"),e.SDv(6,5),e.qZA(),e.YNc(7,g,2,0,"button",6),e.qZA(),e.YNc(8,u,4,5,"div",7),e.qZA(),e.TgZ(9,"div",3),e.TgZ(10,"div",4),e.TgZ(11,"label"),e.SDv(12,8),e.qZA(),e.YNc(13,L,2,0,"button",6),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"input",10),e.NdJ("ngModelChange",function(s){return t.advancedSearch.isLive=s}),e.qZA(),e.TgZ(16,"label",11),e.SDv(17,12),e.qZA(),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(s){return t.advancedSearch.isLive=s}),e.qZA(),e.TgZ(20,"label",14),e.SDv(21,15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",3),e.TgZ(23,"div",4),e.TgZ(24,"label"),e.SDv(25,16),e.qZA(),e.YNc(26,Ee,2,0,"button",6),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"input",17),e.NdJ("ngModelChange",function(s){return t.advancedSearch.nsfw=s}),e.qZA(),e.TgZ(29,"label",18),e.SDv(30,19),e.qZA(),e.qZA(),e.TgZ(31,"div",9),e.TgZ(32,"input",20),e.NdJ("ngModelChange",function(s){return t.advancedSearch.nsfw=s}),e.qZA(),e.TgZ(33,"label",21),e.SDv(34,22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"div",4),e.TgZ(37,"label"),e.SDv(38,23),e.qZA(),e.YNc(39,he,2,0,"button",6),e.qZA(),e.YNc(40,pe,4,5,"div",7),e.qZA(),e.TgZ(41,"div",3),e.TgZ(42,"div",24),e.TgZ(43,"label",25),e.SDv(44,26),e.qZA(),e.YNc(45,Ce,2,0,"button",6),e.qZA(),e.TgZ(46,"div",1),e.TgZ(47,"div",27),e.TgZ(48,"input",28),e.NdJ("change",function(){return t.onDurationOrPublishedUpdated()})("keydown.enter",function(s){return s.preventDefault()})("ngModelChange",function(s){return t.originallyPublishedStartYear=s}),e.qZA(),e.qZA(),e.TgZ(49,"div",29),e.TgZ(50,"input",30),e.NdJ("change",function(){return t.onDurationOrPublishedUpdated()})("keydown.enter",function(s){return s.preventDefault()})("ngModelChange",function(s){return t.originallyPublishedEndYear=s}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"div",3),e.TgZ(53,"div",4),e.TgZ(54,"label"),e.SDv(55,31),e.qZA(),e.YNc(56,Re,2,0,"button",6),e.qZA(),e.YNc(57,Ae,4,5,"div",7),e.qZA(),e.TgZ(58,"div",3),e.TgZ(59,"label",32),e.SDv(60,33),e.qZA(),e.YNc(61,Te,2,0,"button",6),e.TgZ(62,"div",34),e.TgZ(63,"select",35),e.NdJ("ngModelChange",function(s){return t.advancedSearch.categoryOneOf=s}),e.TgZ(64,"option",36),e.SDv(65,37),e.qZA(),e.YNc(66,Oe,2,2,"option",38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",3),e.TgZ(68,"label",39),e.SDv(69,40),e.qZA(),e.YNc(70,fe,2,0,"button",6),e.TgZ(71,"div",34),e.TgZ(72,"select",41),e.NdJ("ngModelChange",function(s){return t.advancedSearch.licenceOneOf=s}),e.TgZ(73,"option",36),e.SDv(74,42),e.qZA(),e.YNc(75,Me,2,2,"option",38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",3),e.TgZ(77,"label",43),e.SDv(78,44),e.qZA(),e.YNc(79,Ne,2,0,"button",6),e.TgZ(80,"div",34),e.TgZ(81,"select",45),e.NdJ("ngModelChange",function(s){return t.advancedSearch.languageOneOf=s}),e.TgZ(82,"option",36),e.SDv(83,46),e.qZA(),e.YNc(84,me,2,2,"option",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",2),e.TgZ(86,"div",3),e.TgZ(87,"label",47),e.SDv(88,48),e.qZA(),e.YNc(89,Pe,2,0,"button",6),e.TgZ(90,"my-select-tags",49),e.NdJ("ngModelChange",function(s){return t.advancedSearch.tagsAllOf=s}),e.qZA(),e.qZA(),e.TgZ(91,"div",3),e.TgZ(92,"label",50),e.SDv(93,51),e.qZA(),e.YNc(94,ve,2,0,"button",6),e.TgZ(95,"my-select-tags",52),e.NdJ("ngModelChange",function(s){return t.advancedSearch.tagsOneOf=s}),e.qZA(),e.qZA(),e.TgZ(96,"div",3),e.TgZ(97,"label",53),e.SDv(98,54),e.qZA(),e.TgZ(99,"input",55),e.NdJ("change",function(){return t.onDurationOrPublishedUpdated()})("keydown.enter",function(s){return s.preventDefault()})("ngModelChange",function(s){return t.advancedSearch.host=s}),e.qZA(),e.qZA(),e.YNc(100,De,12,2,"div",56),e.qZA(),e.qZA(),e.TgZ(101,"div",57),e.YNc(102,be,2,0,"button",58),e._UZ(103,"input",59),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("ngIf","-match"!==t.advancedSearch.sort),e.xp6(1),e.Q6J("ngForOf",t.sorts),e.xp6(5),e.Q6J("ngIf",void 0!==t.advancedSearch.isLive),e.xp6(2),e.Q6J("ngModel",t.advancedSearch.isLive),e.xp6(4),e.Q6J("ngModel",t.advancedSearch.isLive),e.xp6(7),e.Q6J("ngIf",void 0!==t.advancedSearch.nsfw),e.xp6(2),e.Q6J("ngModel",t.advancedSearch.nsfw),e.xp6(4),e.Q6J("ngModel",t.advancedSearch.nsfw),e.xp6(7),e.Q6J("ngIf",void 0!==t.publishedDateRange),e.xp6(1),e.Q6J("ngForOf",t.publishedDateRanges),e.xp6(5),e.Q6J("ngIf",t.originallyPublishedStartYear||t.originallyPublishedEndYear),e.xp6(3),e.Q6J("ngModel",t.originallyPublishedStartYear),e.xp6(2),e.Q6J("ngModel",t.originallyPublishedEndYear),e.xp6(6),e.Q6J("ngIf",void 0!==t.durationRange),e.xp6(1),e.Q6J("ngForOf",t.durationRanges),e.xp6(4),e.Q6J("ngIf",void 0!==t.advancedSearch.categoryOneOf),e.xp6(2),e.Q6J("ngModel",t.advancedSearch.categoryOneOf),e.xp6(1),e.Q6J("value",void 0),e.xp6(2),e.Q6J("ngForOf",t.videoCategories),e.xp6(4),e.Q6J("ngIf",void 0!==t.advancedSearch.licenceOneOf),e.xp6(2),e.Q6J("ngModel",t.advancedSearch.licenceOneOf),e.xp6(1),e.Q6J("value",void 0),e.xp6(2),e.Q6J("ngForOf",t.videoLicences),e.xp6(4),e.Q6J("ngIf",void 0!==t.advancedSearch.languageOneOf),e.xp6(2),e.Q6J("ngModel",t.advancedSearch.languageOneOf),e.xp6(1),e.Q6J("value",void 0),e.xp6(2),e.Q6J("ngForOf",t.videoLanguages),e.xp6(5),e.Q6J("ngIf",t.advancedSearch.tagsAllOf),e.xp6(1),e.Q6J("ngModel",t.advancedSearch.tagsAllOf),e.xp6(4),e.Q6J("ngIf",t.advancedSearch.tagsOneOf),e.xp6(1),e.Q6J("ngModel",t.advancedSearch.tagsOneOf),e.xp6(4),e.Q6J("ngModel",t.advancedSearch.host),e.xp6(1),e.Q6J("ngIf",t.isSearchTargetEnabled()),e.xp6(2),e.Q6J("ngIf",t.advancedSearch.size()))},directives:[c._Y,c.JL,c.F,r.O5,r.sg,c._,c.Fj,c.JJ,c.On,c.EJ,c.YN,c.Kr,f.j],styles:['form[_ngcontent-%COMP%]{margin-top:40px}.radio-label[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.peertube-radio-container[_ngcontent-%COMP%]{display:inline-block}@supports (margin-inline-end: 30px){.peertube-radio-container[_ngcontent-%COMP%]{margin-inline-end:30px}}@supports not (margin-inline-end: 30px){.peertube-radio-container[_ngcontent-%COMP%]{margin-right:30px}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0 0 1rem;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;position:relative;border:1px solid #C6C6C6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:#e5e5e5;color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}input[type=text][_ngcontent-%COMP%]{padding:0 15px;display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #C6C6C6;border-radius:3px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;border:0;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px!important;text-align:center;cursor:pointer;display:inline-block}input[type=submit][_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%]:active{text-decoration:none!important;outline:none!important}@supports (padding-inline-start: 13px){input[type=submit][_ngcontent-%COMP%]{padding-inline-start:13px}}@supports not (padding-inline-start: 13px){input[type=submit][_ngcontent-%COMP%]{padding-left:13px}}@supports (padding-inline-end: 17px){input[type=submit][_ngcontent-%COMP%]{padding-inline-end:17px}}@supports not (padding-inline-end: 17px){input[type=submit][_ngcontent-%COMP%]{padding-right:17px}}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.submit-button[_ngcontent-%COMP%]{text-align:end}.reset-button[_ngcontent-%COMP%]{border:0;font-size:15px;height:30px;line-height:30px;border-radius:3px!important;text-align:center;cursor:pointer;font-weight:600;display:inline-block;padding:0 10px;white-space:nowrap;background:transparent}@supports (padding-inline-start: 13px){.reset-button[_ngcontent-%COMP%]{padding-inline-start:13px}}@supports not (padding-inline-start: 13px){.reset-button[_ngcontent-%COMP%]{padding-left:13px}}@supports (padding-inline-end: 17px){.reset-button[_ngcontent-%COMP%]{padding-inline-end:17px}}@supports not (padding-inline-end: 17px){.reset-button[_ngcontent-%COMP%]{padding-right:17px}}@supports (margin-inline-end: 1rem){.reset-button[_ngcontent-%COMP%]{margin-inline-end:1rem}}@supports not (margin-inline-end: 1rem){.reset-button[_ngcontent-%COMP%]{margin-right:1rem}}.reset-button-small[_ngcontent-%COMP%]{font-size:80%;height:unset;line-height:unset;margin:unset unset .5rem}.label-container[_ngcontent-%COMP%]{display:flex;white-space:nowrap}']}),_})();var Ie=a(86552),Fe=a(51214),ye=a(69469),xe=a(33373),Ve=a(53067);function $e(_,o){1&_&&(e.TgZ(0,"span",14),e.SDv(1,18),e.qZA())}function Ze(_,o){1&_&&(e.TgZ(0,"span",14),e.SDv(1,19),e.qZA())}function He(_,o){if(1&_&&(e.TgZ(0,"span"),e.tHW(1,20),e._UZ(2,"span",21),e.N_p(),e.qZA()),2&_){const n=e.oxw(2);e.xp6(2),e.pQV(n.currentSearch),e.QtT(1)}}function Ue(_,o){if(1&_&&(e.TgZ(0,"div",13),e.TgZ(1,"span",14),e.SDv(2,15),e.ALo(3,"myNumberFormatter"),e.qZA(),e.YNc(4,$e,2,0,"span",16),e.YNc(5,Ze,2,0,"span",16),e.YNc(6,He,3,1,"span",17),e.qZA()),2&_){const n=e.oxw();e.xp6(3),e.pQV(e.lcZ(3,5,n.pagination.totalItems))(n.pagination.totalItems),e.QtT(2),e.xp6(1),e.Q6J("ngIf","local"===n.advancedSearch.searchTarget),e.xp6(1),e.Q6J("ngIf","search-index"===n.advancedSearch.searchTarget),e.xp6(1),e.Q6J("ngIf",n.currentSearch)}}function Ye(_,o){if(1&_&&(e.tHW(0,6,1),e._UZ(1,"span",22),e.N_p()),2&_){const n=e.oxw();e.xp6(1),e.pQV(n.numberOfFilters()),e.QtT(0)}}function Be(_,o){if(1&_&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.Oqu(n.error)}}function we(_,o){1&_&&(e.TgZ(0,"div",24),e.SDv(1,25),e.qZA())}function Ge(_,o){1&_&&e.GkF(0)}function Je(_,o){if(1&_&&(e.TgZ(0,"a",38),e.YNc(1,Ge,1,0,"ng-container",39),e.qZA()),2&_){e.oxw();const n=e.MAs(6),t=e.oxw().$implicit,i=e.oxw();e.Q6J("routerLink",i.getInternalChannelUrl(t)),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function Ke(_,o){1&_&&e.GkF(0)}function ze(_,o){if(1&_&&(e.TgZ(0,"a",40),e.YNc(1,Ke,1,0,"ng-container",39),e.qZA()),2&_){e.oxw();const n=e.MAs(6),t=e.oxw().$implicit,i=e.oxw();e.Q6J("href",i.getExternalChannelUrl(t),e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function ke(_,o){if(1&_&&(e.TgZ(0,"div",41),e._uU(1),e.qZA(),e.TgZ(2,"div",42),e._uU(3),e.qZA()),2&_){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n.displayName),e.xp6(2),e.Oqu(n.nameWithHost)}}const Xe=function(_){return[_]};function qe(_,o){if(1&_&&e._UZ(0,"my-subscribe-button",43),2&_){const n=e.oxw(2).$implicit;e.Q6J("videoChannels",e.VKq(1,Xe,n))}}function Qe(_,o){if(1&_&&(e.TgZ(0,"div",29),e._UZ(1,"my-actor-avatar",30),e.TgZ(2,"div",31),e.YNc(3,Je,2,2,"a",32),e.YNc(4,ze,2,2,"a",33),e.YNc(5,ke,4,2,"ng-template",null,34,e.W1O),e.TgZ(7,"div",35),e.SDv(8,36),e.qZA(),e.qZA(),e.YNc(9,qe,1,3,"my-subscribe-button",37),e.qZA()),2&_){const n=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("channel",n)("internalHref",t.getInternalChannelUrl(n))("href",t.getExternalChannelUrl(n)),e.xp6(2),e.Q6J("ngIf",!t.isExternalChannelUrl()),e.xp6(1),e.Q6J("ngIf",t.isExternalChannelUrl()),e.xp6(4),e.pQV(n.followersCount),e.QtT(8),e.xp6(1),e.Q6J("ngIf",!t.hideActions())}}function je(_,o){if(1&_){const n=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"my-video-miniature",45),e.NdJ("videoBlocked",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().removeVideoFromArray(i)})("videoRemoved",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().removeVideoFromArray(i)}),e.qZA(),e.qZA()}if(2&_){const n=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("video",n)("user",t.userMiniature)("displayAsRow",!0)("displayVideoActions",!t.hideActions())("displayOptions",t.videoDisplayOptions)("videoLinkType",t.getLinkType())}}function We(_,o){if(1&_&&(e.TgZ(0,"div",46),e._UZ(1,"my-video-playlist-miniature",47),e.qZA()),2&_){const n=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("playlist",n)("displayAsRow",!0)("displayChannel",!0)("linkType",t.getLinkType())}}function en(_,o){if(1&_&&(e.ynx(0),e.YNc(1,Qe,10,7,"div",26),e.YNc(2,je,2,6,"div",27),e.YNc(3,We,2,4,"div",28),e.BQk()),2&_){const n=o.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isVideoChannel(n)),e.xp6(1),e.Q6J("ngIf",t.isVideo(n)),e.xp6(1),e.Q6J("ngIf",t.isPlaylist(n))}}let x=(()=>{class _{constructor(n,t,i,s,N,I,F,m,V){this.route=n,this.router=t,this.metaService=i,this.notifier=s,this.searchService=N,this.authService=I,this.userService=F,this.hooks=m,this.serverService=V,this.results=[],this.pagination={currentPage:1,totalItems:null},this.advancedSearch=new A.ZJ,this.isSearchFilterCollapsed=!0,this.videoDisplayOptions={date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!1,privacyText:!1,state:!1,blacklistInfo:!1},this.isInitialLoad=!1,this.channelsPerPage=2,this.playlistsPerPage=2,this.videosPerPage=10,this.hasMoreResults=!0,this.isSearching=!1}ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig(),this.subActivatedRoute=this.route.queryParams.subscribe({next:n=>{const t=n.search;(this.currentSearch!==t||n.searchTarget!==this.advancedSearch.searchTarget)&&(this.resetPagination(),this.advancedSearch.reset(),this.currentSearch=t||void 0,this.updateTitle()),this.advancedSearch=new A.ZJ(n),this.advancedSearch.searchTarget||(this.advancedSearch.searchTarget=this.getDefaultSearchTarget()),this.error=this.checkFieldsAndGetError(),this.isSearchFilterCollapsed=!(this.error||!1!==this.isInitialLoad&&this.advancedSearch.containsValues()),this.isInitialLoad=!1,this.search()},error:n=>this.notifier.error(n.text)}),this.userService.getAnonymousOrLoggedUser().subscribe(n=>this.userMiniature=n),this.hooks.runAction("action:search.init","search")}ngOnDestroy(){this.subActivatedRoute&&this.subActivatedRoute.unsubscribe()}isVideoChannel(n){return n instanceof D.aO}isVideo(n){return n instanceof D.nk}isPlaylist(n){return n instanceof C.L6}isUserLoggedIn(){return this.authService.isLoggedIn()}search(){this.error=this.checkFieldsAndGetError(),!this.error&&(this.isSearching=!0,(0,M.D)([this.getVideoChannelObs(),this.getVideoPlaylistObs(),this.getVideosObs()]).subscribe({next:n=>{for(const t of n)this.results=this.results.concat(t.data);this.pagination.totalItems=n.reduce((t,i)=>t+i.total,0),this.lastSearchTarget=this.advancedSearch.searchTarget,this.hasMoreResults=this.results.length<this.pagination.totalItems},error:n=>{"search-index"===this.advancedSearch.searchTarget?(this.notifier.error("Search index is unavailable. Retrying with instance results instead.","Search error"),this.advancedSearch.searchTarget="local",this.search()):this.notifier.error(n.message)},complete:()=>{this.isSearching=!1}}))}onNearOfBottom(){!this.hasMoreResults||this.isSearching||(this.pagination.currentPage+=1,this.search())}onFiltered(){this.resetPagination(),this.updateUrlFromAdvancedSearch()}numberOfFilters(){return this.advancedSearch.size()}removeVideoFromArray(n){this.results=this.results.filter(t=>!this.isVideo(t)||t.id!==n.id)}getLinkType(){if("search-index"===this.advancedSearch.searchTarget){const n=this.serverConfig.search.remoteUri;return(this.isUserLoggedIn()||n.anonymous)&&n.users?"lazy-load":"external"}return"internal"}isExternalChannelUrl(){return"external"===this.getLinkType()}getExternalChannelUrl(n){if("external"===this.getLinkType())return n.url}getInternalChannelUrl(n){const t=this.getLinkType();return"internal"===t?["/c",n.nameWithHost]:"lazy-load"===t?["/search/lazy-load-channel",{url:n.url}]:void 0}hideActions(){return"search-index"===this.lastSearchTarget}resetPagination(){this.pagination.currentPage=1,this.pagination.totalItems=null,this.channelsPerPage=2,this.results=[]}updateTitle(){this.metaService.setTitle("Cercar"+(this.currentSearch?" "+this.currentSearch:""))}updateUrlFromAdvancedSearch(){const n=this.currentSearch||void 0;this.router.navigate([],{relativeTo:this.route,queryParams:Object.assign({},this.advancedSearch.toUrlObject(),{search:n})})}getVideosObs(){const n={search:this.currentSearch,componentPagination:(0,R.Ne)(this.pagination,{itemsPerPage:this.videosPerPage}),advancedSearch:this.advancedSearch};return this.hooks.wrapObsFun(this.searchService.searchVideos.bind(this.searchService),n,"search","filter:api.search.videos.list.params","filter:api.search.videos.list.result")}getVideoChannelObs(){const n={search:this.currentSearch,componentPagination:(0,R.Ne)(this.pagination,{itemsPerPage:this.channelsPerPage}),advancedSearch:this.advancedSearch};return this.hooks.wrapObsFun(this.searchService.searchVideoChannels.bind(this.searchService),n,"search","filter:api.search.video-channels.list.params","filter:api.search.video-channels.list.result")}getVideoPlaylistObs(){const n={search:this.currentSearch,componentPagination:(0,R.Ne)(this.pagination,{itemsPerPage:this.playlistsPerPage}),advancedSearch:this.advancedSearch};return this.hooks.wrapObsFun(this.searchService.searchVideoPlaylists.bind(this.searchService),n,"search","filter:api.search.video-playlists.list.params","filter:api.search.video-playlists.list.result")}getDefaultSearchTarget(){const n=this.serverConfig.search.searchIndex;return n.enabled&&(n.isDefaultSearch||n.disableLocalSearch)?"search-index":"local"}checkFieldsAndGetError(){if(this.advancedSearch.host&&!(0,y.p)(this.advancedSearch.host))return "PeerTube instance host filter is invalid"}}return _.\u0275fac=function(n){return new(n||_)(e.Y36(T.gz),e.Y36(T.F0),e.Y36(h.Rj),e.Y36(h.d4),e.Y36(A.oD),e.Y36(h.e8),e.Y36(h.KD),e.Y36(h.nT),e.Y36(h.NG))},_.\u0275cmp=e.Xpm({type:_,selectors:[["my-search"]],decls:14,vars:8,consts:function(){let o,n,t,i,s,N,I,F;return o="{VAR_PLURAL, plural, =1 {result} other {results}}",o=e.Zx4(o,{VAR_PLURAL:"\ufffd1\ufffd"}),n="" + "\ufffd0\ufffd" + " " + o + "",t="on this instance",i="on the vidiverse",s="for " + "\ufffd#2\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#2\ufffd" + "",N="\n          Filtres\n          \n          " + "\ufffd*8:1\ufffd\ufffd#1:1\ufffd" + "\n          " + "\ufffd0:1\ufffd" + "\n          " + "\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd" + "\n        ",I="\n    Cap de resultats\n  ",F="\n          " + "\ufffd0\ufffd" + " abonats\n        ",[["myInfiniteScroller","",1,"search-result",3,"nearOfBottom"],[1,"results-header"],[1,"first-line"],["class","results-counter",4,"ngIf"],["role","button","aria-controls","collapseBasic",1,"results-filter-button","ml-auto",3,"click"],[1,"icon","icon-filter"],N,["class","badge badge-secondary",4,"ngIf"],[1,"results-filter","collapse-transition",3,"ngbCollapse"],[3,"advancedSearch","filtered"],["class","alert alert-danger",4,"ngIf"],["class","no-results",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"results-counter"],[1,"mr-1"],n,["class","mr-1",4,"ngIf"],[4,"ngIf"],t,i,s,[1,"search-value"],[1,"badge","badge-secondary"],[1,"alert","alert-danger"],[1,"no-results"],I,["class","entry video-channel",4,"ngIf"],["class","entry video",4,"ngIf"],["class","entry video-playlist",4,"ngIf"],[1,"entry","video-channel"],[3,"channel","internalHref","href"],[1,"video-channel-info"],["class","video-channel-names",3,"routerLink",4,"ngIf"],["target","_blank","class","video-channel-names",3,"href",4,"ngIf"],["aContent",""],[1,"video-channel-followers"],F,[3,"videoChannels",4,"ngIf"],[1,"video-channel-names",3,"routerLink"],[4,"ngTemplateOutlet"],["target","_blank",1,"video-channel-names",3,"href"],[1,"video-channel-display-name"],[1,"video-channel-name"],[3,"videoChannels"],[1,"entry","video"],[3,"video","user","displayAsRow","displayVideoActions","displayOptions","videoLinkType","videoBlocked","videoRemoved"],[1,"entry","video-playlist"],[3,"playlist","displayAsRow","displayChannel","linkType"]]},template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.NdJ("nearOfBottom",function(){return t.onNearOfBottom()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ue,7,7,"div",3),e.TgZ(4,"div",4),e.NdJ("click",function(){return t.isSearchFilterCollapsed=!t.isSearchFilterCollapsed}),e._UZ(5,"span",5),e.ynx(6),e.tHW(7,6),e.YNc(8,Ye,2,1,"span",7),e.N_p(),e.BQk(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"my-search-filters",9),e.NdJ("filtered",function(){return t.onFiltered()}),e.qZA(),e.YNc(11,Be,2,1,"div",10),e.qZA(),e.qZA(),e.YNc(12,we,2,0,"div",11),e.YNc(13,en,4,3,"ng-container",12),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",t.pagination.totalItems),e.xp6(1),e.uIk("aria-expanded",!t.isSearchFilterCollapsed),e.xp6(4),e.Q6J("ngIf",t.numberOfFilters()>0),e.xp6(1),e.Q6J("ngbCollapse",t.isSearchFilterCollapsed),e.xp6(1),e.Q6J("advancedSearch",t.advancedSearch),e.xp6(1),e.Q6J("ngIf",t.error),e.xp6(1),e.Q6J("ngIf",0===t.pagination.totalItems&&0===t.results.length),e.xp6(1),e.Q6J("ngForOf",t.results))},directives:[S.A,r.O5,l._D,Le,r.sg,Ie.b,T.yS,r.tP,Fe.h,ye.v,xe.U],pipes:[Ve.m],styles:[".search-result[_ngcontent-%COMP%]{padding:40px}.alert-danger[_ngcontent-%COMP%]{margin-top:10px}.results-header[_ngcontent-%COMP%]{font-size:16px;padding-bottom:20px;margin-bottom:30px;border-bottom:1px solid #DADADA}.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]{display:flex;flex-direction:row}.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-counter[_ngcontent-%COMP%]{flex-grow:1}.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-counter[_ngcontent-%COMP%]   .search-value[_ngcontent-%COMP%]{font-weight:600}.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-filter-button[_ngcontent-%COMP%]{cursor:pointer}.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-filter-button[_ngcontent-%COMP%]   .icon.icon-filter[_ngcontent-%COMP%]{display:inline-block;background-repeat:no-repeat;background-size:contain;width:20px;height:20px;vertical-align:middle;cursor:pointer;position:relative;top:-1px;background-image:url(filter.f342dd7b00319746f418.svg)}@supports (margin-inline-end: 5px){.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-filter-button[_ngcontent-%COMP%]   .icon.icon-filter[_ngcontent-%COMP%]{margin-inline-end:5px}}@supports not (margin-inline-end: 5px){.results-header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .results-filter-button[_ngcontent-%COMP%]   .icon.icon-filter[_ngcontent-%COMP%]{margin-right:5px}}.entry[_ngcontent-%COMP%]{display:flex;margin-bottom:40px;max-width:800px}.video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{display:inline-block;width:130px;height:130px;min-width:130px;min-height:130px;margin:0 75px}.video-channel-info[_ngcontent-%COMP%]{flex-grow:1;margin:0 10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.video-channel-names[_ngcontent-%COMP%]{display:flex;align-items:baseline;color:var(--mainForegroundColor);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.video-channel-names[_ngcontent-%COMP%]:hover, .video-channel-names[_ngcontent-%COMP%]:focus, .video-channel-names[_ngcontent-%COMP%]:active{text-decoration:none!important;outline:none!important}.video-channel-display-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.3em}.video-channel-name[_ngcontent-%COMP%]{font-size:14px;color:var(--greyForegroundColor)}@supports (margin-inline-start: 5px){.video-channel-name[_ngcontent-%COMP%]{margin-inline-start:5px}}@supports not (margin-inline-start: 5px){.video-channel-name[_ngcontent-%COMP%]{margin-left:5px}}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto}.main-col:not(.expanded)[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{display:inline-block;width:130px;height:130px;min-width:130px;min-height:130px;margin:0 35.5px;grid-column:1;grid-row:1/-1}.main-col:not(.expanded)[_nghost-%COMP%]   .video-channel-info[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-channel-info[_ngcontent-%COMP%]{grid-column:2;grid-row:1}.main-col:not(.expanded)[_nghost-%COMP%]   my-subscribe-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   my-subscribe-button[_ngcontent-%COMP%]{grid-column:2;grid-row:2;align-self:end}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto}.main-col.expanded[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{display:inline-block;width:130px;height:130px;min-width:130px;min-height:130px;margin:0 35.5px;grid-column:1;grid-row:1/-1}.main-col.expanded[_nghost-%COMP%]   .video-channel-info[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-channel-info[_ngcontent-%COMP%]{grid-column:2;grid-row:1}.main-col.expanded[_nghost-%COMP%]   my-subscribe-button[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   my-subscribe-button[_ngcontent-%COMP%]{grid-column:2;grid-row:2;align-self:end}}@media screen and (max-width: 740px){.main-col:not(.expanded)[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{display:inline-block;width:125px;height:125px;min-width:125px;min-height:125px;margin:0}}@media screen and (max-width: 500px){.main-col.expanded[_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{display:inline-block;width:125px;height:125px;min-width:125px;min-height:125px;margin:0}}@media screen and (max-width: 500px){.search-result[_ngcontent-%COMP%]{padding:20px 10px}.search-result[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]{font-size:15px!important}.video-channel-display-name[_ngcontent-%COMP%]{font-size:14px}.video-channel-name[_ngcontent-%COMP%]{font-size:12px}}"]}),_})();var nn=a(29230);class Z{resolve(o){const n=o.params.url;return n?this.finder(n).pipe((0,nn.U)(t=>{if(1!==t.data.length)return console.error("Cannot find result for this URL"),this.router.navigateByUrl("/404");const i=this.buildUrl(t.data[0]);return this.router.navigateByUrl(i)})):(console.error("Could not find url param.",{params:o.params}),this.router.navigateByUrl("/404"))}}let H=(()=>{class _ extends Z{constructor(n,t){super(),this.router=n,this.searchService=t}finder(n){return this.searchService.searchVideoChannels({search:n})}buildUrl(n){return"/video-channels/"+n.nameWithHost}}return _.\u0275fac=function(n){return new(n||_)(e.LFG(T.F0),e.LFG(A.oD))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})(),U=(()=>{class _ extends Z{constructor(n,t){super(),this.router=n,this.searchService=t}finder(n){return this.searchService.searchVideoPlaylists({search:n})}buildUrl(n){return C.L6.buildWatchUrl(n)}}return _.\u0275fac=function(n){return new(n||_)(e.LFG(T.F0),e.LFG(A.oD))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})(),Y=(()=>{class _ extends Z{constructor(n,t){super(),this.router=n,this.searchService=t}finder(n){return this.searchService.searchVideos({search:n})}buildUrl(n){return D.nk.buildWatchUrl(n)}}return _.\u0275fac=function(n){return new(n||_)(e.LFG(T.F0),e.LFG(A.oD))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})();const tn=[{path:"",component:x,data:{meta:{title:"Cercar"}}},{path:"lazy-load-video",component:x,resolve:{data:Y}},{path:"lazy-load-channel",component:x,resolve:{data:H}},{path:"lazy-load-playlist",component:x,resolve:{data:U}}];let _n=(()=>{class _{}return _.\u0275fac=function(n){return new(n||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[[T.Bz.forChild(tn)],T.Bz]}),_})(),on=(()=>{class _{}return _.\u0275fac=function(n){return new(n||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({providers:[E.o,Y,H,U],imports:[[_n,D.nC,A.DV,P.hA,p.v,O.yC,v.F5,C.xq]]}),_})()},18736:($,b,a)=>{a.d(b,{j:()=>A});var p=a(42741),P=a(93324),D=a(21499);let A=(()=>{class O{constructor(){this.availableItems=[],this.selectedItems=[],this.propagateChange=C=>{}}writeValue(C){this.selectedItems=C,this.propagateChange(this.selectedItems)}registerOnChange(C){this.propagateChange=C}registerOnTouched(){}onModelChange(){this.propagateChange(this.selectedItems)}}return O.\u0275fac=function(C){return new(C||O)},O.\u0275cmp=p.Xpm({type:O,selectors:[["my-select-tags"]],inputs:{availableItems:"availableItems",selectedItems:"selectedItems"},features:[p._Bn([{provide:P.JU,useExisting:(0,p.Gpc)(()=>O),multi:!0}])],decls:1,vars:8,consts:function(){let v;return v="Picatz una n\xF2va etiqueta",[["placeholder",v,3,"items","ngModel","maxSelectedItems","clearable","addTag","multiple","isOpen","searchable","ngModelChange"]]},template:function(C,E){1&C&&(p.TgZ(0,"ng-select",0),p.NdJ("ngModelChange",function(M){return E.selectedItems=M})("ngModelChange",function(){return E.onModelChange()}),p.qZA()),2&C&&p.Q6J("items",E.availableItems)("ngModel",E.selectedItems)("maxSelectedItems",5)("clearable",!0)("addTag",!0)("multiple",!0)("isOpen",!1)("searchable",!0)},directives:[D.w9,P.JJ,P.On],styles:["ng-select[_ngcontent-%COMP%]{width:auto}@media screen and (max-width: auto){ng-select[_ngcontent-%COMP%]{width:100%}}ng-select[_ngcontent-%COMP%]     .ng-value-container{max-height:100px;overflow-y:auto;overflow-x:hidden}ng-select[_ngcontent-%COMP%]     .ng-value-label img{position:relative;top:-1px}ng-select[_ngcontent-%COMP%]     img{border-radius:50%;height:20px;width:20px}.root[_ngcontent-%COMP%]{display:flex;align-items:center}.root[_ngcontent-%COMP%] > my-select-options[_ngcontent-%COMP%]{flex-grow:1}my-select-options[_ngcontent-%COMP%] + input[_ngcontent-%COMP%]{padding:0 15px;display:inline-block;height:30px;width:auto;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #C6C6C6;border-radius:3px;font-size:15px;display:block}my-select-options[_ngcontent-%COMP%] + input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}my-select-options[_ngcontent-%COMP%] + input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(auto + 40px)){my-select-options[_ngcontent-%COMP%] + input[_ngcontent-%COMP%]{width:100%}}@supports (margin-inline-start: 5px){my-select-options[_ngcontent-%COMP%] + input[_ngcontent-%COMP%]{margin-inline-start:5px}}@supports not (margin-inline-start: 5px){my-select-options[_ngcontent-%COMP%] + input[_ngcontent-%COMP%]{margin-left:5px}}@supports (margin-inline-start: 5px){.input-suffix[_ngcontent-%COMP%]{margin-inline-start:5px}}@supports not (margin-inline-start: 5px){.input-suffix[_ngcontent-%COMP%]{margin-left:5px}}","ng-select[_ngcontent-%COMP%]     .ng-arrow-wrapper{display:none}"]}),O})()},68237:($,b,a)=>{a.d(b,{ZJ:()=>P,XX:()=>R,oD:()=>T.o,DV:()=>h});var p=a(86804);class P{constructor(r){this.silentFilters=new Set(["sort","searchTarget"]),r&&(this.startDate=r.startDate||void 0,this.endDate=r.endDate||void 0,this.originallyPublishedStartDate=r.originallyPublishedStartDate||void 0,this.originallyPublishedEndDate=r.originallyPublishedEndDate||void 0,this.nsfw=r.nsfw||void 0,this.isLive=r.isLive||void 0,this.categoryOneOf=r.categoryOneOf||void 0,this.licenceOneOf=r.licenceOneOf||void 0,this.languageOneOf=r.languageOneOf||void 0,this.tagsOneOf=(0,p.g9)(r.tagsOneOf),this.tagsAllOf=(0,p.g9)(r.tagsAllOf),this.durationMin=parseInt(r.durationMin,10),this.durationMax=parseInt(r.durationMax,10),this.host=r.host||void 0,this.searchTarget=r.searchTarget||void 0,isNaN(this.durationMin)&&(this.durationMin=void 0),isNaN(this.durationMax)&&(this.durationMax=void 0),this.sort=r.sort||"-match")}containsValues(){const r=this.toUrlObject();for(const l of Object.keys(r))if(!this.silentFilters.has(l)&&this.isValidValue(r[l]))return!0;return!1}reset(){this.startDate=void 0,this.endDate=void 0,this.originallyPublishedStartDate=void 0,this.originallyPublishedEndDate=void 0,this.nsfw=void 0,this.categoryOneOf=void 0,this.licenceOneOf=void 0,this.languageOneOf=void 0,this.tagsOneOf=void 0,this.tagsAllOf=void 0,this.durationMin=void 0,this.durationMax=void 0,this.isLive=void 0,this.host=void 0,this.sort="-match"}toUrlObject(){return{startDate:this.startDate,endDate:this.endDate,originallyPublishedStartDate:this.originallyPublishedStartDate,originallyPublishedEndDate:this.originallyPublishedEndDate,nsfw:this.nsfw,categoryOneOf:this.categoryOneOf,licenceOneOf:this.licenceOneOf,languageOneOf:this.languageOneOf,tagsOneOf:this.tagsOneOf,tagsAllOf:this.tagsAllOf,durationMin:this.durationMin,durationMax:this.durationMax,isLive:this.isLive,host:this.host,sort:this.sort,searchTarget:this.searchTarget}}toVideosAPIObject(){let r;return this.isLive&&(r="true"===this.isLive),{startDate:this.startDate,endDate:this.endDate,originallyPublishedStartDate:this.originallyPublishedStartDate,originallyPublishedEndDate:this.originallyPublishedEndDate,nsfw:this.nsfw,categoryOneOf:(0,p.g9)(this.categoryOneOf),licenceOneOf:(0,p.g9)(this.licenceOneOf),languageOneOf:(0,p.g9)(this.languageOneOf),tagsOneOf:this.tagsOneOf,tagsAllOf:this.tagsAllOf,durationMin:this.durationMin,durationMax:this.durationMax,host:this.host,isLive:r,sort:this.sort,searchTarget:this.searchTarget}}toPlaylistAPIObject(){return{host:this.host,searchTarget:this.searchTarget}}toChannelAPIObject(){return{host:this.host,searchTarget:this.searchTarget}}size(){let r=0;const l=this.toUrlObject();for(const c of Object.keys(l))this.silentFilters.has(c)||this.isValidValue(l[c])&&r++;return r}isValidValue(r){return!(void 0===r||""===r||Array.isArray(r)&&0===r.length)}}var D=a(57115),A=a(48022),O=a(64033),v=a(24898),C=a(29230),E=a(42741),T=a(7958);const M=D("peertube:search:FindInBulkService");let R=(()=>{class S{constructor(l,c){this.searchService=l,this.ngZone=c,this.getVideoInBulk=this.buildBulkObservableObject(this.getVideosInBulk.bind(this)),this.getChannelInBulk=this.buildBulkObservableObject(this.getChannelsInBulk.bind(this)),this.getPlaylistInBulk=this.buildBulkObservableObject(this.getPlaylistsInBulk.bind(this))}getVideo(l){return M("Schedule video fetch for uuid %s.",l),this.getData({observableObject:this.getVideoInBulk,finder:c=>c.uuid===l,param:l})}getChannel(l){return M("Schedule channel fetch for handle %s.",l),this.getData({observableObject:this.getChannelInBulk,finder:c=>c.nameWithHost===l||c.nameWithHostForced===l,param:l})}getPlaylist(l){return M("Schedule playlist fetch for uuid %s.",l),this.getData({observableObject:this.getPlaylistInBulk,finder:c=>c.uuid===l,param:l})}getData(l){const{observableObject:c,param:f,finder:g}=l;return new A.y(u=>{c.result.pipe((0,v.P)(),(0,C.U)(({data:L})=>L),(0,C.U)(L=>L.find(g))).subscribe(L=>{L?(u.next(L),u.complete()):u.error(new Error("Element " + f + " not found"))}),c.notifier.next(f)})}getVideosInBulk(l){return M("Fetching videos %s.",l.join(", ")),this.searchService.searchVideos({uuids:l})}getChannelsInBulk(l){return M("Fetching channels %s.",l.join(", ")),this.searchService.searchVideoChannels({handles:l})}getPlaylistsInBulk(l){return M("Fetching playlists %s.",l.join(", ")),this.searchService.searchVideoPlaylists({uuids:l})}buildBulkObservableObject(l){const c=new O.x;return{notifier:c,result:(0,p.f8)({time:500,bulkGet:l,ngZone:this.ngZone,notifierObservable:c.asObservable()})}}}return S.\u0275fac=function(l){return new(l||S)(E.LFG(T.o),E.LFG(E.R0b))},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac}),S})();var y=a(62026),e=a(36226);let h=(()=>{class S{}return S.\u0275fac=function(l){return new(l||S)},S.\u0275mod=E.oAB({type:S}),S.\u0275inj=E.cJS({providers:[R,T.o],imports:[[y.nC,e.xq]]}),S})()},7958:($,b,a)=>{a.d(b,{o:()=>R});var p=a(72754),P=a(97142),D=a(29230),A=a(31887),O=a(62026),v=a(8931),C=a(24766),E=a(42741),T=a(54755),M=a(36226);class R{constructor(e,h,S,r,l){this.authHttp=e,this.restExtractor=h,this.restService=S,this.videoService=r,this.playlistService=l;const c=v.X.getItem("search-url");c&&(R.BASE_SEARCH_URL=c)}searchVideos(e){const{search:h,uuids:S,componentPagination:r,advancedSearch:l}=e,c=R.BASE_SEARCH_URL+"videos";let f;r&&(f=this.restService.componentPaginationToRestPagination(r));let g=new A.LE;if(g=this.restService.addRestGetParams(g,f),h&&(g=g.append("search",h)),S&&(g=this.restService.addArrayParams(g,"uuids",S)),l){const u=l.toVideosAPIObject();g=this.restService.addObjectParams(g,u)}return this.authHttp.get(c,{params:g}).pipe((0,p.w)(u=>this.videoService.extractVideos(u)),(0,P.K)(u=>this.restExtractor.handleError(u)))}searchVideoChannels(e){const{search:h,advancedSearch:S,componentPagination:r,handles:l}=e,c=R.BASE_SEARCH_URL+"video-channels";let f;r&&(f=this.restService.componentPaginationToRestPagination(r));let g=new A.LE;if(g=this.restService.addRestGetParams(g,f),h&&(g=g.append("search",h)),l&&(g=this.restService.addArrayParams(g,"handles",l)),S){const u=S.toChannelAPIObject();g=this.restService.addObjectParams(g,u)}return this.authHttp.get(c,{params:g}).pipe((0,D.U)(u=>O.B1.extractVideoChannels(u)),(0,P.K)(u=>this.restExtractor.handleError(u)))}searchVideoPlaylists(e){const{search:h,advancedSearch:S,componentPagination:r,uuids:l}=e,c=R.BASE_SEARCH_URL+"video-playlists";let f;r&&(f=this.restService.componentPaginationToRestPagination(r));let g=new A.LE;if(g=this.restService.addRestGetParams(g,f),h&&(g=g.append("search",h)),l&&(g=this.restService.addArrayParams(g,"uuids",l)),S){const u=S.toPlaylistAPIObject();g=this.restService.addObjectParams(g,u)}return this.authHttp.get(c,{params:g}).pipe((0,p.w)(u=>this.playlistService.extractPlaylists(u)),(0,P.K)(u=>this.restExtractor.handleError(u)))}}R.BASE_SEARCH_URL=C.N.apiUrl+"/api/v1/search/",R.\u0275fac=function(e){return new(e||R)(E.LFG(A.eN),E.LFG(T.DI),E.LFG(T.vg),E.LFG(O.kI),E.LFG(M.Qq))},R.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac})}}]);