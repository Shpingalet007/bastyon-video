var Ee=Object.defineProperty,ve=Object.defineProperties,we=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,ge=(N,k,c)=>k in N?Ee(N,k,{enumerable:!0,configurable:!0,writable:!0,value:c}):N[k]=c,_e=(N,k)=>{for(var c in k||(k={}))me.call(k,c)&&ge(N,c,k[c]);if(pe)for(var c of pe(k))Re.call(k,c)&&ge(N,c,k[c]);return N},ye=(N,k)=>ve(N,we(k));(self.webpackChunkpeertube_client=self.webpackChunkpeertube_client||[]).push([[268],{65963:N=>{function k(v,R,T,m,y,s,p){try{var w=v[s](p),L=w.value}catch(b){return void T(b)}w.done?R(L):Promise.resolve(L).then(m,y)}N.exports=function(v){return function(){var R=this,T=arguments;return new Promise(function(m,y){var s=v.apply(R,T);function p(L){k(s,m,y,p,w,"next",L)}function w(L){k(s,m,y,p,w,"throw",L)}p(void 0)})}},N.exports.default=N.exports,N.exports.__esModule=!0},26336:(N,k,c)=>{const v=c(57115)("bittorrent-tracker:client"),R=c(43674),T=c(55211),m=c(84032),y=c(71893),s=c(41965),p=c(86556),w=c(88333),L=c(70059),b=c(13836);N.exports=(()=>{class O extends R{constructor(l={}){if(super(),!l.peerId)throw new Error("Option `peerId` is required");if(!l.infoHash)throw new Error("Option `infoHash` is required");if(!l.announce)throw new Error("Option `announce` is required");if(!process.browser&&!l.port)throw new Error("Option `port` is required");this.peerId="string"==typeof l.peerId?l.peerId:l.peerId.toString("hex"),this._peerIdBuffer=Buffer.from(this.peerId,"hex"),this._peerIdBinary=this._peerIdBuffer.toString("binary"),this.infoHash="string"==typeof l.infoHash?l.infoHash.toLowerCase():l.infoHash.toString("hex"),this._infoHashBuffer=Buffer.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary"),v("new client %s",this.infoHash),this.destroyed=!1,this._port=l.port,this._getAnnounceOpts=l.getAnnounceOpts,this._rtcConfig=l.rtcConfig,this._userAgent=l.userAgent,this._proxyOpts=l.proxyOpts,this._wrtc="function"==typeof l.wrtc?l.wrtc():l.wrtc;let e="string"==typeof l.announce?[l.announce]:null==l.announce?[]:l.announce;e=e.map(r=>("/"===(r=r.toString())[r.length-1]&&(r=r.substring(0,r.length-1)),r)),e=Array.from(new Set(e));const f=!1!==this._wrtc&&(!!this._wrtc||y.WEBRTC_SUPPORT),o=r=>{s(()=>{this.emit("warning",r)})};this._trackers=e.map(r=>{let n;try{n=p.parseUrl(r)}catch(E){return o(new Error(`Invalid tracker URL: ${r}`)),null}const a=n.port;if(a<0||a>65535)return o(new Error(`Invalid tracker port: ${r}`)),null;const u=n.protocol;return"http:"!==u&&"https:"!==u||"function"!=typeof w?"udp:"===u&&"function"==typeof L?new L(this,r):"ws:"!==u&&"wss:"!==u||!f||"ws:"===u&&"undefined"!=typeof window&&"https:"===window.location.protocol?(o(new Error(`Unsupported tracker protocol: ${r}`)),null):new b(this,r):new w(this,r)}).filter(Boolean)}start(l){(l=this._defaultAnnounceOpts(l)).event="started",v("send `start` %o",l),this._announce(l),this._trackers.forEach(e=>{e.setInterval()})}stop(l){(l=this._defaultAnnounceOpts(l)).event="stopped",v("send `stop` %o",l),this._announce(l)}complete(l){l||(l={}),(l=this._defaultAnnounceOpts(l)).event="completed",v("send `complete` %o",l),this._announce(l)}update(l){(l=this._defaultAnnounceOpts(l)).event&&delete l.event,v("send `update` %o",l),this._announce(l)}_announce(l){this._trackers.forEach(e=>{e.announce(l)})}scrape(l){v("send `scrape`"),l||(l={}),this._trackers.forEach(e=>{e.scrape(l)})}setInterval(l){v("setInterval %d",l),this._trackers.forEach(e=>{e.setInterval(l)})}destroy(l){if(this.destroyed)return;this.destroyed=!0,v("destroy");const e=this._trackers.map(f=>o=>{f.destroy(o)});m(e,l),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(l={}){return null==l.numwant&&(l.numwant=p.DEFAULT_ANNOUNCE_PEERS),null==l.uploaded&&(l.uploaded=0),null==l.downloaded&&(l.downloaded=0),this._getAnnounceOpts&&(l=Object.assign({},l,this._getAnnounceOpts())),l}}return O.scrape=(h,l)=>{if(l=T(l),!h.infoHash)throw new Error("Option `infoHash` is required");if(!h.announce)throw new Error("Option `announce` is required");const e=Object.assign({},h,{infoHash:Array.isArray(h.infoHash)?h.infoHash[0]:h.infoHash,peerId:Buffer.from("01234567890123456789"),port:6881}),f=new O(e);f.once("error",l),f.once("warning",l);let o=Array.isArray(h.infoHash)?h.infoHash.length:1;const r={};return f.on("scrape",n=>{if(o-=1,r[n.infoHash]=n,0===o){f.destroy();const a=Object.keys(r);l(null,1===a.length?r[a[0]]:r)}}),h.infoHash=Array.isArray(h.infoHash)?h.infoHash.map(n=>Buffer.from(n,"hex")):Buffer.from(h.infoHash,"hex"),f.scrape({infoHash:h.infoHash}),f},O})()},34339:(N,k,c)=>{const v=c(43674);N.exports=class extends v{constructor(m,y){super(),this.client=m,this.announceUrl=y,this.interval=null,this.destroyed=!1}setInterval(m){null==m&&(m=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),m&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},m),this.interval.unref&&this.interval.unref())}}},13836:(N,k,c)=>{const v=c(61491),R=c(57115)("bittorrent-tracker:websocket-tracker"),T=c(71893),m=c(75650),y=c(36052),s=c(49354),p=c(86556),w=c(34339),L={};class l extends w{constructor(o,r){super(o,r),R("new websocket tracker %s",r),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(o){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(o)});const r=Object.assign({},o,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(r.trackerid=this._trackerId),"stopped"===o.event||"completed"===o.event)this._send(r);else{const n=Math.min(o.numwant,5);this._generateOffers(n,a=>{r.numwant=n,r.offers=a,this._send(r)})}}scrape(o){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(o)});const r=Array.isArray(o.infoHash)&&o.infoHash.length>0?o.infoHash.map(a=>a.toString("binary")):o.infoHash&&o.infoHash.toString("binary")||this.client._infoHashBinary;this._send({action:"scrape",info_hash:r})}destroy(o=e){if(this.destroyed)return o(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const u in this.peers){const E=this.peers[u];clearTimeout(E.trackerTimeout),E.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,L[this.announceUrl]&&(L[this.announceUrl].consumers-=1),L[this.announceUrl].consumers>0)return o();let n,r=L[this.announceUrl];if(delete L[this.announceUrl],r.on("error",e),r.once("close",o),!this.expectingResponse)return a();function a(){n&&(clearTimeout(n),n=null),r.removeListener("data",a),r.destroy(),r=null}n=setTimeout(a,p.DESTROY_TIMEOUT),r.once("data",a)}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=o=>{this._onSocketError(o)},this._onSocketDataBound=o=>{this._onSocketData(o)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=L[this.announceUrl],this.socket)L[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{const o=new URL(this.announceUrl);let r;this.client._proxyOpts&&(r="wss:"===o.protocol?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!r&&this.client._proxyOpts.socksProxy&&(r=new s.Agent(v(this.client._proxyOpts.socksProxy),"wss:"===o.protocol))),this.socket=L[this.announceUrl]=new y({url:this.announceUrl,agent:r}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(o){if(!this.destroyed){this.expectingResponse=!1;try{o=JSON.parse(o)}catch(r){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===o.action?this._onAnnounceResponse(o):"scrape"===o.action?this._onScrapeResponse(o):this._onSocketError(new Error(`invalid action in WS response: ${o.action}`))}}_onAnnounceResponse(o){if(o.info_hash!==this.client._infoHashBinary)return void R("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,p.binaryToHex(o.info_hash),this.client.infoHash);if(o.peer_id&&o.peer_id===this.client._peerIdBinary)return;R("received %s from %s for %s",JSON.stringify(o),this.announceUrl,this.client.infoHash);const r=o["failure reason"];if(r)return this.client.emit("warning",new Error(r));const n=o["warning message"];n&&this.client.emit("warning",new Error(n));const a=o.interval||o["min interval"];a&&this.setInterval(1e3*a);const u=o["tracker id"];if(u&&(this._trackerId=u),null!=o.complete){const S=Object.assign({},o,{announce:this.announceUrl,infoHash:p.binaryToHex(o.info_hash)});this.client.emit("update",S)}let E;if(o.offer&&o.peer_id&&(R("creating peer (from remote offer)"),E=this._createPeer(),E.id=p.binaryToHex(o.peer_id),E.once("signal",S=>{const M={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:o.peer_id,answer:S,offer_id:o.offer_id};this._trackerId&&(M.trackerid=this._trackerId),this._send(M)}),this.client.emit("peer",E),E.signal(o.offer)),o.answer&&o.peer_id){const S=p.binaryToHex(o.offer_id);E=this.peers[S],E?(E.id=p.binaryToHex(o.peer_id),this.client.emit("peer",E),E.signal(o.answer),clearTimeout(E.trackerTimeout),E.trackerTimeout=null,delete this.peers[S]):R(`got unexpected answer: ${JSON.stringify(o.answer)}`)}}_onScrapeResponse(o){o=o.files||{};const r=Object.keys(o);0!==r.length?r.forEach(n=>{const a=Object.assign(o[n],{announce:this.announceUrl,infoHash:p.binaryToHex(n)});this.client.emit("scrape",a)}):this.client.emit("warning",new Error("invalid scrape response"))}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(o){this.destroyed||(this.destroy(),this.client.emit("warning",o),this._startReconnectTimer())}_startReconnectTimer(){const o=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},o),this.reconnectTimer.unref&&this.reconnectTimer.unref(),R("reconnecting socket in %s ms",o)}_send(o){if(this.destroyed)return;this.expectingResponse=!0;const r=JSON.stringify(o);R("send %s",r),this.socket.send(r)}_generateOffers(o,r){const n=this,a=[];R("generating %s offers",o);for(let S=0;S<o;++S)u();function u(){const S=m(20).toString("hex");R("creating peer (from _generateOffers)");const M=n.peers[S]=n._createPeer({initiator:!0});M.once("signal",x=>{a.push({offer:x,offer_id:p.hexToBinary(S)}),E()}),M.trackerTimeout=setTimeout(()=>{R("tracker timeout: destroying peer"),M.trackerTimeout=null,delete n.peers[S],M.destroy()},5e4),M.trackerTimeout.unref&&M.trackerTimeout.unref()}function E(){a.length===o&&(R("generated %s offers",o),r(a))}E()}_createPeer(o){const r=this;o=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},o);const n=new T(o);return n.once("error",a),n.once("connect",function u(){n.removeListener("error",a),n.removeListener("connect",u)}),n;function a(E){r.client.emit("warning",new Error(`Connection error: ${E.message}`)),n.destroy()}}}function e(){}l.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,l._socketPool=L,N.exports=l},86556:(N,k,c)=>{k.DEFAULT_ANNOUNCE_PEERS=50,k.MAX_ANNOUNCE_PEERS=82,k.binaryToHex=R=>("string"!=typeof R&&(R=String(R)),Buffer.from(R,"binary").toString("hex")),k.hexToBinary=R=>("string"!=typeof R&&(R=String(R)),Buffer.from(R,"hex").toString("binary")),k.parseUrl=R=>{const T=new URL(R.replace(/^udp:/,"http:"));return R.match(/^udp:/)&&Object.defineProperties(T,{href:{value:T.href.replace(/^http/,"udp")},protocol:{value:T.protocol.replace(/^http/,"udp")},origin:{value:T.origin.replace(/^http/,"udp")}}),T};const v=c(53762);Object.assign(k,v)},61491:N=>{var k=function(){"use strict";function c(s,p,w,L){"object"==typeof p&&(w=p.depth,L=p.prototype,p=p.circular);var _=[],O=[],h="undefined"!=typeof Buffer;return void 0===p&&(p=!0),void 0===w&&(w=1/0),function l(e,f){if(null===e)return null;if(0==f)return e;var o,r;if("object"!=typeof e)return e;if(c.__isArray(e))o=[];else if(c.__isRegExp(e))o=new RegExp(e.source,y(e)),e.lastIndex&&(o.lastIndex=e.lastIndex);else if(c.__isDate(e))o=new Date(e.getTime());else{if(h&&Buffer.isBuffer(e))return o=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length),e.copy(o),o;void 0===L?(r=Object.getPrototypeOf(e),o=Object.create(r)):(o=Object.create(L),r=L)}if(p){var n=_.indexOf(e);if(-1!=n)return O[n];_.push(e),O.push(o)}for(var a in e){var u;r&&(u=Object.getOwnPropertyDescriptor(r,a)),(!u||null!=u.set)&&(o[a]=l(e[a],f-1))}return o}(s,w)}function v(s){return Object.prototype.toString.call(s)}function y(s){var p="";return s.global&&(p+="g"),s.ignoreCase&&(p+="i"),s.multiline&&(p+="m"),p}return c.clonePrototype=function(p){if(null===p)return null;var w=function(){};return w.prototype=p,new w},c.__objToStr=v,c.__isDate=function(s){return"object"==typeof s&&"[object Date]"===v(s)},c.__isArray=function(s){return"object"==typeof s&&"[object Array]"===v(s)},c.__isRegExp=function(s){return"object"==typeof s&&"[object RegExp]"===v(s)},c.__getRegExpFlags=y,c}();N.exports&&(N.exports=k)},5275:N=>{"use strict";function k(v,R){for(const T in R)Object.defineProperty(v,T,{value:R[T],enumerable:!0,configurable:!0});return v}N.exports=function(v,R,T){if(!v||"string"==typeof v)throw new TypeError("Please pass an Error to err-code");T||(T={}),"object"==typeof R&&(T=R,R=""),R&&(T.code=R);try{return k(v,T)}catch(m){T.message=v.message,T.stack=v.stack;const y=function(){};return y.prototype=Object.create(Object.getPrototypeOf(v)),k(new y,T)}}},43674:N=>{"use strict";var v,k="object"==typeof Reflect?Reflect:null,c=k&&"function"==typeof k.apply?k.apply:function(a,u,E){return Function.prototype.apply.call(a,u,E)};v=k&&"function"==typeof k.ownKeys?k.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};var T=Number.isNaN||function(a){return a!=a};function m(){m.init.call(this)}N.exports=m,N.exports.once=function(n,a){return new Promise(function(u,E){function S(x){n.removeListener(a,M),E(x)}function M(){"function"==typeof n.removeListener&&n.removeListener("error",S),u([].slice.call(arguments))}r(n,a,M,{once:!0}),"error"!==a&&function(n,a,u){"function"==typeof n.on&&r(n,"error",a,{once:!0})}(n,S)})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var y=10;function s(n){if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function p(n){return void 0===n._maxListeners?m.defaultMaxListeners:n._maxListeners}function w(n,a,u,E){var S,M,x;if(s(u),void 0===(M=n._events)?(M=n._events=Object.create(null),n._eventsCount=0):(void 0!==M.newListener&&(n.emit("newListener",a,u.listener?u.listener:u),M=n._events),x=M[a]),void 0===x)x=M[a]=u,++n._eventsCount;else if("function"==typeof x?x=M[a]=E?[u,x]:[x,u]:E?x.unshift(u):x.push(u),(S=p(n))>0&&x.length>S&&!x.warned){x.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=n,B.type=a,B.count=x.length,function(n){console&&console.warn&&console.warn(n)}(B)}return n}function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(n,a,u){var E={fired:!1,wrapFn:void 0,target:n,type:a,listener:u},S=L.bind(E);return S.listener=u,E.wrapFn=S,S}function _(n,a,u){var E=n._events;if(void 0===E)return[];var S=E[a];return void 0===S?[]:"function"==typeof S?u?[S.listener||S]:[S]:u?function(n){for(var a=new Array(n.length),u=0;u<a.length;++u)a[u]=n[u].listener||n[u];return a}(S):h(S,S.length)}function O(n){var a=this._events;if(void 0!==a){var u=a[n];if("function"==typeof u)return 1;if(void 0!==u)return u.length}return 0}function h(n,a){for(var u=new Array(a),E=0;E<a;++E)u[E]=n[E];return u}function r(n,a,u,E){if("function"==typeof n.on)E.once?n.once(a,u):n.on(a,u);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(a,function S(M){E.once&&n.removeEventListener(a,S),u(M)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(n){if("number"!=typeof n||n<0||T(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");y=n}}),m.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(a){if("number"!=typeof a||a<0||T(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},m.prototype.getMaxListeners=function(){return p(this)},m.prototype.emit=function(a){for(var u=[],E=1;E<arguments.length;E++)u.push(arguments[E]);var S="error"===a,M=this._events;if(void 0!==M)S=S&&void 0===M.error;else if(!S)return!1;if(S){var x;if(u.length>0&&(x=u[0]),x instanceof Error)throw x;var B=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw B.context=x,B}var P=M[a];if(void 0===P)return!1;if("function"==typeof P)c(P,this,u);else{var W=P.length,q=h(P,W);for(E=0;E<W;++E)c(q[E],this,u)}return!0},m.prototype.on=m.prototype.addListener=function(a,u){return w(this,a,u,!1)},m.prototype.prependListener=function(a,u){return w(this,a,u,!0)},m.prototype.once=function(a,u){return s(u),this.on(a,b(this,a,u)),this},m.prototype.prependOnceListener=function(a,u){return s(u),this.prependListener(a,b(this,a,u)),this},m.prototype.off=m.prototype.removeListener=function(a,u){var E,S,M,x,B;if(s(u),void 0===(S=this._events))return this;if(void 0===(E=S[a]))return this;if(E===u||E.listener===u)0==--this._eventsCount?this._events=Object.create(null):(delete S[a],S.removeListener&&this.emit("removeListener",a,E.listener||u));else if("function"!=typeof E){for(M=-1,x=E.length-1;x>=0;x--)if(E[x]===u||E[x].listener===u){B=E[x].listener,M=x;break}if(M<0)return this;0===M?E.shift():function(n,a){for(;a+1<n.length;a++)n[a]=n[a+1];n.pop()}(E,M),1===E.length&&(S[a]=E[0]),void 0!==S.removeListener&&this.emit("removeListener",a,B||u)}return this},m.prototype.removeAllListeners=function(a){var u,E,S;if(void 0===(E=this._events))return this;if(void 0===E.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==E[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete E[a]),this;if(0===arguments.length){var x,M=Object.keys(E);for(S=0;S<M.length;++S)"removeListener"!==(x=M[S])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(u=E[a]))this.removeListener(a,u);else if(void 0!==u)for(S=u.length-1;S>=0;S--)this.removeListener(a,u[S]);return this},m.prototype.listeners=function(a){return _(this,a,!0)},m.prototype.rawListeners=function(a){return _(this,a,!1)},m.listenerCount=function(n,a){return"function"==typeof n.listenerCount?n.listenerCount(a):O.call(n,a)},m.prototype.listenerCount=O,m.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},12318:N=>{N.exports=function(){if("undefined"==typeof globalThis)return null;var c={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return c.RTCPeerConnection?c:null}},55211:(N,k,c)=>{var v=c(88959);function R(m){var y=function(){return y.called?y.value:(y.called=!0,y.value=m.apply(this,arguments))};return y.called=!1,y}function T(m){var y=function(){if(y.called)throw new Error(y.onceError);return y.called=!0,y.value=m.apply(this,arguments)};return y.onceError=(m.name||"Function wrapped with `once`")+" shouldn't be called more than once",y.called=!1,y}N.exports=v(R),N.exports.strict=v(T),R.proto=R(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return R(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return T(this)},configurable:!0})})},41965:N=>{let k;N.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):c=>(k||(k=Promise.resolve())).then(c).catch(v=>setTimeout(()=>{throw v},0))},75650:(N,k,c)=>{"use strict";var v=65536,m=c(39228).Buffer,y=global.crypto||global.msCrypto;N.exports=y&&y.getRandomValues?function(p,w){if(p>4294967295)throw new RangeError("requested too many random bytes");var L=m.allocUnsafe(p);if(p>0)if(p>v)for(var b=0;b<p;b+=v)y.getRandomValues(L.slice(b,b+v));else y.getRandomValues(L);return"function"==typeof w?process.nextTick(function(){w(null,L)}):L}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},85400:N=>{"use strict";var c={};function v(s,p,w){w||(w=Error);var b=function(_){function O(h,l,e){return _.call(this,function(_,O,h){return"string"==typeof p?p:p(_,O,h)}(h,l,e))||this}return function(s,p){s.prototype=Object.create(p.prototype),s.prototype.constructor=s,s.__proto__=p}(O,_),O}(w);b.prototype.name=w.name,b.prototype.code=s,c[s]=b}function R(s,p){if(Array.isArray(s)){var w=s.length;return s=s.map(function(L){return String(L)}),w>2?"one of ".concat(p," ").concat(s.slice(0,w-1).join(", "),", or ")+s[w-1]:2===w?"one of ".concat(p," ").concat(s[0]," or ").concat(s[1]):"of ".concat(p," ").concat(s[0])}return"of ".concat(p," ").concat(String(s))}v("ERR_INVALID_OPT_VALUE",function(s,p){return'The value "'+p+'" is invalid for option "'+s+'"'},TypeError),v("ERR_INVALID_ARG_TYPE",function(s,p,w){var L,b;if("string"==typeof p&&function(s,p,w){return s.substr(0,p.length)===p}(p,"not ")?(L="must not be",p=p.replace(/^not /,"")):L="must be",function(s,p,w){return(void 0===w||w>s.length)&&(w=s.length),s.substring(w-p.length,w)===p}(s," argument"))b="The ".concat(s," ").concat(L," ").concat(R(p,"type"));else{var _=function(s,p,w){return"number"!=typeof w&&(w=0),!(w+".".length>s.length)&&-1!==s.indexOf(".",w)}(s)?"property":"argument";b='The "'.concat(s,'" ').concat(_," ").concat(L," ").concat(R(p,"type"))}return b+". Received type ".concat(typeof w)},TypeError),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),v("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),v("ERR_STREAM_PREMATURE_CLOSE","Premature close"),v("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),v("ERR_STREAM_WRITE_AFTER_END","write after end"),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),N.exports.q=c},34968:(N,k,c)=>{"use strict";var v=Object.keys||function(b){var _=[];for(var O in b)_.push(O);return _};N.exports=p;var R=c(95760),T=c(32023);c(18134)(p,R);for(var m=v(T.prototype),y=0;y<m.length;y++){var s=m[y];p.prototype[s]||(p.prototype[s]=T.prototype[s])}function p(b){if(!(this instanceof p))return new p(b);R.call(this,b),T.call(this,b),this.allowHalfOpen=!0,b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",w)))}function w(){this._writableState.ended||process.nextTick(L,this)}function L(b){b.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},32032:(N,k,c)=>{"use strict";N.exports=R;var v=c(23514);function R(T){if(!(this instanceof R))return new R(T);v.call(this,T)}c(18134)(R,v),R.prototype._transform=function(T,m,y){y(null,T)}},95760:(N,k,c)=>{"use strict";var v;N.exports=P,P.ReadableState=B,c(43674);var b,T=function(i,C){return i.listeners(C).length},m=c(21286),y=c(16853).Buffer,s=global.Uint8Array||function(){},L=c(94616);b=L&&L.debuglog?L.debuglog("stream"):function(){};var a,u,E,_=c(27363),O=c(59131),l=c(60057).getHighWaterMark,e=c(85400).q,f=e.ERR_INVALID_ARG_TYPE,o=e.ERR_STREAM_PUSH_AFTER_EOF,r=e.ERR_METHOD_NOT_IMPLEMENTED,n=e.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;c(18134)(P,m);var S=O.errorOrDestroy,M=["error","close","destroy","pause","resume"];function B(t,i,C){v=v||c(34968),"boolean"!=typeof C&&(C=i instanceof v),this.objectMode=!!(t=t||{}).objectMode,C&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=l(this,t,"readableHighWaterMark",C),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=c(24509).s),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function P(t){if(v=v||c(34968),!(this instanceof P))return new P(t);this._readableState=new B(t,this,this instanceof v),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),m.call(this)}function W(t,i,C,I,F){b("readableAddChunk",i);var U,j=t._readableState;if(null===i)j.reading=!1,function(t,i){if(b("onEofChunk"),!i.ended){if(i.decoder){var C=i.decoder.end();C&&C.length&&(i.buffer.push(C),i.length+=i.objectMode?1:C.length)}i.ended=!0,i.sync?V(t):(i.needReadable=!1,i.emittedReadable||(i.emittedReadable=!0,Z(t)))}}(t,j);else if(F||(U=function(t,i){var C;return!function(t){return y.isBuffer(t)||t instanceof s}(i)&&"string"!=typeof i&&void 0!==i&&!t.objectMode&&(C=new f("chunk",["string","Buffer","Uint8Array"],i)),C}(j,i)),U)S(t,U);else if(j.objectMode||i&&i.length>0)if("string"!=typeof i&&!j.objectMode&&Object.getPrototypeOf(i)!==y.prototype&&(i=function(t){return y.from(t)}(i)),I)j.endEmitted?S(t,new n):q(t,j,i,!0);else if(j.ended)S(t,new o);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!C?(i=j.decoder.write(i),j.objectMode||0!==i.length?q(t,j,i,!1):K(t,j)):q(t,j,i,!1)}else I||(j.reading=!1,K(t,j));return!j.ended&&(j.length<j.highWaterMark||0===j.length)}function q(t,i,C,I){i.flowing&&0===i.length&&!i.sync?(i.awaitDrain=0,t.emit("data",C)):(i.length+=i.objectMode?1:C.length,I?i.buffer.unshift(C):i.buffer.push(C),i.needReadable&&V(t)),K(t,i)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(i){!this._readableState||(this._readableState.destroyed=i)}}),P.prototype.destroy=O.destroy,P.prototype._undestroy=O.undestroy,P.prototype._destroy=function(t,i){i(t)},P.prototype.push=function(t,i){var I,C=this._readableState;return C.objectMode?I=!0:"string"==typeof t&&((i=i||C.defaultEncoding)!==C.encoding&&(t=y.from(t,i),i=""),I=!0),W(this,t,i,!1,I)},P.prototype.unshift=function(t){return W(this,t,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(t){a||(a=c(24509).s);var i=new a(t);this._readableState.decoder=i,this._readableState.encoding=this._readableState.decoder.encoding;for(var C=this._readableState.buffer.head,I="";null!==C;)I+=i.write(C.data),C=C.next;return this._readableState.buffer.clear(),""!==I&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var G=1073741824;function Q(t,i){return t<=0||0===i.length&&i.ended?0:i.objectMode?1:t!=t?i.flowing&&i.length?i.buffer.head.data.length:i.length:(t>i.highWaterMark&&(i.highWaterMark=function(t){return t>=G?t=G:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=i.length?t:i.ended?i.length:(i.needReadable=!0,0))}function V(t){var i=t._readableState;b("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(b("emitReadable",i.flowing),i.emittedReadable=!0,process.nextTick(Z,t))}function Z(t){var i=t._readableState;b("emitReadable_",i.destroyed,i.length,i.ended),!i.destroyed&&(i.length||i.ended)&&(t.emit("readable"),i.emittedReadable=!1),i.needReadable=!i.flowing&&!i.ended&&i.length<=i.highWaterMark,g(t)}function K(t,i){i.readingMore||(i.readingMore=!0,process.nextTick(ee,t,i))}function ee(t,i){for(;!i.reading&&!i.ended&&(i.length<i.highWaterMark||i.flowing&&0===i.length);){var C=i.length;if(b("maybeReadMore read 0"),t.read(0),C===i.length)break}i.readingMore=!1}function te(t){var i=t._readableState;i.readableListening=t.listenerCount("readable")>0,i.resumeScheduled&&!i.paused?i.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Y(t){b("readable nexttick read 0"),t.read(0)}function le(t,i){b("resume",i.reading),i.reading||t.read(0),i.resumeScheduled=!1,t.emit("resume"),g(t),i.flowing&&!i.reading&&t.read(0)}function g(t){var i=t._readableState;for(b("flow",i.flowing);i.flowing&&null!==t.read(););}function d(t,i){return 0===i.length?null:(i.objectMode?C=i.buffer.shift():!t||t>=i.length?(C=i.decoder?i.buffer.join(""):1===i.buffer.length?i.buffer.first():i.buffer.concat(i.length),i.buffer.clear()):C=i.buffer.consume(t,i.decoder),C);var C}function A(t){var i=t._readableState;b("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,process.nextTick(D,i,t))}function D(t,i){if(b("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,i.readable=!1,i.emit("end"),t.autoDestroy)){var C=i._writableState;(!C||C.autoDestroy&&C.finished)&&i.destroy()}}function H(t,i){for(var C=0,I=t.length;C<I;C++)if(t[C]===i)return C;return-1}P.prototype.read=function(t){b("read",t),t=parseInt(t,10);var i=this._readableState,C=t;if(0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:i.length>0)||i.ended))return b("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?A(this):V(this),null;if(0===(t=Q(t,i))&&i.ended)return 0===i.length&&A(this),null;var F,I=i.needReadable;return b("need readable",I),(0===i.length||i.length-t<i.highWaterMark)&&b("length less than watermark",I=!0),i.ended||i.reading?b("reading or ended",I=!1):I&&(b("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=Q(C,i))),null===(F=t>0?d(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),C!==t&&i.ended&&A(this)),null!==F&&this.emit("data",F),F},P.prototype._read=function(t){S(this,new r("_read()"))},P.prototype.pipe=function(t,i){var C=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=t;break;case 1:I.pipes=[I.pipes,t];break;default:I.pipes.push(t)}I.pipesCount+=1,b("pipe count=%d opts=%j",I.pipesCount,i);var j=i&&!1===i.end||t===process.stdout||t===process.stderr?z:$;function $(){b("onend"),t.end()}I.endEmitted?process.nextTick(j):C.once("end",j),t.on("unpipe",function U(X,J){b("onunpipe"),X===C&&J&&!1===J.hasUnpiped&&(J.hasUnpiped=!0,b("cleanup"),t.removeListener("close",ce),t.removeListener("finish",he),t.removeListener("drain",ne),t.removeListener("error",fe),t.removeListener("unpipe",U),C.removeListener("end",$),C.removeListener("end",z),C.removeListener("data",de),ue=!0,I.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&ne())});var ne=function(t){return function(){var C=t._readableState;b("pipeOnDrain",C.awaitDrain),C.awaitDrain&&C.awaitDrain--,0===C.awaitDrain&&T(t,"data")&&(C.flowing=!0,g(t))}}(C);t.on("drain",ne);var ue=!1;function de(X){b("ondata");var J=t.write(X);b("dest.write",J),!1===J&&((1===I.pipesCount&&I.pipes===t||I.pipesCount>1&&-1!==H(I.pipes,t))&&!ue&&(b("false write response, pause",I.awaitDrain),I.awaitDrain++),C.pause())}function fe(X){b("onerror",X),z(),t.removeListener("error",fe),0===T(t,"error")&&S(t,X)}function ce(){t.removeListener("finish",he),z()}function he(){b("onfinish"),t.removeListener("close",ce),z()}function z(){b("unpipe"),C.unpipe(t)}return C.on("data",de),function(t,i,C){if("function"==typeof t.prependListener)return t.prependListener(i,C);t._events&&t._events[i]?Array.isArray(t._events[i])?t._events[i].unshift(C):t._events[i]=[C,t._events[i]]:t.on(i,C)}(t,"error",fe),t.once("close",ce),t.once("finish",he),t.emit("pipe",C),I.flowing||(b("pipe resume"),C.resume()),t},P.prototype.unpipe=function(t){var i=this._readableState,C={hasUnpiped:!1};if(0===i.pipesCount)return this;if(1===i.pipesCount)return t&&t!==i.pipes||(t||(t=i.pipes),i.pipes=null,i.pipesCount=0,i.flowing=!1,t&&t.emit("unpipe",this,C)),this;if(!t){var I=i.pipes,F=i.pipesCount;i.pipes=null,i.pipesCount=0,i.flowing=!1;for(var j=0;j<F;j++)I[j].emit("unpipe",this,{hasUnpiped:!1});return this}var U=H(i.pipes,t);return-1===U||(i.pipes.splice(U,1),i.pipesCount-=1,1===i.pipesCount&&(i.pipes=i.pipes[0]),t.emit("unpipe",this,C)),this},P.prototype.addListener=P.prototype.on=function(t,i){var C=m.prototype.on.call(this,t,i),I=this._readableState;return"data"===t?(I.readableListening=this.listenerCount("readable")>0,!1!==I.flowing&&this.resume()):"readable"===t&&!I.endEmitted&&!I.readableListening&&(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,b("on readable",I.length,I.reading),I.length?V(this):I.reading||process.nextTick(Y,this)),C},P.prototype.removeListener=function(t,i){var C=m.prototype.removeListener.call(this,t,i);return"readable"===t&&process.nextTick(te,this),C},P.prototype.removeAllListeners=function(t){var i=m.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&process.nextTick(te,this),i},P.prototype.resume=function(){var t=this._readableState;return t.flowing||(b("resume"),t.flowing=!t.readableListening,function(t,i){i.resumeScheduled||(i.resumeScheduled=!0,process.nextTick(le,t,i))}(this,t)),t.paused=!1,this},P.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(t){var i=this,C=this._readableState,I=!1;for(var F in t.on("end",function(){if(b("wrapped end"),C.decoder&&!C.ended){var U=C.decoder.end();U&&U.length&&i.push(U)}i.push(null)}),t.on("data",function(U){b("wrapped data"),C.decoder&&(U=C.decoder.write(U)),C.objectMode&&null==U||!(C.objectMode||U&&U.length)||i.push(U)||(I=!0,t.pause())}),t)void 0===this[F]&&"function"==typeof t[F]&&(this[F]=function($){return function(){return t[$].apply(t,arguments)}}(F));for(var j=0;j<M.length;j++)t.on(M[j],this.emit.bind(this,M[j]));return this._read=function(U){b("wrapped _read",U),I&&(I=!1,t.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=c(87622)),u(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}}),P._fromList=d,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(t,i){return void 0===E&&(E=c(63730)),E(P,t,i)})},23514:(N,k,c)=>{"use strict";N.exports=w;var v=c(85400).q,R=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_MULTIPLE_CALLBACK,m=v.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=v.ERR_TRANSFORM_WITH_LENGTH_0,s=c(34968);function p(_,O){var h=this._transformState;h.transforming=!1;var l=h.writecb;if(null===l)return this.emit("error",new T);h.writechunk=null,h.writecb=null,null!=O&&this.push(O),l(_);var e=this._readableState;e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function w(_){if(!(this instanceof w))return new w(_);s.call(this,_),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&("function"==typeof _.transform&&(this._transform=_.transform),"function"==typeof _.flush&&(this._flush=_.flush)),this.on("prefinish",L)}function L(){var _=this;"function"!=typeof this._flush||this._readableState.destroyed?b(this,null,null):this._flush(function(O,h){b(_,O,h)})}function b(_,O,h){if(O)return _.emit("error",O);if(null!=h&&_.push(h),_._writableState.length)throw new y;if(_._transformState.transforming)throw new m;return _.push(null)}c(18134)(w,s),w.prototype.push=function(_,O){return this._transformState.needTransform=!1,s.prototype.push.call(this,_,O)},w.prototype._transform=function(_,O,h){h(new R("_transform()"))},w.prototype._write=function(_,O,h){var l=this._transformState;if(l.writecb=h,l.writechunk=_,l.writeencoding=O,!l.transforming){var e=this._readableState;(l.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},w.prototype._read=function(_){var O=this._transformState;null===O.writechunk||O.transforming?O.needTransform=!0:(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform))},w.prototype._destroy=function(_,O){s.prototype._destroy.call(this,_,function(h){O(h)})}},32023:(N,k,c)=>{"use strict";function R(g){var d=this;this.next=null,this.entry=null,this.finish=function(){!function(g,d,A){var D=g.entry;for(g.entry=null;D;){var H=D.callback;d.pendingcb--,H(undefined),D=D.next}d.corkedRequestsFree.next=g}(d,g)}}var T;N.exports=B,B.WritableState=M;var x,m={deprecate:c(82538)},y=c(21286),s=c(16853).Buffer,p=global.Uint8Array||function(){},b=c(59131),O=c(60057).getHighWaterMark,h=c(85400).q,l=h.ERR_INVALID_ARG_TYPE,e=h.ERR_METHOD_NOT_IMPLEMENTED,f=h.ERR_MULTIPLE_CALLBACK,o=h.ERR_STREAM_CANNOT_PIPE,r=h.ERR_STREAM_DESTROYED,n=h.ERR_STREAM_NULL_VALUES,a=h.ERR_STREAM_WRITE_AFTER_END,u=h.ERR_UNKNOWN_ENCODING,E=b.errorOrDestroy;function S(){}function M(g,d,A){T=T||c(34968),"boolean"!=typeof A&&(A=d instanceof T),this.objectMode=!!(g=g||{}).objectMode,A&&(this.objectMode=this.objectMode||!!g.writableObjectMode),this.highWaterMark=O(this,g,"writableHighWaterMark",A),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===g.decodeStrings),this.defaultEncoding=g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){!function(g,d){var A=g._writableState,D=A.sync,H=A.writecb;if("function"!=typeof H)throw new f;if(function(g){g.writing=!1,g.writecb=null,g.length-=g.writelen,g.writelen=0}(A),d)!function(g,d,A,D,H){--d.pendingcb,A?(process.nextTick(H,D),process.nextTick(Y,g,d),g._writableState.errorEmitted=!0,E(g,D)):(H(D),g._writableState.errorEmitted=!0,E(g,D),Y(g,d))}(g,A,D,d,H);else{var t=ee(A)||g.destroyed;!t&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&K(g,A),D?process.nextTick(V,g,A,t,H):V(g,A,t,H)}}(d,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==g.emitClose,this.autoDestroy=!!g.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new R(this)}function B(g){var d=this instanceof(T=T||c(34968));if(!d&&!x.call(B,this))return new B(g);this._writableState=new M(g,this,d),this.writable=!0,g&&("function"==typeof g.write&&(this._write=g.write),"function"==typeof g.writev&&(this._writev=g.writev),"function"==typeof g.destroy&&(this._destroy=g.destroy),"function"==typeof g.final&&(this._final=g.final)),y.call(this)}function G(g,d,A,D,H,t,i){d.writelen=D,d.writecb=i,d.writing=!0,d.sync=!0,d.destroyed?d.onwrite(new r("write")):A?g._writev(H,d.onwrite):g._write(H,t,d.onwrite),d.sync=!1}function V(g,d,A,D){A||function(g,d){0===d.length&&d.needDrain&&(d.needDrain=!1,g.emit("drain"))}(g,d),d.pendingcb--,D(),Y(g,d)}function K(g,d){d.bufferProcessing=!0;var A=d.bufferedRequest;if(g._writev&&A&&A.next){var H=new Array(d.bufferedRequestCount),t=d.corkedRequestsFree;t.entry=A;for(var i=0,C=!0;A;)H[i]=A,A.isBuf||(C=!1),A=A.next,i+=1;H.allBuffers=C,G(g,d,!0,d.length,H,"",t.finish),d.pendingcb++,d.lastBufferedRequest=null,t.next?(d.corkedRequestsFree=t.next,t.next=null):d.corkedRequestsFree=new R(d),d.bufferedRequestCount=0}else{for(;A;){var I=A.chunk;if(G(g,d,!1,d.objectMode?1:I.length,I,A.encoding,A.callback),A=A.next,d.bufferedRequestCount--,d.writing)break}null===A&&(d.lastBufferedRequest=null)}d.bufferedRequest=A,d.bufferProcessing=!1}function ee(g){return g.ending&&0===g.length&&null===g.bufferedRequest&&!g.finished&&!g.writing}function oe(g,d){g._final(function(A){d.pendingcb--,A&&E(g,A),d.prefinished=!0,g.emit("prefinish"),Y(g,d)})}function Y(g,d){var A=ee(d);if(A&&(function(g,d){!d.prefinished&&!d.finalCalled&&("function"!=typeof g._final||d.destroyed?(d.prefinished=!0,g.emit("prefinish")):(d.pendingcb++,d.finalCalled=!0,process.nextTick(oe,g,d)))}(g,d),0===d.pendingcb&&(d.finished=!0,g.emit("finish"),d.autoDestroy))){var D=g._readableState;(!D||D.autoDestroy&&D.endEmitted)&&g.destroy()}return A}c(18134)(B,y),M.prototype.getBuffer=function(){for(var d=this.bufferedRequest,A=[];d;)A.push(d),d=d.next;return A},function(){try{Object.defineProperty(M.prototype,"buffer",{get:m.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(g){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(d){return!!x.call(this,d)||this===B&&d&&d._writableState instanceof M}})):x=function(d){return d instanceof this},B.prototype.pipe=function(){E(this,new o)},B.prototype.write=function(g,d,A){var D=this._writableState,H=!1,t=!D.objectMode&&function(g){return s.isBuffer(g)||g instanceof p}(g);return t&&!s.isBuffer(g)&&(g=function(g){return s.from(g)}(g)),"function"==typeof d&&(A=d,d=null),t?d="buffer":d||(d=D.defaultEncoding),"function"!=typeof A&&(A=S),D.ending?function(g,d){var A=new a;E(g,A),process.nextTick(d,A)}(this,A):(t||function(g,d,A,D){var H;return null===A?H=new n:"string"!=typeof A&&!d.objectMode&&(H=new l("chunk",["string","Buffer"],A)),!H||(E(g,H),process.nextTick(D,H),!1)}(this,D,g,A))&&(D.pendingcb++,H=function(g,d,A,D,H,t){if(!A){var i=function(g,d,A){return!g.objectMode&&!1!==g.decodeStrings&&"string"==typeof d&&(d=s.from(d,A)),d}(d,D,H);D!==i&&(A=!0,H="buffer",D=i)}var C=d.objectMode?1:D.length;d.length+=C;var I=d.length<d.highWaterMark;if(I||(d.needDrain=!0),d.writing||d.corked){var F=d.lastBufferedRequest;d.lastBufferedRequest={chunk:D,encoding:H,isBuf:A,callback:t,next:null},F?F.next=d.lastBufferedRequest:d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1}else G(g,d,!1,C,D,H,t);return I}(this,D,t,g,d,A)),H},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var g=this._writableState;g.corked&&(g.corked--,!g.writing&&!g.corked&&!g.bufferProcessing&&g.bufferedRequest&&K(this,g))},B.prototype.setDefaultEncoding=function(d){if("string"==typeof d&&(d=d.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((d+"").toLowerCase())>-1))throw new u(d);return this._writableState.defaultEncoding=d,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),B.prototype._write=function(g,d,A){A(new e("_write()"))},B.prototype._writev=null,B.prototype.end=function(g,d,A){var D=this._writableState;return"function"==typeof g?(A=g,g=null,d=null):"function"==typeof d&&(A=d,d=null),null!=g&&this.write(g,d),D.corked&&(D.corked=1,this.uncork()),D.ending||function(g,d,A){d.ending=!0,Y(g,d),A&&(d.finished?process.nextTick(A):g.once("finish",A)),d.ended=!0,g.writable=!1}(this,D,A),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(d){!this._writableState||(this._writableState.destroyed=d)}}),B.prototype.destroy=b.destroy,B.prototype._undestroy=b.undestroy,B.prototype._destroy=function(g,d){d(g)}},87622:(N,k,c)=>{"use strict";var v;function R(r,n,a){return n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}var T=c(86777),m=Symbol("lastResolve"),y=Symbol("lastReject"),s=Symbol("error"),p=Symbol("ended"),w=Symbol("lastPromise"),L=Symbol("handlePromise"),b=Symbol("stream");function _(r,n){return{value:r,done:n}}function O(r){var n=r[m];if(null!==n){var a=r[b].read();null!==a&&(r[w]=null,r[m]=null,r[y]=null,n(_(a,!1)))}}function h(r){process.nextTick(O,r)}var e=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((R(v={get stream(){return this[b]},next:function(){var n=this,a=this[s];if(null!==a)return Promise.reject(a);if(this[p])return Promise.resolve(_(void 0,!0));if(this[b].destroyed)return new Promise(function(M,x){process.nextTick(function(){n[s]?x(n[s]):M(_(void 0,!0))})});var E,u=this[w];if(u)E=new Promise(function(r,n){return function(a,u){r.then(function(){n[p]?a(_(void 0,!0)):n[L](a,u)},u)}}(u,this));else{var S=this[b].read();if(null!==S)return Promise.resolve(_(S,!1));E=new Promise(this[L])}return this[w]=E,E}},Symbol.asyncIterator,function(){return this}),R(v,"return",function(){var n=this;return new Promise(function(a,u){n[b].destroy(null,function(E){E?u(E):a(_(void 0,!0))})})}),v),e);N.exports=function(n){var a,u=Object.create(f,(R(a={},b,{value:n,writable:!0}),R(a,m,{value:null,writable:!0}),R(a,y,{value:null,writable:!0}),R(a,s,{value:null,writable:!0}),R(a,p,{value:n._readableState.endEmitted,writable:!0}),R(a,L,{value:function(S,M){var x=u[b].read();x?(u[w]=null,u[m]=null,u[y]=null,S(_(x,!1))):(u[m]=S,u[y]=M)},writable:!0}),a));return u[w]=null,T(n,function(E){if(E&&"ERR_STREAM_PREMATURE_CLOSE"!==E.code){var S=u[y];return null!==S&&(u[w]=null,u[m]=null,u[y]=null,S(E)),void(u[s]=E)}var M=u[m];null!==M&&(u[w]=null,u[m]=null,u[y]=null,M(_(void 0,!0))),u[p]=!0}),n.on("readable",h.bind(null,u)),u}},27363:(N,k,c)=>{"use strict";function v(h,l){var e=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);l&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(h,o).enumerable})),e.push.apply(e,f)}return e}function T(h,l,e){return l in h?Object.defineProperty(h,l,{value:e,enumerable:!0,configurable:!0,writable:!0}):h[l]=e,h}function y(h,l){for(var e=0;e<l.length;e++){var f=l[e];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}var w=c(16853).Buffer,b=c(52361).inspect,_=b&&b.custom||"inspect";function O(h,l,e){w.prototype.copy.call(h,l,e)}N.exports=function(){function h(){(function(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}return function(h,l,e){l&&y(h.prototype,l)}(h,[{key:"push",value:function(e){var f={data:e,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(e){var f={data:e,next:this.head};0===this.length&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var f=this.head,o=""+f.data;f=f.next;)o+=e+f.data;return o}},{key:"concat",value:function(e){if(0===this.length)return w.alloc(0);for(var f=w.allocUnsafe(e>>>0),o=this.head,r=0;o;)O(o.data,f,r),r+=o.data.length,o=o.next;return f}},{key:"consume",value:function(e,f){var o;return e<this.head.data.length?(o=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):o=e===this.head.data.length?this.shift():f?this._getString(e):this._getBuffer(e),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var f=this.head,o=1,r=f.data;for(e-=r.length;f=f.next;){var n=f.data,a=e>n.length?n.length:e;if(r+=a===n.length?n:n.slice(0,e),0==(e-=a)){a===n.length?(++o,this.head=f.next?f.next:this.tail=null):(this.head=f,f.data=n.slice(a));break}++o}return this.length-=o,r}},{key:"_getBuffer",value:function(e){var f=w.allocUnsafe(e),o=this.head,r=1;for(o.data.copy(f),e-=o.data.length;o=o.next;){var n=o.data,a=e>n.length?n.length:e;if(n.copy(f,f.length-e,0,a),0==(e-=a)){a===n.length?(++r,this.head=o.next?o.next:this.tail=null):(this.head=o,o.data=n.slice(a));break}++r}return this.length-=r,f}},{key:_,value:function(e,f){return b(this,function(h){for(var l=1;l<arguments.length;l++){var e=null!=arguments[l]?arguments[l]:{};l%2?v(Object(e),!0).forEach(function(f){T(h,f,e[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach(function(f){Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(e,f))})}return h}({},f,{depth:0,customInspect:!1}))}}]),h}()},59131:N=>{"use strict";function c(y,s){T(y,s),v(y)}function v(y){y._writableState&&!y._writableState.emitClose||y._readableState&&!y._readableState.emitClose||y.emit("close")}function T(y,s){y.emit("error",s)}N.exports={destroy:function(y,s){var p=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(s?s(y):y&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(T,this,y)):process.nextTick(T,this,y)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(y||null,function(b){!s&&b?p._writableState?p._writableState.errorEmitted?process.nextTick(v,p):(p._writableState.errorEmitted=!0,process.nextTick(c,p,b)):process.nextTick(c,p,b):s?(process.nextTick(v,p),s(b)):process.nextTick(v,p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(y,s){var p=y._readableState,w=y._writableState;p&&p.autoDestroy||w&&w.autoDestroy?y.destroy(s):y.emit("error",s)}}},86777:(N,k,c)=>{"use strict";var v=c(85400).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}N.exports=function y(s,p,w){if("function"==typeof p)return y(s,null,p);p||(p={}),w=function(s){var p=!1;return function(){if(!p){p=!0;for(var w=arguments.length,L=new Array(w),b=0;b<w;b++)L[b]=arguments[b];s.apply(this,L)}}}(w||T);var L=p.readable||!1!==p.readable&&s.readable,b=p.writable||!1!==p.writable&&s.writable,_=function(){s.writable||h()},O=s._writableState&&s._writableState.finished,h=function(){b=!1,O=!0,L||w.call(s)},l=s._readableState&&s._readableState.endEmitted,e=function(){L=!1,l=!0,b||w.call(s)},f=function(a){w.call(s,a)},o=function(){var a;return L&&!l?((!s._readableState||!s._readableState.ended)&&(a=new v),w.call(s,a)):b&&!O?((!s._writableState||!s._writableState.ended)&&(a=new v),w.call(s,a)):void 0},r=function(){s.req.on("finish",h)};return function(s){return s.setHeader&&"function"==typeof s.abort}(s)?(s.on("complete",h),s.on("abort",o),s.req?r():s.on("request",r)):b&&!s._writableState&&(s.on("end",_),s.on("close",_)),s.on("end",e),s.on("finish",h),!1!==p.error&&s.on("error",f),s.on("close",o),function(){s.removeListener("complete",h),s.removeListener("abort",o),s.removeListener("request",r),s.req&&s.req.removeListener("finish",h),s.removeListener("end",_),s.removeListener("close",_),s.removeListener("finish",h),s.removeListener("end",e),s.removeListener("error",f),s.removeListener("close",o)}}},63730:N=>{N.exports=function(){throw new Error("Readable.from is not available in the browser")}},63242:(N,k,c)=>{"use strict";var v,T=c(85400).q,m=T.ERR_MISSING_ARGS,y=T.ERR_STREAM_DESTROYED;function s(h){if(h)throw h}function w(h,l,e,f){f=function(h){var l=!1;return function(){l||(l=!0,h.apply(void 0,arguments))}}(f);var o=!1;h.on("close",function(){o=!0}),void 0===v&&(v=c(86777)),v(h,{readable:l,writable:e},function(n){if(n)return f(n);o=!0,f()});var r=!1;return function(n){if(!o&&!r){if(r=!0,function(h){return h.setHeader&&"function"==typeof h.abort}(h))return h.abort();if("function"==typeof h.destroy)return h.destroy();f(n||new y("pipe"))}}}function L(h){h()}function b(h,l){return h.pipe(l)}function _(h){return h.length&&"function"==typeof h[h.length-1]?h.pop():s}N.exports=function(){for(var h=arguments.length,l=new Array(h),e=0;e<h;e++)l[e]=arguments[e];var f=_(l);if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new m("streams");var o,r=l.map(function(n,a){var u=a<l.length-1;return w(n,u,a>0,function(S){o||(o=S),S&&r.forEach(L),!u&&(r.forEach(L),f(o))})});return l.reduce(b)}},60057:(N,k,c)=>{"use strict";var v=c(85400).q.ERR_INVALID_OPT_VALUE;N.exports={getHighWaterMark:function(m,y,s,p){var w=function(m,y,s){return null!=m.highWaterMark?m.highWaterMark:y?m[s]:null}(y,p,s);if(null!=w){if(!isFinite(w)||Math.floor(w)!==w||w<0)throw new v(p?s:"highWaterMark",w);return Math.floor(w)}return m.objectMode?16:16384}}},21286:(N,k,c)=>{N.exports=c(43674).EventEmitter},73469:(N,k,c)=>{(k=N.exports=c(95760)).Stream=k,k.Readable=k,k.Writable=c(32023),k.Duplex=c(34968),k.Transform=c(23514),k.PassThrough=c(32032),k.finished=c(86777),k.pipeline=c(63242)},84032:(N,k,c)=>{N.exports=function(T,m){let y,s,p,w=!0;function L(_){function O(){m&&m(_,y),m=null}w?v(O):O()}function b(_,O,h){y[_]=h,(0==--s||O)&&L(O)}Array.isArray(T)?(y=[],s=T.length):(p=Object.keys(T),y={},s=p.length),s?p?p.forEach(function(_){T[_](function(O,h){b(_,O,h)})}):T.forEach(function(_,O){_(function(h,l){b(O,h,l)})}):L(null),w=!1};const v=c(41965)},71893:(N,k,c)=>{const v=c(57115)("simple-peer"),R=c(12318),T=c(75650),m=c(73469),y=c(41965),s=c(5275),{Buffer:p}=c(16853),w=65536;function _(l){return l.replace(/a=ice-options:trickle\s\n/g,"")}class h extends m.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=T(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||T(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||h.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},h.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(f=>f),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:R(),!this._wrtc)throw"undefined"==typeof window?s(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):s(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(f){return void this.destroy(s(f,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=f=>{this._onIceCandidate(f)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(f=>{this.destroy(s(f,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=f=>{this._setupData(f)},this.streams&&this.streams.forEach(f=>{this.addStream(f)}),this._pc.ontrack=f=>{this._onTrack(f)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(f){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(f=>{this._addIceCandidate(f)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(f=>{this.destroy(s(f,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(s(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const f=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(f).catch(o=>{!f.address||f.address.endsWith(".local")?console.warn("Ignoring unsupported ICE candidate."):this.destroy(s(o,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,f){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,f),this._needsNegotiation()}catch(o){this.destroy(s(o,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:f}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(f=>{this.addTrack(f,e)})}}addTrack(e,f){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const o=this._senderMap.get(e)||new Map;let r=o.get(f);if(r)throw r.removed?s(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):s(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,f),o.set(f,r),this._senderMap.set(e,o),this._needsNegotiation()}replaceTrack(e,f,o){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),n=r?r.get(o):null;if(!n)throw s(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");f&&this._senderMap.set(f,r),null!=n.replaceTrack?n.replaceTrack(f):this.destroy(s(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,f){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const o=this._senderMap.get(e),r=o?o.get(f):null;if(!r)throw s(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(n){"NS_ERROR_UNEXPECTED"===n.name?this._sendersAwaitingStable.push(r):this.destroy(s(n,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(f=>{this.removeTrack(f,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,y(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,f){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),y(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(o){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(o){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),f()}))}_setupData(e){if(!e.channel)return this.destroy(s(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=w),this.channelName=this._channel.label,this._channel.onmessage=o=>{this._onChannelMessage(o)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=o=>{const r=o.error instanceof Error?o.error:new Error(`Datachannel error: ${o.message} ${o.filename}:${o.lineno}:${o.colno}`);this.destroy(s(r,"ERR_DATA_CHANNEL"))};let f=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(f&&this._onChannelClose(),f=!0):f=!1},5e3)}_read(){}_write(e,f,o){if(this.destroyed)return o(s(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(s(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>w?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=o):o(null)}else this._debug("write before connect"),this._chunk=e,this._cb=o}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=_(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const f=()=>{if(this.destroyed)return;const n=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:n.type,sdp:n.sdp})};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?f():this.once("_iceComplete",f))}).catch(n=>{this.destroy(s(n,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(s(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=_(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const f=()=>{if(this.destroyed)return;const n=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:n.type,sdp:n.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?f():this.once("_iceComplete",f))}).catch(n=>{this.destroy(s(n,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(s(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(s(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,f=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,f),this.emit("iceStateChange",e,f),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(s(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(s(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const f=o=>("[object Array]"===Object.prototype.toString.call(o.values)&&o.values.forEach(r=>{Object.assign(o,r)}),o);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(o=>{const r=[];o.forEach(n=>{r.push(f(n))}),e(null,r)},o=>e(o)):this._pc.getStats.length>0?this._pc.getStats(o=>{if(this.destroyed)return;const r=[];o.result().forEach(n=>{const a={};n.names().forEach(u=>{a[u]=n.stat(u)}),a.id=n.id,a.type=n.type,a.timestamp=n.timestamp,r.push(f(a))}),e(null,r)},o=>e(o)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((f,o)=>{if(this.destroyed)return;f&&(o=[]);const r={},n={},a={};let u=!1;o.forEach(S=>{("remotecandidate"===S.type||"remote-candidate"===S.type)&&(r[S.id]=S),("localcandidate"===S.type||"local-candidate"===S.type)&&(n[S.id]=S),("candidatepair"===S.type||"candidate-pair"===S.type)&&(a[S.id]=S)});const E=S=>{u=!0;let M=n[S.localCandidateId];M&&(M.ip||M.address)?(this.localAddress=M.ip||M.address,this.localPort=Number(M.port)):M&&M.ipAddress?(this.localAddress=M.ipAddress,this.localPort=Number(M.portNumber)):"string"==typeof S.googLocalAddress&&(M=S.googLocalAddress.split(":"),this.localAddress=M[0],this.localPort=Number(M[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let x=r[S.remoteCandidateId];x&&(x.ip||x.address)?(this.remoteAddress=x.ip||x.address,this.remotePort=Number(x.port)):x&&x.ipAddress?(this.remoteAddress=x.ipAddress,this.remotePort=Number(x.portNumber)):"string"==typeof S.googRemoteAddress&&(x=S.googRemoteAddress.split(":"),this.remoteAddress=x[0],this.remotePort=Number(x[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(o.forEach(S=>{"transport"===S.type&&S.selectedCandidatePairId&&E(a[S.selectedCandidatePairId]),("googCandidatePair"===S.type&&"true"===S.googActiveConnection||("candidatepair"===S.type||"candidate-pair"===S.type)&&S.selected)&&E(S)}),u||Object.keys(a).length&&!Object.keys(n).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(M){return this.destroy(s(M,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const S=this._cb;this._cb=null,S(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>w||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let f=e.data;f instanceof ArrayBuffer&&(f=p.from(f)),this.push(f)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(f=>{this._debug("on track"),this.emit("track",e.track,f),this._remoteTracks.push({track:e.track,stream:f}),!this._remoteStreams.some(o=>o.id===f.id)&&(this._remoteStreams.push(f),y(()=>{this._debug("on stream"),this.emit("stream",f)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],v.apply(null,e)}}h.WEBRTC_SUPPORT=!!R(),h.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},h.channelConfig={},N.exports=h},36052:(N,k,c)=>{const v=c(57115)("simple-websocket"),R=c(75650),T=c(73469),m=c(41965),y=c(73719),s="function"!=typeof y?WebSocket:y;N.exports=(()=>{class L extends T.Duplex{constructor(_={}){if("string"==typeof _&&(_={url:_}),super(_=Object.assign({allowHalfOpen:!1},_)),null==_.url&&null==_.socket)throw new Error("Missing required `url` or `socket` option");if(null!=_.url&&null!=_.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=R(4).toString("hex").slice(0,7),this._debug("new websocket: %o",_),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,_.socket)this.url=_.socket.url,this._ws=_.socket,this.connected=_.socket.readyState===s.OPEN;else{this.url=_.url;try{this._ws="function"==typeof y?new s(_.url,null,ye(_e({},_),{encoding:void 0})):new s(_.url)}catch(O){return void m(()=>this.destroy(O))}}this._ws.binaryType="arraybuffer",_.socket&&this.connected?m(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=O=>this._handleMessage(O),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=O=>this._handleError(O),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(_){this._ws.send(_)}destroy(_){this._destroy(_,()=>{})}_destroy(_,O){if(!this.destroyed){if(this._debug("destroy (error: %s)",_&&(_.message||_)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){const h=this._ws,l=()=>{h.onclose=null};if(h.readyState===s.CLOSED)l();else try{h.onclose=l,h.close()}catch(e){l()}h.onopen=null,h.onmessage=null,h.onerror=()=>{}}this._ws=null,_&&this.emit("error",_),this.emit("close"),O()}}_read(){}_write(_,O,h){if(this.destroyed)return h(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(_)}catch(l){return this.destroy(l)}"function"!=typeof y&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=h):h(null)}else this._debug("write before connect"),this._chunk=_,this._cb=h}_handleOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(O){return this.destroy(O)}this._chunk=null,this._debug('sent chunk from "write before connect"');const _=this._cb;this._cb=null,_(null)}"function"!=typeof y&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(_){if(this.destroyed)return;let O=_.data;O instanceof ArrayBuffer&&(O=Buffer.from(O)),this.push(O)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(_){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;const _=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?_():this.once("connect",_)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const _=this._cb;this._cb=null,_(null)}_debug(){const _=[].slice.call(arguments);_[0]="["+this._id+"] "+_[0],v.apply(null,_)}}return L.WEBSOCKET_SUPPORT=!!s,L})()},24509:(N,k,c)=>{"use strict";var v=c(39228).Buffer,R=v.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(r){var n;switch(this.encoding=function(r){var n=function(r){if(!r)return"utf8";for(var n;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(n)return;r=(""+r).toLowerCase(),n=!0}}(r);if("string"!=typeof n&&(v.isEncoding===R||!R(r)))throw new Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=O,this.end=h,n=4;break;case"utf8":this.fillLast=L,n=4;break;case"base64":this.text=l,this.end=e,n=3;break;default:return this.write=f,void(this.end=o)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(n)}function s(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function L(r){var n=this.lastTotal-this.lastNeed,a=function(r,n,a){if(128!=(192&n[0]))return r.lastNeed=0,"\ufffd";if(r.lastNeed>1&&n.length>1){if(128!=(192&n[1]))return r.lastNeed=1,"\ufffd";if(r.lastNeed>2&&n.length>2&&128!=(192&n[2]))return r.lastNeed=2,"\ufffd"}}(this,r);return void 0!==a?a:this.lastNeed<=r.length?(r.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,n,0,r.length),void(this.lastNeed-=r.length))}function O(r,n){if((r.length-n)%2==0){var a=r.toString("utf16le",n);if(a){var u=a.charCodeAt(a.length-1);if(u>=55296&&u<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],a.slice(0,-1)}return a}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",n,r.length-1)}function h(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):n}function l(r,n){var a=(r.length-n)%3;return 0===a?r.toString("base64",n):(this.lastNeed=3-a,this.lastTotal=3,1===a?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",n,r.length-a))}function e(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function f(r){return r.toString(this.encoding)}function o(r){return r&&r.length?this.write(r):""}k.s=y,y.prototype.write=function(r){if(0===r.length)return"";var n,a;if(this.lastNeed){if(void 0===(n=this.fillLast(r)))return"";a=this.lastNeed,this.lastNeed=0}else a=0;return a<r.length?n?n+this.text(r,a):this.text(r,a):n||""},y.prototype.end=function(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+"\ufffd":n},y.prototype.text=function(r,n){var a=function(r,n,a){var u=n.length-1;if(u<a)return 0;var E=s(n[u]);return E>=0?(E>0&&(r.lastNeed=E-1),E):--u<a||-2===E?0:(E=s(n[u]))>=0?(E>0&&(r.lastNeed=E-2),E):--u<a||-2===E?0:(E=s(n[u]))>=0?(E>0&&(2===E?E=0:r.lastNeed=E-3),E):0}(this,r,n);if(!this.lastNeed)return r.toString("utf8",n);this.lastTotal=a;var u=r.length-(a-this.lastNeed);return r.copy(this.lastChar,0,u),r.toString("utf8",n,u)},y.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length}},82538:N=>{function c(v){try{if(!global.localStorage)return!1}catch(T){return!1}var R=global.localStorage[v];return null!=R&&"true"===String(R).toLowerCase()}N.exports=function(v,R){if(c("noDeprecation"))return v;var T=!1;return function(){if(!T){if(c("throwDeprecation"))throw new Error(R);c("traceDeprecation")?console.trace(R):console.warn(R),T=!0}return v.apply(this,arguments)}}},88959:N=>{N.exports=function k(c,v){if(c&&v)return k(c)(v);if("function"!=typeof c)throw new TypeError("need wrapper function");return Object.keys(c).forEach(function(T){R[T]=c[T]}),R;function R(){for(var T=new Array(arguments.length),m=0;m<T.length;m++)T[m]=arguments[m];var y=c.apply(this,T),s=T[T.length-1];return"function"==typeof y&&y!==s&&Object.keys(s).forEach(function(p){y[p]=s[p]}),y}}},49354:()=>{},53762:()=>{},88333:()=>{},70059:()=>{},52361:()=>{},94616:()=>{},73719:()=>{}}]);