"use strict";(self.webpackChunkpeertube_client=self.webpackChunkpeertube_client||[]).push([[226],{51317:(B,D,e)=>{e.d(D,{mk:()=>o,Wu:()=>b,Gz:()=>T,JK:()=>x,GK:()=>A});var t=e(93324);const o={VALIDATORS:[t.kI.required,t.kI.minLength(1),t.kI.maxLength(120)],MESSAGES:{required:"Der Anzeigename muss angegeben werden.",minlength:"Der Anzeigename muss mindestens 1 Zeichen lang sein.",maxlength:"Der Anzeigename darf nicht l\xE4nger als 120 Zeichen lang sein."}},b={VALIDATORS:[t.kI.required],MESSAGES:{required:"Annahme der Datenschutzbedingungen ist erforderlich."}},T={VALIDATORS:[t.kI.minLength(3),t.kI.maxLength(1e3)],MESSAGES:{minlength:"Die Beschreibung muss mindestens 3 Zeichen umfassen.",maxlength:"Beschreibung kann nicht l\xE4nger als 1000 Zeichen sein."}},x={VALIDATORS:[],MESSAGES:{required:"Der Kanal ist erforderlich, wenn die Abspielliste \xF6ffentlich ist."}};function A(g,M){M.toString()===1..toString()?g.setValidators([t.kI.required]):g.setValidators(null),g.markAsDirty(),g.updateValueAndValidity()}},29297:(B,D,e)=>{e.d(D,{N:()=>w});var t=e(42741),o=e(16274),b=e(49393);function T(u,h){1&u&&t.Hsn(0)}function x(u,h){}function A(u,h){1&u&&t.YNc(0,x,0,0,"ng-template")}function g(u,h){if(1&u&&(t.TgZ(0,"a",3),t.YNc(1,A,1,0,void 0,4),t.qZA()),2&u){const E=t.oxw(),O=t.MAs(1);t.Q6J("routerLink",E.internalLink)("tabindex",E.tabindex),t.uIk("title",E.title),t.xp6(1),t.Q6J("ngTemplateOutlet",O)}}function M(u,h){}function L(u,h){1&u&&t.YNc(0,M,0,0,"ng-template")}function n(u,h){if(1&u&&(t.TgZ(0,"a",5),t.YNc(1,L,1,0,void 0,4),t.qZA()),2&u){const E=t.oxw(),O=t.MAs(1);t.Q6J("href",E.href,t.LSH)("target",E.target)("tabindex",E.tabindex),t.uIk("title",E.title),t.xp6(1),t.Q6J("ngTemplateOutlet",O)}}const R=["*"];let w=(()=>{class u{}return u.\u0275fac=function(E){return new(E||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["my-link"]],inputs:{internalLink:"internalLink",href:"href",target:"target",title:"title",tabindex:"tabindex"},ngContentSelectors:R,decls:4,vars:2,consts:[["content",""],[3,"routerLink","tabindex",4,"ngIf"],[3,"href","target","tabindex",4,"ngIf"],[3,"routerLink","tabindex"],[4,"ngTemplateOutlet"],[3,"href","target","tabindex"]],template:function(E,O){1&E&&(t.F$t(),t.YNc(0,T,1,0,"ng-template",null,0,t.W1O),t.YNc(2,g,2,4,"a",1),t.YNc(3,n,2,5,"a",2)),2&E&&(t.xp6(2),t.Q6J("ngIf",!O.href),t.xp6(1),t.Q6J("ngIf",O.href))},directives:[o.O5,b.yS,o.tP],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit;position:inherit;width:inherit;height:inherit}"]}),u})()},60006:(B,D,e)=>{e.d(D,{x:()=>x}),e(40062);var o=e(97694),b=e(13010),T=e(42741);let x=(()=>{class A{}return A.\u0275fac=function(M){return new(M||A)},A.\u0275mod=T.oAB({type:A}),A.\u0275inj=T.cJS({providers:[],imports:[[b.n,o.Y]]}),A})()},40062:(B,D,e)=>{e.d(D,{W:()=>m});var t=e(42741),o=e(62026),b=e(54755),T=e(16274),x=e(49393),A=e(76476),g=e(19895);function M(l,r){1&l&&t.GkF(0)}function L(l,r){if(1&l&&(t.TgZ(0,"a",3),t.YNc(1,M,1,0,"ng-container",4),t.qZA()),2&l){const s=t.oxw(),i=t.MAs(3);t.Q6J("routerLink",s.getVideoRouterLink())("queryParams",s.queryParams),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function n(l,r){1&l&&t.GkF(0)}function R(l,r){if(1&l&&(t.TgZ(0,"a",5),t.YNc(1,n,1,0,"ng-container",4),t.qZA()),2&l){const s=t.oxw(),i=t.MAs(3);t.Q6J("href",s.videoHref,t.LSH)("target",s.videoTarget),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function w(l,r){if(1&l){const s=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.NdJ("click",function(_){return t.CHM(s),t.oxw(3).onWatchLaterClick(_)}),t._UZ(2,"my-global-icon",18),t.qZA(),t.BQk()}if(2&l){const s=t.oxw(3);t.xp6(1),t.Q6J("ngbTooltip",s.addToWatchLaterText),t.xp6(1),t.uIk("aria-label",s.addToWatchLaterText)}}function u(l,r){if(1&l){const s=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.NdJ("click",function(_){return t.CHM(s),t.oxw(3).onWatchLaterClick(_)}),t._UZ(2,"my-global-icon",19),t.qZA(),t.BQk()}if(2&l){const s=t.oxw(3);t.xp6(1),t.Q6J("ngbTooltip",s.addedToWatchLaterText),t.xp6(1),t.uIk("aria-label",s.addedToWatchLaterText)}}function h(l,r){if(1&l&&(t.TgZ(0,"div",15),t.YNc(1,w,3,2,"ng-container",16),t.YNc(2,u,3,2,"ng-container",16),t.qZA()),2&l){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!0!==s.inWatchLaterPlaylist),t.xp6(1),t.Q6J("ngIf",!0===s.inWatchLaterPlaylist)}}function E(l,r){if(1&l&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&l){const s=t.oxw(2);t.xp6(1),t.Oqu(s.video.durationLabel)}}function O(l,r){1&l&&(t.ynx(0),t.SDv(1,22),t.BQk())}function k(l,r){1&l&&(t.ynx(0),t.SDv(1,23),t.BQk())}const H=function(l){return{"live-ended":l}};function U(l,r){if(1&l&&(t.TgZ(0,"div",21),t.YNc(1,O,2,0,"ng-container",16),t.YNc(2,k,2,0,"ng-container",16),t.qZA()),2&l){const s=t.oxw(2);t.Q6J("ngClass",t.VKq(3,H,s.isLiveEnded())),t.xp6(1),t.Q6J("ngIf",!s.isLiveEnded()),t.xp6(1),t.Q6J("ngIf",s.isLiveEnded())}}const Y=function(l){return{"width.%":l}};function Z(l,r){if(1&l&&(t.TgZ(0,"div",24),t._UZ(1,"div",25),t.qZA()),2&l){const s=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(1,Y,s.getProgressPercent()))}}const S=function(l){return{"blur-filter":l}};function W(l,r){if(1&l&&(t._UZ(0,"img",6),t.YNc(1,h,3,2,"div",7),t.TgZ(2,"div",8),t.Hsn(3),t.qZA(),t.TgZ(4,"div",9),t.Hsn(5,1),t.qZA(),t.YNc(6,E,2,1,"div",10),t.YNc(7,U,3,5,"div",11),t.TgZ(8,"div",12),t._UZ(9,"div",13),t.qZA(),t.YNc(10,Z,2,3,"div",14)),2&l){const s=t.oxw();t.Q6J("ngClass",t.VKq(7,S,s.nsfw)),t.uIk("aria-label",s.video.name)("src",s.getImageUrl(),t.LSH),t.xp6(1),t.Q6J("ngIf",s.displayWatchLaterPlaylist),t.xp6(5),t.Q6J("ngIf",!s.video.isLive),t.xp6(1),t.Q6J("ngIf",s.video.isLive),t.xp6(3),t.Q6J("ngIf",null==s.video.userHistory?null:s.video.userHistory.currentTime)}}const p=[[["label-warning"]],[["label-danger"]]],P=["label-warning","label-danger"];let m=(()=>{class l{constructor(s){this.screenService=s,this.nsfw=!1,this.watchLaterClick=new t.vpe,this.addToWatchLaterText="Zu \"Sp\xE4ter ansehen\" hinzuf\xFCgen",this.addedToWatchLaterText="Von \"Sp\xE4ter ansehen\" entfernen"}isLiveEnded(){if(this.video.state)return 5===this.video.state.id}getImageUrl(){return this.video?this.screenService.isInMobileView()?this.video.previewUrl:this.video.thumbnailUrl:""}getProgressPercent(){return this.video.userHistory?this.video.userHistory.currentTime/this.video.duration*100:0}getVideoRouterLink(){return this.videoRouterLink?this.videoRouterLink:o.nk.buildWatchUrl(this.video)}onWatchLaterClick(s){return this.watchLaterClick.emit(this.inWatchLaterPlaylist),s.stopPropagation(),!1}}return l.\u0275fac=function(s){return new(s||l)(t.Y36(b.H2))},l.\u0275cmp=t.Xpm({type:l,selectors:[["my-video-thumbnail"]],inputs:{video:"video",nsfw:"nsfw",videoRouterLink:"videoRouterLink",queryParams:"queryParams",videoHref:"videoHref",videoTarget:"videoTarget",displayWatchLaterPlaylist:"displayWatchLaterPlaylist",inWatchLaterPlaylist:"inWatchLaterPlaylist"},outputs:{watchLaterClick:"watchLaterClick"},ngContentSelectors:P,decls:4,vars:2,consts:function(){let r,s;return r="LIVE",s="Live-\xDCbertragung beendet",[["class","video-thumbnail",3,"routerLink","queryParams",4,"ngIf"],["class","video-thumbnail",3,"href","target",4,"ngIf"],["aContent",""],[1,"video-thumbnail",3,"routerLink","queryParams"],[4,"ngTemplateOutlet"],[1,"video-thumbnail",3,"href","target"],["alt","",3,"ngClass"],["class","video-thumbnail-actions-overlay",4,"ngIf"],[1,"video-thumbnail-label-overlay","warning"],[1,"video-thumbnail-label-overlay","danger"],["class","video-thumbnail-duration-overlay",4,"ngIf"],["class","video-thumbnail-live-overlay",3,"ngClass",4,"ngIf"],[1,"play-overlay"],[1,"icon"],["class","progress-bar",4,"ngIf"],[1,"video-thumbnail-actions-overlay"],[4,"ngIf"],["placement","left","container","body",1,"video-thumbnail-watch-later-overlay",3,"ngbTooltip","click"],["iconName","clock","role","button"],["iconName","tick","role","button"],[1,"video-thumbnail-duration-overlay"],[1,"video-thumbnail-live-overlay",3,"ngClass"],r,s,[1,"progress-bar"],[3,"ngStyle"]]},template:function(s,i){1&s&&(t.F$t(p),t.YNc(0,L,2,3,"a",0),t.YNc(1,R,2,3,"a",1),t.YNc(2,W,11,9,"ng-template",null,2,t.W1O)),2&s&&(t.Q6J("ngIf",!i.videoHref),t.xp6(1),t.Q6J("ngIf",i.videoHref))},directives:[T.O5,x.yS,T.tP,T.mk,A._L,g.$,T.PC],styles:[".video-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;width:100%;height:100%;overflow:hidden;background-color:#ececec;transition:filter .2s ease}.video-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:#0000004d}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid rgba(255,255,255,.95)}.video-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{filter:blur(20px);transform:scale(1.03)}.progress-bar[_ngcontent-%COMP%]{height:3px;width:100%;position:absolute;bottom:0;background-color:#0003}.progress-bar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;background-color:var(--mainColor)}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%], .video-thumbnail-label-overlay[_ngcontent-%COMP%], .video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail-live-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:#000000b3;color:#fff;border-radius:3px;font-size:12px;font-weight:600;line-height:1.1;z-index:10}.video-thumbnail-label-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 5px;left:5px;top:5px;font-weight:700}.video-thumbnail-label-overlay.warning[_ngcontent-%COMP%]{background-color:orange}.video-thumbnail-label-overlay.danger[_ngcontent-%COMP%]{background-color:red}.video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail-live-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 3px;right:5px;bottom:5px}.video-thumbnail-live-overlay[_ngcontent-%COMP%]{font-weight:600;color:#fff}.video-thumbnail-live-overlay[_ngcontent-%COMP%]:not(.live-ended){background-color:#e00808b3}.video-thumbnail-actions-overlay[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;right:5px;top:5px;opacity:0}.video-thumbnail-actions-overlay[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{padding:3px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;height:22px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}"]}),l})()},36226:(B,D,e)=>{e.d(D,{L6:()=>x.L,Qq:()=>A.Q,xq:()=>g.x}),e(81153),e(97339),e(38562),e(33373);var x=e(67444),A=e(13106),g=e(54768)},54768:(B,D,e)=>{e.d(D,{x:()=>g});var t=e(84167),o=e(97694),b=e(13010),T=e(60006),x=e(13106),A=e(42741);let g=(()=>{class M{}return M.\u0275fac=function(n){return new(n||M)},M.\u0275mod=A.oAB({type:M}),M.\u0275inj=A.cJS({providers:[x.Q],imports:[[b.n,t.hA,T.x,o.Y]]}),M})()},81153:(B,D,e)=>{e.d(D,{Z:()=>l});var t=e(57115),b=e(64033),T=e(91531),x=e(17144),A=e(84167),g=e(54175),L=(e(359),e(51317)),n=e(42741),R=e(54755),w=e(13106),u=e(93324),h=e(16274),E=e(19895),O=e(24333),k=e(45175);function H(r,s){if(1&r){const i=n.EpF();n.TgZ(0,"div",19),n.NdJ("click",function(c){n.CHM(i);const v=n.oxw().$implicit,f=n.oxw();return c.stopPropagation(),f.toggleOptionalRow(v)}),n._UZ(1,"my-global-icon",10),n.qZA()}}function U(r,s){if(1&r){const i=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"my-peertube-checkbox",25),n.NdJ("click",function(c){const f=n.CHM(i).$implicit,V=n.MAs(3),d=n.MAs(5),I=n.oxw(2).$implicit;return n.oxw().toggleOptionalPlaylist(c,I,f,V.timestamp,d.timestamp)}),n.qZA(),n.TgZ(2,"my-timestamp-input",26,27),n.NdJ("ngModelChange",function(c){return n.CHM(i).$implicit.startTimestamp=c})("inputBlur",function(){const v=n.CHM(i).$implicit,f=n.oxw(2).$implicit;return n.oxw().onElementTimestampUpdate(f,v)}),n.qZA(),n.TgZ(4,"my-timestamp-input",26,28),n.NdJ("ngModelChange",function(c){return n.CHM(i).$implicit.stopTimestamp=c})("inputBlur",function(){const v=n.CHM(i).$implicit,f=n.oxw(2).$implicit;return n.oxw().onElementTimestampUpdate(f,v)}),n.qZA(),n.qZA()}if(2&r){const i=s.$implicit,_=n.oxw(2).$implicit,c=n.oxw();n.xp6(1),n.Q6J("inputName",c.getOptionalInputName(_,i))("ngModel",i.enabled)("onPushWorkaround",!0),n.xp6(1),n.Q6J("maxTimestamp",c.video.duration)("ngModel",i.startTimestamp),n.xp6(2),n.Q6J("maxTimestamp",c.video.duration)("ngModel",i.stopTimestamp)}}function Y(r,s){if(1&r&&(n.TgZ(0,"div",20),n.TgZ(1,"div",21),n.TgZ(2,"div"),n.SDv(3,22),n.qZA(),n.TgZ(4,"div"),n.SDv(5,23),n.qZA(),n.qZA(),n.YNc(6,U,6,7,"div",24),n.qZA()),2&r){const i=n.oxw().$implicit,_=n.oxw();n.xp6(6),n.Q6J("ngForOf",_.buildOptionalRowElements(i))}}const Z=function(r){return{"has-optional-row":r}};function S(r,s){if(1&r){const i=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",14),n.NdJ("click",function(c){const f=n.CHM(i).$implicit;return n.oxw().toggleMainPlaylist(c,f)}),n._UZ(2,"my-peertube-checkbox",15),n.TgZ(3,"label",16),n._uU(4),n.qZA(),n.YNc(5,H,2,0,"div",17),n.qZA(),n.YNc(6,Y,7,1,"div",18),n.qZA()}if(2&r){const i=s.$implicit,_=n.oxw();n.Q6J("ngClass",n.VKq(8,Z,i.optionalRowDisplayed)),n.xp6(2),n.Q6J("disabled",_.isPresentMultipleTimes(i)||i.optionalRowDisplayed)("inputName",_.getPrimaryInputName(i))("ngModel",_.isPrimaryCheckboxChecked(i))("onPushWorkaround",!0),n.xp6(2),n.hij(" ",i.displayName," "),n.xp6(1),n.Q6J("ngIf",_.isPrimaryCheckboxChecked(i)),n.xp6(1),n.Q6J("ngIf",i.optionalRowDisplayed)}}function W(r,s){if(1&r&&(n.TgZ(0,"div",36),n._uU(1),n.qZA()),2&r){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.formErrors.displayName," ")}}const p=function(r){return{"input-error":r}};function P(r,s){if(1&r){const i=n.EpF();n.TgZ(0,"form",29),n.NdJ("ngSubmit",function(){return n.CHM(i),n.oxw().createPlaylist()}),n.TgZ(1,"div",30),n.TgZ(2,"label",31),n.SDv(3,32),n.qZA(),n._UZ(4,"input",33),n.YNc(5,W,2,1,"div",34),n.qZA(),n._UZ(6,"input",35),n.qZA()}if(2&r){const i=n.oxw();n.Q6J("formGroup",i.form),n.xp6(4),n.Q6J("ngClass",n.VKq(4,p,i.formErrors.displayName)),n.xp6(1),n.Q6J("ngIf",i.formErrors.displayName),n.xp6(1),n.Q6J("disabled",!i.form.valid)}}const m=t("peertube:playlists:VideoAddToPlaylistComponent");let l=(()=>{class r extends A.OI{constructor(i,_,c,v,f){super(),this.formValidatorService=i,this.authService=_,this.notifier=c,this.videoPlaylistService=v,this.cd=f,this.lazyLoad=!1,this.isNewPlaylistBlockOpened=!1,this.videoPlaylistSearchChanged=new b.x,this.videoPlaylists=[],this.disabled=!1,this.playlistsData=[]}get user(){return this.authService.getUser()}ngOnInit(){this.buildForm({displayName:L.mk}),this.videoPlaylistService.listenToMyAccountPlaylistsChange().subscribe(i=>{this.playlistsData=i.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)}),this.videoPlaylistSearchChanged.pipe((0,T.b)(500)).subscribe(()=>this.load()),!1===this.lazyLoad&&this.load()}ngOnChanges(i){i.video&&this.reload()}ngOnDestroy(){this.unsubscribePlaylistChanges()}disableForReuse(){this.disabled=!0}enabledForReuse(){this.disabled=!1}reload(){m("Reloading component"),this.videoPlaylists=[],this.videoPlaylistSearch=void 0,this.load(),this.cd.markForCheck()}load(){m("Loading component"),this.listenToVideoPlaylistChange(),this.videoPlaylistService.listMyPlaylistWithCache(this.user,this.videoPlaylistSearch).subscribe(i=>{this.playlistsData=i.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)})}openChange(i){!1===i&&(this.isNewPlaylistBlockOpened=!1)}openCreateBlock(i){i.preventDefault(),this.isNewPlaylistBlockOpened=!0}toggleMainPlaylist(i,_){i.preventDefault(),this.isPresentMultipleTimes(_)||_.optionalRowDisplayed||(0===_.elements.length?this.addVideoInPlaylist(_,{enabled:!0,playlistElementId:void 0,startTimestamp:0,stopTimestamp:this.video.duration}):(this.removeVideoFromPlaylist(_,_.elements[0].playlistElementId),_.elements=[]),this.cd.markForCheck())}toggleOptionalPlaylist(i,_,c,v,f){i.preventDefault(),c.enabled?(this.removeVideoFromPlaylist(_,c.playlistElementId),c.enabled=!1,!1===this.isPrimaryCheckboxChecked(_)&&(_.optionalRowDisplayed=!1)):this.addVideoInPlaylist(_,{enabled:!0,playlistElementId:void 0,startTimestamp:v,stopTimestamp:f}),this.cd.markForCheck()}createPlaylist(){this.videoPlaylistService.createVideoPlaylist({displayName:this.form.value.displayName,privacy:3}).subscribe({next:()=>{this.isNewPlaylistBlockOpened=!1,this.cd.markForCheck()},error:c=>this.notifier.error(c.message)})}onVideoPlaylistSearchChanged(){this.videoPlaylistSearchChanged.next()}isPrimaryCheckboxChecked(i){return 0!==i.elements.filter(_=>_.enabled).length}toggleOptionalRow(i){i.optionalRowDisplayed=!i.optionalRowDisplayed,this.cd.markForCheck()}getPrimaryInputName(i){return"in-playlist-primary-"+i.id}getOptionalInputName(i,_){return"in-playlist-optional-"+i.id+(_?"-"+_.playlistElementId:"")}buildOptionalRowElements(i){const _=i.elements,c=0===_.length?void 0:_[_.length-1];return(!c||!0===c.enabled)&&_.push({enabled:!1,startTimestamp:0,stopTimestamp:this.video.duration}),_}isPresentMultipleTimes(i){return i.elements.filter(_=>!0===_.enabled).length>1}onElementTimestampUpdate(i,_){_.playlistElementId&&!1!==_.enabled&&this.videoPlaylistService.updateVideoOfPlaylist(i.id,_.playlistElementId,{startTimestamp:_.startTimestamp,stopTimestamp:_.stopTimestamp},this.video.id).subscribe({next:()=>{this.notifier.success("Zeitstempel ge\xE4ndert")},error:v=>this.notifier.error(v.message),complete:()=>this.cd.markForCheck()})}isOptionalRowDisplayed(i){const _=i.elements.filter(c=>c.enabled);if(_.length>1)return!0;if(1===_.length){const c=_[0];if(c.startTimestamp&&0!==c.startTimestamp||c.stopTimestamp&&c.stopTimestamp!==this.video.duration)return!0}return!1}removeVideoFromPlaylist(i,_){this.videoPlaylistService.removeVideoFromPlaylist(i.id,_,this.video.id).subscribe({next:()=>{this.notifier.success("Video von \n          " + i.displayName + " entfernt\n        ")},error:c=>this.notifier.error(c.message),complete:()=>this.cd.markForCheck()})}listenToVideoPlaylistChange(){this.unsubscribePlaylistChanges(),this.listenToPlaylistChangeSub=this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id).pipe((0,x.h)(()=>!1===this.disabled)).subscribe(i=>this.rebuildPlaylists(i))}unsubscribePlaylistChanges(){this.listenToPlaylistChangeSub&&(this.listenToPlaylistChangeSub.unsubscribe(),this.listenToPlaylistChangeSub=void 0)}rebuildPlaylists(i){m("Got existing results for %d.",this.video.id,i);const _=this.videoPlaylists;this.videoPlaylists=[];for(const c of this.playlistsData){const v=i.filter(d=>d.playlistId===c.id),f={id:c.id,optionalRowDisplayed:!1,displayName:c.displayName,elements:v.map(d=>({enabled:!0,playlistElementId:d.playlistElementId,startTimestamp:d.startTimestamp||0,stopTimestamp:d.stopTimestamp||this.video.duration}))},V=_.find(d=>d.id===c.id);f.optionalRowDisplayed=V?V.optionalRowDisplayed:this.isOptionalRowDisplayed(f),this.videoPlaylists.push(f)}m("Rebuilt playlist state for video %d.",this.video.id,this.videoPlaylists),this.cd.markForCheck()}addVideoInPlaylist(i,_){const c={videoId:this.video.id};_.startTimestamp&&(c.startTimestamp=_.startTimestamp),_.stopTimestamp&&_.stopTimestamp!==this.video.duration&&(c.stopTimestamp=_.stopTimestamp),this.videoPlaylistService.addVideoInPlaylist(i.id,c).subscribe({next:v=>{const f=c.startTimestamp||c.stopTimestamp?"Video zu " + i.displayName + " mit dem Zeitstempel " + this.formatTimestamp(_) + " hinzugef\xFCgt":"Video zu \n          " + i.displayName + " hinzugef\xFCgt\n        ";this.notifier.success(f),_&&(_.playlistElementId=v.videoPlaylistElement.id)},error:v=>this.notifier.error(v.message),complete:()=>this.cd.markForCheck()})}formatTimestamp(i){return`(${i.startTimestamp?(0,g.nH)(i.startTimestamp):""}-${i.stopTimestamp?(0,g.nH)(i.stopTimestamp):""})`}}return r.\u0275fac=function(i){return new(i||r)(n.Y36(A.Q4),n.Y36(R.e8),n.Y36(R.d4),n.Y36(w.Q),n.Y36(n.sBO))},r.\u0275cmp=n.Xpm({type:r,selectors:[["my-video-add-to-playlist"]],inputs:{video:"video",currentVideoTimestamp:"currentVideoTimestamp",lazyLoad:"lazyLoad"},features:[n.qOj,n.TTD],decls:14,vars:4,consts:function(){let s,i,_,c,v,f,V;return s="Speichern unter",i="Playlists suchen",_="Private Playlist hinzuf\xFCgen",c="Beginne bei",v="Ende bei",f="Anzeigename",V="Erstellen",[[1,"root"],[1,"header"],[1,"first-row"],[1,"title"],s,[1,"input-container"],["type","text","placeholder",i,3,"ngModel","ngModelChange"],[1,"playlists"],["class","playlist dropdown-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"new-playlist-button","dropdown-item",3,"hidden","click"],["iconName","add","aria-hidden","true"],_,["class","new-playlist-block dropdown-item",3,"formGroup","ngSubmit",4,"ngIf"],[1,"playlist","dropdown-item",3,"ngClass"],[1,"primary-row",3,"click"],[3,"disabled","inputName","ngModel","onPushWorkaround"],[1,"display-name"],["class","optional-row-icon",3,"click",4,"ngIf"],["class","optional-rows",4,"ngIf"],[1,"optional-row-icon",3,"click"],[1,"optional-rows"],[1,"labels"],c,v,[4,"ngFor","ngForOf"],[3,"inputName","ngModel","onPushWorkaround","click"],[3,"maxTimestamp","ngModel","ngModelChange","inputBlur"],["startAt",""],["stopAt",""],[1,"new-playlist-block","dropdown-item",3,"formGroup","ngSubmit"],[1,"form-group"],["for","displayName"],f,["type","text","id","displayName","formControlName","displayName",3,"ngClass"],["class","form-error",4,"ngIf"],["type","submit","value",V,3,"disabled"],[1,"form-error"]]},template:function(i,_){1&i&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.SDv(4,4),n.qZA(),n.qZA(),n.qZA(),n.TgZ(5,"div",5),n.TgZ(6,"input",6),n.NdJ("ngModelChange",function(v){return _.videoPlaylistSearch=v})("ngModelChange",function(){return _.onVideoPlaylistSearchChanged()}),n.qZA(),n.qZA(),n.TgZ(7,"div",7),n.YNc(8,S,7,10,"div",8),n.qZA(),n.TgZ(9,"div",9),n.NdJ("click",function(v){return _.openCreateBlock(v)}),n._UZ(10,"my-global-icon",10),n.TgZ(11,"span"),n.SDv(12,11),n.qZA(),n.qZA(),n.YNc(13,P,7,6,"form",12),n.qZA()),2&i&&(n.xp6(6),n.Q6J("ngModel",_.videoPlaylistSearch),n.xp6(2),n.Q6J("ngForOf",_.videoPlaylists),n.xp6(1),n.Q6J("hidden",_.isNewPlaylistBlockOpened),n.xp6(4),n.Q6J("ngIf",_.isNewPlaylistBlockOpened))},directives:[u.Fj,u.JJ,u.On,h.sg,E.$,h.O5,h.mk,O.P,k.A,u._Y,u.JL,u.sg,u.u],styles:[".header[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding:8px 24px}.dropdown-item[_ngcontent-%COMP%]:active{color:inherit}.header[_ngcontent-%COMP%]{min-width:240px;margin-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1)}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;flex-grow:1}.playlists[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto}.playlist[_ngcontent-%COMP%]{padding:0}.playlist[_ngcontent-%COMP%] > .primary-row[_ngcontent-%COMP%]{padding:8px 10px 8px 24px}@supports (padding-inline-start: 24px){.playlist[_ngcontent-%COMP%] > .optional-rows[_ngcontent-%COMP%]{padding-inline-start:24px}}@supports not (padding-inline-start: 24px){.playlist[_ngcontent-%COMP%] > .optional-rows[_ngcontent-%COMP%]{padding-left:24px}}.playlist.has-optional-row[_ngcontent-%COMP%]:hover{background-color:inherit}.primary-row[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.primary-row[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{align-self:center}@supports (margin-inline-end: 10px){.primary-row[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.primary-row[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:10px}}.primary-row[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-grow:1;margin:0;font-weight:400;cursor:pointer}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;cursor:pointer}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:19px;height:19px}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc, .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#333}@supports (margin-inline-end: 0){.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-inline-end:0}}@supports not (margin-inline-end: 0){.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-right:0}}@supports (margin-inline-end: 10px){.primary-row[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.primary-row[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-right:10px}}.primary-row[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]     .ui-inputtext, .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]     .ui-inputtext{padding:0;width:50px}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 5px 5px 10px}.optional-rows[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{display:block;width:34px}@supports (margin-inline-end: 0 !important){.optional-rows[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-inline-end:0!important}}@supports not (margin-inline-end: 0 !important){.optional-rows[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:0!important}}.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{font-size:13px;color:var(--greyForegroundColor);padding-top:5px;padding-bottom:0}@supports (margin-inline-start: 34px){.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{margin-inline-start:34px}}@supports not (margin-inline-start: 34px){.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{margin-left:34px}}.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50px}@supports (margin-inline-end: 10px){.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px}}.new-playlist-button[_ngcontent-%COMP%], .new-playlist-block[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid rgba(0,0,0,.1)}.new-playlist-button[_ngcontent-%COMP%]{cursor:pointer}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;left:-1px;top:-1px;width:21px;height:21px}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#333}@supports (margin-inline-end: 4px){.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-inline-end:4px}}@supports not (margin-inline-end: 4px){.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-right:4px}}input[type=text][_ngcontent-%COMP%]{padding:0 15px;display:inline-block;height:30px;width:200px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #C6C6C6;border-radius:3px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(200px + 40px)){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;border:0;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px!important;text-align:center;cursor:pointer}@supports (padding-inline-start: 13px){input[type=submit][_ngcontent-%COMP%]{padding-inline-start:13px}}@supports not (padding-inline-start: 13px){input[type=submit][_ngcontent-%COMP%]{padding-left:13px}}@supports (padding-inline-end: 17px){input[type=submit][_ngcontent-%COMP%]{padding-inline-end:17px}}@supports not (padding-inline-end: 17px){input[type=submit][_ngcontent-%COMP%]{padding-right:17px}}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}"],changeDetection:0}),r})()},97339:(B,D,e)=>{e.d(D,{K:()=>V});var t=e(42741),o=e(54175),T=(e(359),e(67444)),x=e(54755),A=e(13106),g=e(16274),M=e(49393),L=e(19895),n=e(40062),R=e(49705),w=e(76476),u=e(24333),h=e(93324),E=e(45175);const O=["moreDropdown"];function k(d,I){1&d&&t._UZ(0,"my-global-icon",11)}function H(d,I){if(1&d&&(t.ynx(0),t._uU(1),t.BQk()),2&d){const a=t.oxw();t.xp6(1),t.Oqu(a.position)}}function U(d,I){if(1&d&&t._UZ(0,"my-video-thumbnail",12),2&d){const a=t.oxw();t.Q6J("video",a.playlistElement.video)("nsfw",a.isVideoBlur(a.playlistElement.video))("videoRouterLink",a.buildRouterLink())("queryParams",a.buildRouterQuery())}}function Y(d,I){1&d&&t._UZ(0,"div",13)}const Z=function(d){return["/a",d]};function S(d,I){if(1&d&&(t.TgZ(0,"a",18),t._uU(1),t.qZA()),2&d){const a=t.oxw(2);t.Q6J("routerLink",t.VKq(2,Z,a.playlistElement.video.byAccount)),t.xp6(1),t.hij(" ",a.playlistElement.video.byAccount," ")}}function W(d,I){if(1&d&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&d){const a=t.oxw(2);t.xp6(1),t.Oqu(a.playlistElement.video.byAccount)}}function p(d,I){if(1&d&&(t.ynx(0),t.TgZ(1,"a",14),t._uU(2),t.qZA(),t.YNc(3,S,2,4,"a",15),t.YNc(4,W,2,1,"span",16),t.TgZ(5,"span",17),t._uU(6),t.qZA(),t.BQk()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("routerLink",a.buildRouterLink())("queryParams",a.buildRouterQuery()),t.uIk("title",a.playlistElement.video.name),t.xp6(1),t.Oqu(a.playlistElement.video.name),t.xp6(1),t.Q6J("ngIf",a.accountLink),t.xp6(1),t.Q6J("ngIf",!a.accountLink),t.xp6(2),t.Oqu(a.formatTimestamp(a.playlistElement))}}function P(d,I){1&d&&(t.ynx(0),t.SDv(1,21),t.BQk())}function m(d,I){1&d&&(t.ynx(0),t.SDv(1,22),t.BQk())}function l(d,I){1&d&&(t.ynx(0),t.SDv(1,23),t.BQk())}function r(d,I){if(1&d&&(t.TgZ(0,"span",20),t.YNc(1,P,2,0,"ng-container",4),t.YNc(2,m,2,0,"ng-container",4),t.YNc(3,l,2,0,"ng-container",4),t.qZA()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isUnavailable(a.playlistElement)),t.xp6(1),t.Q6J("ngIf",a.isPrivate(a.playlistElement)),t.xp6(1),t.Q6J("ngIf",a.isDeleted(a.playlistElement))}}const s=function(d){return["/my-library","video-playlists",d]};function i(d,I){if(1&d&&t._UZ(0,"my-edit-button",24),2&d){const a=t.oxw();t.Q6J("routerLink",t.VKq(1,s,a.playlist.uuid))}}function _(d,I){if(1&d){const a=t.EpF();t.TgZ(0,"div",35),t.TgZ(1,"div"),t.TgZ(2,"my-peertube-checkbox",36),t.NdJ("ngModelChange",function(y){return t.CHM(a),t.oxw(3).timestampOptions.startTimestampEnabled=y}),t.qZA(),t.TgZ(3,"my-timestamp-input",37),t.NdJ("ngModelChange",function(y){return t.CHM(a),t.oxw(3).timestampOptions.startTimestamp=y}),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"my-peertube-checkbox",38),t.NdJ("ngModelChange",function(y){return t.CHM(a),t.oxw(3).timestampOptions.stopTimestampEnabled=y}),t.qZA(),t.TgZ(6,"my-timestamp-input",37),t.NdJ("ngModelChange",function(y){return t.CHM(a),t.oxw(3).timestampOptions.stopTimestamp=y}),t.qZA(),t.qZA(),t.TgZ(7,"input",39),t.NdJ("click",function(){t.CHM(a);const y=t.oxw(3);return y.updateTimestamps(y.playlistElement)}),t.qZA(),t.qZA()}if(2&d){const a=t.oxw(3);t.xp6(2),t.Q6J("ngModel",a.timestampOptions.startTimestampEnabled),t.xp6(1),t.Q6J("timestamp",a.timestampOptions.startTimestamp)("maxTimestamp",a.playlistElement.video.duration)("disabled",!a.timestampOptions.startTimestampEnabled)("ngModel",a.timestampOptions.startTimestamp),t.xp6(2),t.Q6J("ngModel",a.timestampOptions.stopTimestampEnabled),t.xp6(1),t.Q6J("timestamp",a.timestampOptions.stopTimestamp)("maxTimestamp",a.playlistElement.video.duration)("disabled",!a.timestampOptions.stopTimestampEnabled)("ngModel",a.timestampOptions.stopTimestamp)}}function c(d,I){if(1&d){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",29),t.NdJ("click",function(y){t.CHM(a);const N=t.oxw(2);return N.toggleDisplayTimestampsOptions(y,N.playlistElement)}),t._UZ(2,"my-global-icon",32),t.ynx(3),t.SDv(4,33),t.BQk(),t.qZA(),t.YNc(5,_,8,10,"div",34),t.BQk()}if(2&d){const a=t.oxw(2);t.xp6(5),t.Q6J("ngIf",a.displayTimestampOptions)}}function v(d,I){if(1&d){const a=t.EpF();t.TgZ(0,"div",25,26),t.NdJ("openChange",function(){return t.CHM(a),t.oxw().onDropdownOpenChange()}),t.TgZ(2,"my-global-icon",27),t.NdJ("click",function(y){return y.preventDefault()}),t.qZA(),t.TgZ(3,"div",28),t.YNc(4,c,6,1,"ng-container",4),t.TgZ(5,"span",29),t.NdJ("click",function(){t.CHM(a);const y=t.oxw();return y.removeFromPlaylist(y.playlistElement)}),t._UZ(6,"my-global-icon",30),t.ynx(7),t.SDv(8,31),t.BQk(),t.qZA(),t.qZA(),t.qZA()}if(2&d){const a=t.oxw();t.xp6(4),t.Q6J("ngIf",a.playlistElement.video),t.xp6(4),t.pQV(null==a.playlist?null:a.playlist.displayName),t.QtT(8)}}const f=function(d){return{playing:d}};let V=(()=>{class d{constructor(a,C,y,N,$){this.authService=a,this.serverService=C,this.notifier=y,this.videoPlaylistService=N,this.cdr=$,this.owned=!1,this.playing=!1,this.rowLink=!1,this.accountLink=!0,this.touchScreenEditButton=!1,this.elementRemoved=new t.vpe,this.displayTimestampOptions=!1,this.timestampOptions={}}ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig()}isUnavailable(a){return 3===a.type}isPrivate(a){return 2===a.type}isDeleted(a){return 1===a.type}buildRouterLink(){return this.playlist?T.L.buildWatchUrl(this.playlist):null}buildRouterQuery(){return this.playlistElement&&this.playlistElement.video?{playlistPosition:this.playlistElement.position,start:this.playlistElement.startTimestamp,stop:this.playlistElement.stopTimestamp,resume:!0}:{}}isVideoBlur(a){return a.isVideoNSFWForUser(this.authService.getUser(),this.serverConfig)}removeFromPlaylist(a){this.videoPlaylistService.removeVideoFromPlaylist(this.playlist.id,a.id,this.playlistElement.video?this.playlistElement.video.id:void 0).subscribe({next:()=>{this.notifier.success("Video von \n          " + this.playlist.displayName + " entfernt\n        "),this.elementRemoved.emit(a)},error:y=>this.notifier.error(y.message)}),this.moreDropdown.close()}updateTimestamps(a){const C={};C.startTimestamp=this.timestampOptions.startTimestampEnabled?this.timestampOptions.startTimestamp:null,C.stopTimestamp=this.timestampOptions.stopTimestampEnabled?this.timestampOptions.stopTimestamp:null,this.videoPlaylistService.updateVideoOfPlaylist(this.playlist.id,a.id,C,this.playlistElement.video.id).subscribe({next:()=>{this.notifier.success("Zeitstempel ge\xE4ndert"),a.startTimestamp=C.startTimestamp,a.stopTimestamp=C.stopTimestamp,this.cdr.detectChanges()},error:y=>this.notifier.error(y.message)}),this.moreDropdown.close()}formatTimestamp(a){const C=a.startTimestamp,y=a.stopTimestamp,N=(0,o.nH)(C,!0,":"),$=(0,o.nH)(y,!0,":");return null===C&&null===y?"":null!==C&&null===y?"Beginnt bei"+N:null===C&&null!==y?"Endet bei"+$:"Beginnt bei"+N+"und endet bei"+$}onDropdownOpenChange(){this.displayTimestampOptions=!1}toggleDisplayTimestampsOptions(a,C){a.preventDefault(),this.displayTimestampOptions=!this.displayTimestampOptions,!0===this.displayTimestampOptions&&(this.timestampOptions={startTimestampEnabled:!1,stopTimestampEnabled:!1,startTimestamp:0,stopTimestamp:C.video.duration},C.startTimestamp&&(this.timestampOptions.startTimestampEnabled=!0,this.timestampOptions.startTimestamp=C.startTimestamp),C.stopTimestamp&&(this.timestampOptions.stopTimestampEnabled=!0,this.timestampOptions.stopTimestamp=C.stopTimestamp)),setTimeout(()=>{this.cdr.detectChanges()})}}return d.\u0275fac=function(a){return new(a||d)(t.Y36(x.e8),t.Y36(x.NG),t.Y36(x.d4),t.Y36(A.Q),t.Y36(t.sBO))},d.\u0275cmp=t.Xpm({type:d,selectors:[["my-video-playlist-element-miniature"]],viewQuery:function(a,C){if(1&a&&t.Gf(O,5),2&a){let y;t.iGM(y=t.CRH())&&(C.moreDropdown=y.first)}},inputs:{playlist:"playlist",playlistElement:"playlistElement",owned:"owned",playing:"playing",rowLink:"rowLink",accountLink:"accountLink",position:"position",touchScreenEditButton:"touchScreenEditButton"},outputs:{elementRemoved:"elementRemoved"},decls:12,vars:13,consts:function(){let I,a,C,y,N,$,F,Q;return I="Nicht verf\xFCgbar",a="Privat",C="Gel\xF6scht",y="Entferne von " + "\ufffd0\ufffd" + "",N="Bearbeitung beginnt/endet bei",$="Beginne bei",F="Ende bei",Q="Speichern",[[1,"video",3,"ngClass"],[3,"routerLink","queryParams"],[1,"position"],["iconName","play",4,"ngIf"],[4,"ngIf"],[3,"video","nsfw","videoRouterLink","queryParams",4,"ngIf"],["class","fake-thumbnail",4,"ngIf"],[1,"video-info"],["class","video-info-name",4,"ngIf"],[3,"routerLink",4,"ngIf"],["class","more dropdown-root","ngbDropdown","","placement","left auto","autoClose","outside","container","body",3,"openChange",4,"ngIf"],["iconName","play"],[3,"video","nsfw","videoRouterLink","queryParams"],[1,"fake-thumbnail"],["tabindex","-1",1,"video-info-name",3,"routerLink","queryParams"],["tabindex","-1","class","video-info-account",3,"routerLink",4,"ngIf"],["tabindex","-1","class","video-info-account",4,"ngIf"],["tabindex","-1",1,"video-info-timestamp"],["tabindex","-1",1,"video-info-account",3,"routerLink"],["tabindex","-1",1,"video-info-account"],[1,"video-info-name"],I,a,C,[3,"routerLink"],["ngbDropdown","","placement","left auto","autoClose","outside","container","body",1,"more","dropdown-root",3,"openChange"],["moreDropdown","ngbDropdown"],["iconName","more-vertical","ngbDropdownToggle","","role","button",1,"icon-more",3,"click"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],["iconName","delete","aria-hidden","true"],y,["iconName","edit","aria-hidden","true"],N,["class","timestamp-options",4,"ngIf"],[1,"timestamp-options"],["inputName","startAt","labelText",$,3,"ngModel","ngModelChange"],[3,"timestamp","maxTimestamp","disabled","ngModel","ngModelChange"],["inputName","stopAt","labelText",F,3,"ngModel","ngModelChange"],["type","submit","value",Q,3,"click"]]},template:function(a,C){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t.TgZ(2,"div",2),t.YNc(3,k,1,0,"my-global-icon",3),t.YNc(4,H,2,1,"ng-container",4),t.qZA(),t.YNc(5,U,1,4,"my-video-thumbnail",5),t.YNc(6,Y,1,0,"div",6),t.TgZ(7,"div",7),t.YNc(8,p,7,7,"ng-container",4),t.YNc(9,r,4,3,"span",8),t.qZA(),t.qZA(),t.YNc(10,i,1,3,"my-edit-button",9),t.YNc(11,v,9,2,"div",10),t.qZA()),2&a&&(t.Q6J("ngClass",t.VKq(11,f,C.playing)),t.xp6(1),t.Q6J("routerLink",C.buildRouterLink())("queryParams",C.buildRouterQuery()),t.xp6(2),t.Q6J("ngIf",C.playing),t.xp6(1),t.Q6J("ngIf",!C.playing),t.xp6(1),t.Q6J("ngIf",C.playlistElement.video),t.xp6(1),t.Q6J("ngIf",!C.playlistElement.video),t.xp6(2),t.Q6J("ngIf",C.playlistElement.video),t.xp6(1),t.Q6J("ngIf",!C.playlistElement.video),t.xp6(1),t.Q6J("ngIf",C.owned&&C.touchScreenEditButton),t.xp6(1),t.Q6J("ngIf",C.owned))},directives:[g.mk,M.yS,g.O5,L.$,n.W,R.M,M.rH,w.jt,w.iD,w.Vi,u.P,h.JJ,h.On,E.A],styles:["my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{width:130px;height:72px}.fake-thumbnail[_ngcontent-%COMP%]{width:130px;height:72px;background-color:#ececec}my-video-thumbnail[_ngcontent-%COMP%], .fake-thumbnail[_ngcontent-%COMP%]{display:flex}@supports (margin-inline-end: 10px){my-video-thumbnail[_ngcontent-%COMP%], .fake-thumbnail[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){my-video-thumbnail[_ngcontent-%COMP%], .fake-thumbnail[_ngcontent-%COMP%]{margin-right:10px}}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;background-color:var(--mainBackgroundColor);padding:10px;border-bottom:1px solid rgba(0,0,0,.1)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{display:flex}.video[_ngcontent-%COMP%]:hover{background-color:#0000000d}.video[_ngcontent-%COMP%]:hover   .more[_ngcontent-%COMP%]{opacity:1}@media not all and (hover: hover) and (pointer: fine){.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:1!important}}.video.playing[_ngcontent-%COMP%]{background-color:#00000005}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainForegroundColor);display:flex;min-width:0;align-items:center;cursor:pointer}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{text-decoration:none!important;outline:none!important}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);min-width:25px}@supports (margin-inline-end: 10px){.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{margin-right:10px}}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:17px;position:relative;left:-2px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:flex-start;min-width:0}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-account[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-timestamp[_ngcontent-%COMP%]{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:18px;font-weight:600;display:inline-block}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{justify-self:flex-end;cursor:pointer;min-width:24px}@supports (margin-inline-start: auto){.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{margin-inline-start:auto}}@supports not (margin-inline-start: auto){.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{margin-left:auto}}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:0}.video[_ngcontent-%COMP%]   .more.show[_ngcontent-%COMP%]{opacity:1}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]{display:flex}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .material, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]:after{border:0}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:6px 15px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;opacity:.7;position:relative;top:-2px}@supports (margin-inline-end: 10px){.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-right:10px}}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]{padding-top:0;margin-bottom:15px}@supports (padding-inline-start: 35px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]{padding-inline-start:35px}}@supports not (padding-inline-start: 35px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]{padding-left:35px}}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@supports (margin-inline-end: 5px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-inline-end:5px}}@supports not (margin-inline-end: 5px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:5px}}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;border:0;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px!important;text-align:center;cursor:pointer;margin-top:10px}@supports (padding-inline-start: 13px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline-start:13px}}@supports not (padding-inline-start: 13px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:13px}}@supports (padding-inline-end: 17px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline-end:17px}}@supports not (padding-inline-end: 17px){.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:17px}}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}@media screen and (min-width: 800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width: 800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:max-content;margin:auto}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 500px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}@media screen and (min-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col:not(.expanded)[_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:max-content;margin:auto}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 740px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}"],changeDetection:0}),d})()},38562:(B,D,e)=>{e.d(D,{W:()=>o});var t=e(62026);class o{constructor(T,x={}){this.id=T.id,this.position=T.position,this.startTimestamp=T.startTimestamp,this.stopTimestamp=T.stopTimestamp,this.type=T.type,T.video&&(this.video=new t.nk(T.video,x))}}},33373:(B,D,e)=>{e.d(D,{U:()=>w});var t=e(67444),o=e(42741),b=e(16274),T=e(29297),x=e(49393),A=e(2402);const g=function(u){return["/c",u]};function M(u,h){if(1&u&&(o.TgZ(0,"a",15),o.SDv(1,16),o.qZA()),2&u){const E=o.oxw();o.Q6J("routerLink",o.VKq(2,g,E.playlist.videoChannelBy)),o.xp6(1),o.pQV(E.playlist.videoChannelBy),o.QtT(1)}}function L(u,h){if(1&u&&(o.TgZ(0,"span",17),o._uU(1),o.qZA()),2&u){const E=o.oxw();o.xp6(1),o.Oqu(E.playlist.privacy.label)}}function n(u,h){if(1&u&&(o.TgZ(0,"div",18),o._uU(1),o.qZA()),2&u){const E=o.oxw();o.xp6(1),o.Oqu(E.playlist.description)}}const R=function(u,h,E){return{"no-videos":u,"to-manage":h,"display-as-row":E}};let w=(()=>{class u{constructor(){this.toManage=!1,this.displayChannel=!1,this.displayDescription=!1,this.displayPrivacy=!1,this.displayAsRow=!1,this.linkType="internal"}ngOnInit(){this.buildPlaylistUrl()}buildPlaylistUrl(){if(this.toManage)this.routerLink=["/my-library/video-playlists",this.playlist.uuid];else if(0!==this.playlist.videosLength){if("internal"!==this.linkType&&this.playlist.url)return"external"===this.linkType?(this.routerLink=null,this.playlistHref=this.playlist.url,void(this.playlistTarget="_blank")):void(this.routerLink=["/search/lazy-load-playlist",{url:this.playlist.url}]);this.routerLink=t.L.buildWatchUrl(this.playlist)}else this.routerLink=null}}return u.\u0275fac=function(E){return new(E||u)},u.\u0275cmp=o.Xpm({type:u,selectors:[["my-video-playlist-miniature"]],inputs:{playlist:"playlist",toManage:"toManage",displayChannel:"displayChannel",displayDescription:"displayDescription",displayPrivacy:"displayPrivacy",displayAsRow:"displayAsRow",linkType:"linkType"},decls:18,vars:24,consts:function(){let h,E,O;return h="{VAR_PLURAL, plural, =0 {Keine Videos} =1 {1 Video} other {{INTERPOLATION} Videos}}",h=o.Zx4(h,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),E="Aktualisiert " + "\ufffd0\ufffd" + "",O="\n          " + "\ufffd0\ufffd" + "\n        ",[[1,"miniature",3,"ngClass"],[1,"miniature-thumbnail",3,"internalLink","href","target","title"],["alt",""],[1,"miniature-playlist-info-overlay"],h,[1,"play-overlay"],[1,"icon"],[1,"miniature-info"],["tabindex","-1",1,"miniature-name",3,"internalLink","href","target","title"],["class","by",3,"routerLink",4,"ngIf"],[1,"privacy-date"],["class","video-info-privacy",4,"ngIf"],[1,"updated-at"],E,["class","video-info-description",4,"ngIf"],[1,"by",3,"routerLink"],O,[1,"video-info-privacy"],[1,"video-info-description"]]},template:function(E,O){1&E&&(o.TgZ(0,"div",0),o.TgZ(1,"my-link",1),o._UZ(2,"img",2),o.TgZ(3,"div",3),o.ynx(4),o.SDv(5,4),o.BQk(),o.qZA(),o.TgZ(6,"div",5),o._UZ(7,"div",6),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"my-link",8),o._uU(10),o.qZA(),o.YNc(11,M,2,4,"a",9),o.TgZ(12,"div",10),o.YNc(13,L,2,1,"span",11),o.TgZ(14,"span",12),o.SDv(15,13),o.ALo(16,"myFromNow"),o.qZA(),o.qZA(),o.YNc(17,n,2,1,"div",14),o.qZA(),o.qZA()),2&E&&(o.Q6J("ngClass",o.kEZ(20,R,0===O.playlist.videosLength,O.toManage,O.displayAsRow)),o.xp6(1),o.Q6J("internalLink",O.routerLink)("href",O.playlistHref)("target",O.playlistTarget)("title",O.playlist.description),o.xp6(1),o.uIk("aria-labelledby",O.playlist.displayName)("src",O.playlist.thumbnailUrl,o.LSH),o.xp6(3),o.pQV(O.playlist.videosLength)(O.playlist.videosLength),o.QtT(5),o.xp6(4),o.Q6J("internalLink",O.routerLink)("href",O.playlistHref)("target",O.playlistTarget)("title",O.playlist.description),o.xp6(1),o.hij(" ",O.playlist.displayName," "),o.xp6(1),o.Q6J("ngIf",O.displayChannel&&O.playlist.videoChannelBy),o.xp6(2),o.Q6J("ngIf",O.displayPrivacy),o.xp6(3),o.pQV(o.lcZ(16,18,O.playlist.updatedAt)),o.QtT(15),o.xp6(1),o.Q6J("ngIf",O.displayDescription))},directives:[b.mk,T.N,b.O5,x.yS],pipes:[A.d],styles:['.miniature[_ngcontent-%COMP%]{display:inline-block;width:100%}.miniature.no-videos[_ngcontent-%COMP%]:not(.to-manage)   a[_ngcontent-%COMP%]{cursor:default!important}.miniature.to-manage[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature.no-videos[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{display:none}.miniature-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;width:100%;height:100%;overflow:hidden;background-color:#ececec;transition:filter .2s ease}.miniature-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:#0000004d}.miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid rgba(255,255,255,.95)}.miniature-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.miniature-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.miniature-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.miniature-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{filter:blur(20px);transform:scale(1.03)}.miniature-thumbnail[_ngcontent-%COMP%]   .miniature-playlist-info-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:#000000b3;color:#fff;position:absolute;right:0;bottom:0;height:100%;padding:0 10px;display:flex;align-items:center;font-size:14px;font-weight:600}.miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;-webkit-line-clamp:2;font-size:1.1em;line-height:1.1em;overflow:hidden;text-overflow:ellipsis;max-height:2.2em;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;transition:color .2s;font-weight:600;color:var(--mainForegroundColor)}.miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.miniature-info[_ngcontent-%COMP%]   .miniature-name.blur-filter[_ngcontent-%COMP%]{filter:blur(3px)}@supports (padding-inline-start: 4px){.miniature-info[_ngcontent-%COMP%]   .miniature-name.blur-filter[_ngcontent-%COMP%]{padding-inline-start:4px}}@supports not (padding-inline-start: 4px){.miniature-info[_ngcontent-%COMP%]   .miniature-name.blur-filter[_ngcontent-%COMP%]{padding-left:4px}}.miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{display:block;color:var(--greyForegroundColor)}.miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:hover, .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:focus, .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:active{text-decoration:none!important;outline:none!important}.miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]{margin-top:5px;font-size:13px}.miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]{font-weight:600}.miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]:after{content:"-";margin:0 3px}.miniature-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]{margin-top:10px;color:var(--greyForegroundColor)}.miniature[_ngcontent-%COMP%]:not(.display-as-row)   .miniature-name[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px}.miniature[_ngcontent-%COMP%]:not(.display-as-row)   .miniature-thumbnail[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56.25%;margin-top:10px;margin-bottom:5px}.miniature[_ngcontent-%COMP%]:not(.display-as-row)   .miniature-thumbnail[_ngcontent-%COMP%]     a{position:absolute;width:100%;height:100%;top:0}.miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 280px;--rowThumbnailHeight: 153px;display:flex}.miniature.display-as-row[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;-webkit-line-clamp:2;font-size:1.3em;line-height:1.3em;overflow:hidden;text-overflow:ellipsis;max-height:2.6em}.miniature.display-as-row[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]{width:var(--rowThumbnailWidth);height:var(--rowThumbnailHeight)}@supports (margin-inline-end: 10px){.miniature.display-as-row[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]{margin-inline-end:10px}}@supports not (margin-inline-end: 10px){.miniature.display-as-row[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]{margin-right:10px}}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 201px;--rowThumbnailHeight: 114px}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 201px;--rowThumbnailHeight: 114px}}@media screen and (max-width: 740px){.main-col:not(.expanded)[_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 125px;--rowThumbnailHeight: 71px}}@media screen and (max-width: 500px){.main-col.expanded[_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 125px;--rowThumbnailHeight: 71px}}']}),u})()},67444:(B,D,e)=>{e.d(D,{L:()=>x});var t=e(86804),o=e(62026),b=e(54175),T=e(35436);class x{constructor(g,M){const L=(0,t.Ir)();this.id=g.id,this.uuid=g.uuid,this.shortUUID=g.shortUUID,this.url=g.url,this.isLocal=g.isLocal,this.displayName=g.displayName,this.description=g.description,this.privacy=g.privacy,this.thumbnailPath=g.thumbnailPath,this.thumbnailUrl=this.thumbnailPath?g.thumbnailUrl||L+g.thumbnailPath:L+"/client/assets/images/default-playlist.jpg",this.embedPath=g.embedPath,this.embedUrl=g.embedUrl||(0,t.lf)()+g.embedPath,this.videosLength=g.videosLength,this.type=g.type,this.createdAt=new Date(g.createdAt),this.updatedAt=new Date(g.updatedAt),this.ownerAccount=g.ownerAccount,this.ownerBy=o.vt.CREATE_BY_STRING(g.ownerAccount.name,g.ownerAccount.host),g.videoChannel&&(this.videoChannel=g.videoChannel,this.videoChannelBy=o.vt.CREATE_BY_STRING(g.videoChannel.name,g.videoChannel.host)),this.privacy.label=(0,T.ol)(this.privacy.label,M),2===this.type.id&&(this.displayName=(0,T.ol)(this.displayName,M))}static buildWatchUrl(g){return(0,b.wp)({shortUUID:g.shortUUID||g.uuid})}}},13106:(B,D,e)=>{e.d(D,{Q:()=>S});var t=e(57115),b=e(87347),T=e(64033),x=e(4209),A=e(36371),g=e(72754),M=e(97142),L=e(17310),n=e(79515),R=e(29230),w=e(17144),u=e(31887),h=e(86804),E=e(62026),O=e(24766),k=e(38562),H=e(67444),U=e(42741),Y=e(54755);const Z=t("peertube:playlists:VideoPlaylistService");class S{constructor(p,P,m,l,r){this.authHttp=p,this.serverService=P,this.restExtractor=m,this.restService=l,this.ngZone=r,this.videoExistsInPlaylistNotifier=new b.t(1),this.videoExistsInPlaylistCacheSubject=new T.x,this.videoExistsObservableCache={},this.videoExistsCache={},this.myAccountPlaylistCache=void 0,this.myAccountPlaylistCacheSubject=new T.x,this.videoExistsInPlaylistObservable=(0,x.T)((0,h.f8)({time:500,ngZone:this.ngZone,bulkGet:this.doVideosExistInPlaylist.bind(this),notifierObservable:this.videoExistsInPlaylistNotifier}),this.videoExistsInPlaylistCacheSubject)}listChannelPlaylists(p,P){const m=E.B1.BASE_VIDEO_CHANNEL_URL+p.nameWithHost+"/video-playlists",l=this.restService.componentPaginationToRestPagination(P);let r=new u.LE;return r=this.restService.addRestGetParams(r,l),this.authHttp.get(m,{params:r}).pipe((0,g.w)(s=>this.extractPlaylists(s)),(0,M.K)(s=>this.restExtractor.handleError(s)))}listMyPlaylistWithCache(p,P){if(!P){if(this.myAccountPlaylistCacheRunning)return this.myAccountPlaylistCacheRunning;if(this.myAccountPlaylistCache)return(0,A.of)(this.myAccountPlaylistCache)}const m=this.listAccountPlaylists(p.account,void 0,"-updatedAt",P).pipe((0,L.b)(l=>{P||(this.myAccountPlaylistCacheRunning=void 0,this.myAccountPlaylistCache=l)}),(0,n.B)());return P||(this.myAccountPlaylistCacheRunning=m),m}listAccountPlaylists(p,P,m,l){const r=E.BR.BASE_ACCOUNT_URL+p.nameWithHost+"/video-playlists",s=P?this.restService.componentPaginationToRestPagination(P):void 0;let i=new u.LE;return i=this.restService.addRestGetParams(i,s,m),l&&(i=this.restService.addObjectParams(i,{search:l})),this.authHttp.get(r,{params:i}).pipe((0,g.w)(_=>this.extractPlaylists(_)),(0,M.K)(_=>this.restExtractor.handleError(_)))}getVideoPlaylist(p){return this.authHttp.get(S.BASE_VIDEO_PLAYLIST_URL+p).pipe((0,g.w)(m=>this.extractPlaylist(m)),(0,M.K)(m=>this.restExtractor.handleError(m)))}createVideoPlaylist(p){const P=(0,h.D$)(p);return this.authHttp.post(S.BASE_VIDEO_PLAYLIST_URL,P).pipe((0,L.b)(m=>{!this.myAccountPlaylistCache||(this.myAccountPlaylistCache.total++,this.myAccountPlaylistCache.data.push({id:m.videoPlaylist.id,displayName:p.displayName}),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),(0,M.K)(m=>this.restExtractor.handleError(m)))}updateVideoPlaylist(p,P){const m=(0,h.D$)(P);return this.authHttp.put(S.BASE_VIDEO_PLAYLIST_URL+p.id,m).pipe((0,R.U)(this.restExtractor.extractDataBool),(0,L.b)(()=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.data.find(r=>r.id===p.id).displayName=P.displayName,this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),(0,M.K)(l=>this.restExtractor.handleError(l)))}removeVideoPlaylist(p){return this.authHttp.delete(S.BASE_VIDEO_PLAYLIST_URL+p.id).pipe((0,R.U)(this.restExtractor.extractDataBool),(0,L.b)(()=>{!this.myAccountPlaylistCache||(this.myAccountPlaylistCache.total--,this.myAccountPlaylistCache.data=this.myAccountPlaylistCache.data.filter(P=>P.id!==p.id),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),(0,M.K)(P=>this.restExtractor.handleError(P)))}addVideoInPlaylist(p,P){return this.authHttp.post(S.BASE_VIDEO_PLAYLIST_URL+p+"/videos",P).pipe((0,L.b)(l=>{this.videoExistsCache[P.videoId].push({playlistId:p,playlistElementId:l.videoPlaylistElement.id,startTimestamp:P.startTimestamp,stopTimestamp:P.stopTimestamp}),this.runPlaylistCheck(P.videoId)}),(0,M.K)(l=>this.restExtractor.handleError(l)))}updateVideoOfPlaylist(p,P,m,l){return this.authHttp.put(S.BASE_VIDEO_PLAYLIST_URL+p+"/videos/"+P,m).pipe((0,R.U)(this.restExtractor.extractDataBool),(0,L.b)(()=>{const r=this.videoExistsCache[l];if(r){const s=r.find(i=>i.playlistElementId===P);s.startTimestamp=m.startTimestamp,s.stopTimestamp=m.stopTimestamp}this.runPlaylistCheck(l)}),(0,M.K)(r=>this.restExtractor.handleError(r)))}removeVideoFromPlaylist(p,P,m){return this.authHttp.delete(S.BASE_VIDEO_PLAYLIST_URL+p+"/videos/"+P).pipe((0,R.U)(this.restExtractor.extractDataBool),(0,L.b)(()=>{!m||(this.videoExistsCache[m]&&(this.videoExistsCache[m]=this.videoExistsCache[m].filter(l=>l.playlistElementId!==P)),this.runPlaylistCheck(m))}),(0,M.K)(l=>this.restExtractor.handleError(l)))}reorderPlaylist(p,P,m){return this.authHttp.post(S.BASE_VIDEO_PLAYLIST_URL+p+"/videos/reorder",{startPosition:P,insertAfterPosition:m}).pipe((0,R.U)(this.restExtractor.extractDataBool),(0,M.K)(r=>this.restExtractor.handleError(r)))}getPlaylistVideos(p,P){const m=S.BASE_VIDEO_PLAYLIST_URL+p+"/videos",l=this.restService.componentPaginationToRestPagination(P);let r=new u.LE;return r=this.restService.addRestGetParams(r,l),this.authHttp.get(m,{params:r}).pipe((0,g.w)(s=>this.extractVideoPlaylistElements(s)),(0,M.K)(s=>this.restExtractor.handleError(s)))}listenToMyAccountPlaylistsChange(){return this.myAccountPlaylistCacheSubject.asObservable()}listenToVideoPlaylistChange(p){if(this.videoExistsObservableCache[p])return this.videoExistsObservableCache[p];const P=this.videoExistsInPlaylistObservable.pipe((0,R.U)(m=>m[p]),(0,w.h)(m=>!!m),(0,L.b)(m=>this.videoExistsCache[p]=m));return this.videoExistsObservableCache[p]=P,P}runPlaylistCheck(p){return Z("Running playlist check."),this.videoExistsCache[p]?(Z("Found cache for %d.",p),this.videoExistsInPlaylistCacheSubject.next({[p]:this.videoExistsCache[p]})):(Z("Fetching from network for %d.",p),this.videoExistsInPlaylistNotifier.next(p))}extractPlaylists(p){return this.serverService.getServerLocale().pipe((0,R.U)(P=>{const m=p.data,l=p.total,r=[];for(const s of m)r.push(new H.L(s,P));return{data:r,total:l}}))}extractPlaylist(p){return this.serverService.getServerLocale().pipe((0,R.U)(P=>new H.L(p,P)))}extractVideoPlaylistElements(p){return this.serverService.getServerLocale().pipe((0,R.U)(P=>{const m=p.data,l=p.total,r=[];for(const s of m)r.push(new k.W(s,P));return{total:l,data:r}}))}doVideosExistInPlaylist(p){const P=S.MY_VIDEO_PLAYLIST_URL+"videos-exist";let m=new u.LE;return m=this.restService.addObjectParams(m,{videoIds:p}),this.authHttp.get(P,{params:m,headers:{ignoreLoadingBar:""}}).pipe((0,M.K)(l=>this.restExtractor.handleError(l)))}}S.BASE_VIDEO_PLAYLIST_URL=O.N.apiUrl+"/api/v1/video-playlists/",S.MY_VIDEO_PLAYLIST_URL=O.N.apiUrl+"/api/v1/users/me/video-playlists/",S.\u0275fac=function(p){return new(p||S)(U.LFG(u.eN),U.LFG(Y.NG),U.LFG(Y.DI),U.LFG(Y.vg),U.LFG(U.R0b))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac})}}]);