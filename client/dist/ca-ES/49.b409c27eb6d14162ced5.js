var Di=Object.defineProperty,Ui=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Fi=Object.prototype.propertyIsEnumerable,Or=(F,_,d)=>_ in F?Di(F,_,{enumerable:!0,configurable:!0,writable:!0,value:d}):F[_]=d,nn=(F,_)=>{for(var d in _||(_={}))Ni.call(_,d)&&Or(F,d,_[d]);if(Lr)for(var d of Lr(_))Fi.call(_,d)&&Or(F,d,_[d]);return F},rn=(F,_)=>Ui(F,Mi(_));(self.webpackChunkpeertube_client=self.webpackChunkpeertube_client||[]).push([[49],{29708:F=>{const _=/^\[?([^\]]+)]?:(\d+)$/;let d=new Map;F.exports=function(v){if(1e5===d.size&&d.clear(),!d.has(v)){const w=_.exec(v);if(!w)throw new Error(`invalid addr: ${v}`);d.set(v,[w[1],Number(w[2])])}return d.get(v)}},75745:F=>{function f(n,a,p){let u=0,o=1;for(let s=a;s<p;s++){const h=n[s];if(h<58&&h>=48)u=10*u+(h-48);else if(s!==a||43!==h){if(s===a&&45===h){o=-1;continue}if(46===h)break;throw new Error("not a number: buffer["+s+"] = "+h)}}return u*o}function i(n,a,p,u){return null==n||0===n.length?null:("number"!=typeof a&&null==u&&(u=a,a=void 0),"number"!=typeof p&&null==u&&(u=p,p=void 0),i.position=0,i.encoding=u||null,i.data=Buffer.isBuffer(n)?n.slice(a,p):Buffer.from(n),i.bytes=i.data.length,i.next())}i.bytes=0,i.position=0,i.data=null,i.encoding=null,i.next=function(){switch(i.data[i.position]){case 100:return i.dictionary();case 108:return i.list();case 105:return i.integer();default:return i.buffer()}},i.find=function(n){let a=i.position;const p=i.data.length,u=i.data;for(;a<p;){if(u[a]===n)return a;a++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(n)+'" [0x'+n.toString(16)+"]")},i.dictionary=function(){i.position++;const n={};for(;101!==i.data[i.position];)n[i.buffer()]=i.next();return i.position++,n},i.list=function(){i.position++;const n=[];for(;101!==i.data[i.position];)n.push(i.next());return i.position++,n},i.integer=function(){const n=i.find(101),a=f(i.data,i.position+1,n);return i.position+=n+1-i.position,a},i.buffer=function(){let n=i.find(58);const a=f(i.data,i.position,n),p=++n+a;return i.position=p,i.encoding?i.data.toString(i.encoding,n,p):i.data.slice(n,p)},F.exports=i},37772:(F,_,d)=>{const{getType:x}=d(4373);function v(n,a,p){const u=[];let o=null;return v._encode(u,n),o=Buffer.concat(u),v.bytes=o.length,Buffer.isBuffer(a)?(o.copy(a,p),a):o}v.bytes=-1,v._floatConversionDetected=!1,v._encode=function(n,a){if(null!=a)switch(x(a)){case"buffer":v.buffer(n,a);break;case"object":v.dict(n,a);break;case"map":v.dictMap(n,a);break;case"array":v.list(n,a);break;case"set":v.listSet(n,a);break;case"string":v.string(n,a);break;case"number":case"boolean":v.number(n,a);break;case"arraybufferview":v.buffer(n,Buffer.from(a.buffer,a.byteOffset,a.byteLength));break;case"arraybuffer":v.buffer(n,Buffer.from(a))}};const w=Buffer.from("e"),f=Buffer.from("d"),i=Buffer.from("l");v.buffer=function(n,a){n.push(Buffer.from(a.length+":"),a)},v.string=function(n,a){n.push(Buffer.from(Buffer.byteLength(a)+":"+a))},v.number=function(n,a){const p=2147483648,s=(a/p<<0)*p+(a%p<<0);n.push(Buffer.from("i"+s+"e")),s!==a&&!v._floatConversionDetected&&(v._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+a+'":','Bencoding only defines support for integers, value was converted to "'+s+'"'),console.trace())},v.dict=function(n,a){n.push(f);let u,p=0;const o=Object.keys(a).sort(),s=o.length;for(;p<s;p++)u=o[p],null!=a[u]&&(v.string(n,u),v._encode(n,a[u]));n.push(w)},v.dictMap=function(n,a){n.push(f);const p=Array.from(a.keys()).sort();for(const u of p)null!=a.get(u)&&(Buffer.isBuffer(u)?v._encode(n,u):v.string(n,String(u)),v._encode(n,a.get(u)));n.push(w)},v.list=function(n,a){let p=0;const u=a.length;for(n.push(i);p<u;p++)null!=a[p]&&v._encode(n,a[p]);n.push(w)},v.listSet=function(n,a){n.push(i);for(const p of a)null!=p&&v._encode(n,p);n.push(w)},F.exports=v},75783:(F,_,d)=>{const{digitCount:x,getType:v}=d(4373);F.exports=function p(u){if(null==u)return 0;const s=v(u);switch(s){case"buffer":return x(u.length)+1+u.length;case"arraybufferview":return function(u){const o=u.byteLength-u.byteOffset;return x(o)+1+o}(u);case"string":return function(u){const o=Buffer.byteLength(u);return x(o)+1+o}(u);case"array":case"set":return function(u){let o=2;for(const s of u)o+=p(s);return o}(u);case"number":return 1+x(Math.floor(u))+1;case"bigint":return 1+u.toString().length+1;case"object":return function(u){let o=2;const s=Object.keys(u);for(let h=0;h<s.length;h++){const g=Buffer.byteLength(s[h]);o+=x(g)+1+g,o+=p(u[s[h]])}return o}(u);case"map":return function(u){let o=2;for(const[s,h]of u){const g=Buffer.byteLength(s);o+=x(g)+1+g,o+=p(h)}return o}(u);default:throw new TypeError(`Unsupported value of type "${s}"`)}}},22089:(F,_,d)=>{const x=F.exports;x.encode=d(37772),x.decode=d(75745),x.byteLength=x.encodingLength=d(75783)},4373:F=>{const _=F.exports;_.digitCount=function(x){const v=x<0?1:0;return x=Math.abs(Number(x||1)),Math.floor(Math.log10(x))+1+v},_.getType=function(x){return Buffer.isBuffer(x)?"buffer":ArrayBuffer.isView(x)?"arraybufferview":Array.isArray(x)?"array":x instanceof Number?"number":x instanceof Boolean?"boolean":x instanceof Set?"set":x instanceof Map?"map":x instanceof String?"string":x instanceof ArrayBuffer?"arraybuffer":typeof x}},24427:F=>{function d(x){return x.reduce((w,f,i,n)=>{const a=f.split("-").map(p=>parseInt(p));return w.concat(((w,f=w)=>Array.from({length:f-w+1},(i,n)=>n+w))(...a))},[])}F.exports=d,F.exports.parse=d,F.exports.compose=function(x){return x.reduce((v,w,f,i)=>((0===f||w!==i[f-1]+1)&&v.push([]),v[v.length-1].push(w),v),[]).map(v=>v.length>1?`${v[0]}-${v[v.length-1]}`:`${v[0]}`)}},37046:F=>{F.exports=function(_,d,x,v,w){var f,i;if(void 0===v)v=0;else if((v|=0)<0||v>=_.length)throw new RangeError("invalid lower bound");if(void 0===w)w=_.length-1;else if((w|=0)<v||w>=_.length)throw new RangeError("invalid upper bound");for(;v<=w;)if((i=+x(_[f=v+(w-v>>>1)],d,f,_))<0)v=f+1;else{if(!(i>0))return f;w=f-1}return~v}},19296:(F,_)=>{"use strict";function x(w){var f=w>>3;return w%8!=0&&f++,f}var v=function(){function w(f,i){void 0===f&&(f=0);var n=null==i?void 0:i.grow;this.grow=n&&isFinite(n)&&x(n)||n||0,this.buffer="number"==typeof f?new Uint8Array(x(f)):f}return w.prototype.get=function(f){var i=f>>3;return i<this.buffer.length&&!!(this.buffer[i]&128>>f%8)},w.prototype.set=function(f,i){void 0===i&&(i=!0);var n=f>>3;if(i){if(this.buffer.length<n+1){var a=Math.max(n+1,Math.min(2*this.buffer.length,this.grow));if(a<=this.grow){var p=new Uint8Array(a);p.set(this.buffer),this.buffer=p}}this.buffer[n]|=128>>f%8}else n<this.buffer.length&&(this.buffer[n]&=~(128>>f%8))},w.prototype.forEach=function(f,i,n){void 0===i&&(i=0),void 0===n&&(n=8*this.buffer.length);for(var a=i,p=a>>3,u=128>>a%8,o=this.buffer[p];a<n;a++)f(!!(o&u),a),u=1===u?(o=this.buffer[++p],128):u>>1},w}();_.Z=v},19773:(F,_,d)=>{const x=d(73225),v=d(22089),w=d(19296).Z,f=d(83832),i=d(57115)("bittorrent-protocol"),n=d(75650),a=d(20316),p=d(2755),u=d(73469),o=d(44618),g=Buffer.from("\x13BitTorrent protocol"),T=Buffer.from([0,0,0,0]),E=Buffer.from([0,0,0,1,0]),P=Buffer.from([0,0,0,1,1]),b=Buffer.from([0,0,0,1,2]),C=Buffer.from([0,0,0,1,3]),l=[0,0,0,0,0,0,0,0],m=[0,0,0,3,9,0,0],L=Buffer.from([0,0,0,0,0,0,0,0]),z=Buffer.from([0,0,1,2]),O=Buffer.from([0,0,0,2]);function W(ae,S){for(let B=ae.length;B--;)ae[B]^=S[B];return ae}class Q{constructor(S,B,j,K){this.piece=S,this.offset=B,this.length=j,this.callback=K}}F.exports=class extends u.Duplex{constructor(S=null,B=0,j=!1){super(),this._debugId=n(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=S,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new w(0,{grow:4e5}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=p(),this.downloadSpeed=p(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this._timeoutExpiresAt=null,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this._peEnabled=j,j?(this._dh=f.createDiffieHellman("ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a36210000000000090563","hex",2),this._myPubKey=this._dh.generateKeys("hex")):this._myPubKey=null,this._peerPubKey=null,this._sharedSecret=null,this._peerCryptoProvide=[],this._cryptoHandshakeDone=!1,this._cryptoSyncPattern=null,this._waitMaxBytes=null,this._encryptionMethod=null,this._encryptGenerator=null,this._decryptGenerator=null,this._setGenerators=!1,this.once("finish",()=>this._onFinish()),this.on("finish",this._onFinish),this._debug("type:",this.type),"tcpIncoming"===this.type&&this._peEnabled?this._determineHandshakeType():"tcpOutgoing"===this.type&&this._peEnabled&&0===B?this._parsePe2():this._parseHandshake(null)}setKeepAlive(S){this._debug("setKeepAlive %s",S),clearInterval(this._keepAliveInterval),!1!==S&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(S,B){this._debug("setTimeout ms=%d unref=%s",S,B),this._timeoutMs=S,this._timeoutUnref=!!B,this._resetTimeout(!0)}destroy(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())}end(...S){this._debug("end"),this._onUninterested(),this._onChoke(),super.end(...S)}use(S){const B=S.prototype.name;if(!B)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",B);const j=this._nextExt,K=new S(this);function Y(){}"function"!=typeof K.onHandshake&&(K.onHandshake=Y),"function"!=typeof K.onExtendedHandshake&&(K.onExtendedHandshake=Y),"function"!=typeof K.onMessage&&(K.onMessage=Y),this.extendedMapping[j]=B,this._ext[B]=K,this[B]=K,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(T)}sendPe1(){if(this._peEnabled){const S=Math.floor(513*Math.random()),B=n(S);this._push(Buffer.concat([Buffer.from(this._myPubKey,"hex"),B]))}}sendPe2(){const S=Math.floor(513*Math.random()),B=n(S);this._push(Buffer.concat([Buffer.from(this._myPubKey,"hex"),B]))}sendPe3(S){this.setEncrypt(this._sharedSecret,S);const B=Buffer.from(a.sync(Buffer.from(this._utfToHex("req1")+this._sharedSecret,"hex")),"hex"),Y=W(Buffer.from(a.sync(Buffer.from(this._utfToHex("req2")+S,"hex")),"hex"),Buffer.from(a.sync(Buffer.from(this._utfToHex("req3")+this._sharedSecret,"hex")),"hex")),se=n(2).readUInt16BE(0)%512,G=n(se);let J=Buffer.alloc(14+se+2);L.copy(J),z.copy(J,8),J.writeInt16BE(se,12),G.copy(J,14),J.writeInt16BE(0,14+se),J=this._encryptHandshake(J),this._push(Buffer.concat([B,Y,J]))}sendPe4(S){this.setEncrypt(this._sharedSecret,S);const B=n(2).readUInt16BE(0)%512,j=n(B);let K=Buffer.alloc(14+B);L.copy(K),O.copy(K,8),K.writeInt16BE(B,12),j.copy(K,14),K=this._encryptHandshake(K),this._push(K),this._cryptoHandshakeDone=!0,this._debug("completed crypto handshake")}handshake(S,B,j){let K,Y;if("string"==typeof S?(S=S.toLowerCase(),K=Buffer.from(S,"hex")):(K=S,S=K.toString("hex")),"string"==typeof B?Y=Buffer.from(B,"hex"):(Y=B,B=Y.toString("hex")),this._infoHash=K,20!==K.length||20!==Y.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",S,B,j);const se=Buffer.from(l);se[5]|=16,j&&j.dht&&(se[7]|=1),this._push(Buffer.concat([g,se,K,Y])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const S=Object.assign({},this.extendedHandshake);S.m={};for(const B in this.extendedMapping)S.m[this.extendedMapping[B]]=Number(B);this.extended(0,v.encode(S)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(E)}}unchoke(){!this.amChoking||(this.amChoking=!1,this._debug("unchoke"),this._push(P))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(b))}uninterested(){!this.amInterested||(this.amInterested=!1,this._debug("uninterested"),this._push(C))}have(S){this._debug("have %d",S),this._message(4,[S],null)}bitfield(S){this._debug("bitfield"),Buffer.isBuffer(S)||(S=S.buffer),this._message(5,[],S)}request(S,B,j,K){return K||(K=()=>{}),this._finished?K(new Error("wire is closed")):this.peerChoking?K(new Error("peer is choking")):(this._debug("request index=%d offset=%d length=%d",S,B,j),this.requests.push(new Q(S,B,j,K)),this._timeout||this._resetTimeout(!0),void this._message(6,[S,B,j],null))}piece(S,B,j){this._debug("piece index=%d offset=%d",S,B),this._message(7,[S,B],j),this.uploaded+=j.length,this.uploadSpeed(j.length),this.emit("upload",j.length)}cancel(S,B,j){this._debug("cancel index=%d offset=%d length=%d",S,B,j),this._callback(this._pull(this.requests,S,B,j),new Error("request was cancelled"),null),this._message(8,[S,B,j],null)}port(S){this._debug("port %d",S);const B=Buffer.from(m);B.writeUInt16BE(S,5),this._push(B)}extended(S,B){if(this._debug("extended ext=%s",S),"string"==typeof S&&this.peerExtendedMapping[S]&&(S=this.peerExtendedMapping[S]),"number"!=typeof S)throw new Error(`Unrecognized extension: ${S}`);{const j=Buffer.from([S]),K=Buffer.isBuffer(B)?B:v.encode(B);this._message(20,[],Buffer.concat([j,K]))}}setEncrypt(S,B){let j,K,Y,se,G,J;switch(this.type){case"tcpIncoming":j=a.sync(Buffer.from(this._utfToHex("keyB")+S+B,"hex")),K=a.sync(Buffer.from(this._utfToHex("keyA")+S+B,"hex")),Y=Buffer.from(j,"hex"),se=[];for(const $ of Y.values())se.push($);G=Buffer.from(K,"hex"),J=[];for(const $ of G.values())J.push($);this._encryptGenerator=new o(se),this._decryptGenerator=new o(J);break;case"tcpOutgoing":j=a.sync(Buffer.from(this._utfToHex("keyA")+S+B,"hex")),K=a.sync(Buffer.from(this._utfToHex("keyB")+S+B,"hex")),Y=Buffer.from(j,"hex"),se=[];for(const $ of Y.values())se.push($);G=Buffer.from(K,"hex"),J=[];for(const $ of G.values())J.push($);this._encryptGenerator=new o(se),this._decryptGenerator=new o(J);break;default:return!1}for(let $=0;$<1024;$++)this._encryptGenerator.randomByte(),this._decryptGenerator.randomByte();return this._setGenerators=!0,!0}_read(){}_message(S,B,j){const K=j?j.length:0,Y=Buffer.allocUnsafe(5+4*B.length);Y.writeUInt32BE(Y.length+K-4,0),Y[4]=S;for(let se=0;se<B.length;se++)Y.writeUInt32BE(B[se],5+4*se);this._push(Y),j&&this._push(j)}_push(S){if(!this._finished)return 2===this._encryptionMethod&&this._cryptoHandshakeDone&&(S=this._encrypt(S)),this.push(S)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onPe1(S){this._peerPubKey=S.toString("hex"),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe1")}_onPe2(S){this._peerPubKey=S.toString("hex"),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe2")}_onPe3(S){const B=a.sync(Buffer.from(this._utfToHex("req3")+this._sharedSecret,"hex")),j=W(Buffer.from(B,"hex"),S).toString("hex");this.emit("pe3",j)}_onPe3Encrypted(S,B){if(!S.equals(L))return this._debug("Error: verification constant did not match"),void this.destroy();for(const j of B.values())0!==j&&this._peerCryptoProvide.push(j);this._peerCryptoProvide.includes(2)?this._encryptionMethod=2:(this._debug("Error: RC4 encryption method not provided by peer"),this.destroy())}_onPe4(S){this._encryptionMethod=S.readUInt8(3),z.includes(this._encryptionMethod)||(this._debug("Error: peer selected invalid crypto method"),this.destroy()),this._cryptoHandshakeDone=!0,this._debug("crypto handshake done"),this.emit("pe4")}_onHandshake(S,B,j){const K=S.toString("hex"),Y=B.toString("hex");this._debug("got handshake i=%s p=%s exts=%o",K,Y,j),this.peerId=Y,this.peerIdBuffer=B,this.peerExtensions=j,this.emit("handshake",K,Y,j);for(const se in this._ext)this._ext[se].onHandshake(K,Y,j);j.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(S){this.peerPieces.get(S)||(this._debug("got have %d",S),this.peerPieces.set(S,!0),this.emit("have",S))}_onBitField(S){this.peerPieces=new w(S),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(S,B,j){if(this.amChoking)return;this._debug("got request index=%d offset=%d length=%d",S,B,j);const K=(se,G)=>{if(Y===this._pull(this.peerRequests,S,B,j)){if(se)return this._debug("error satisfying request index=%d offset=%d length=%d (%s)",S,B,j,se.message);this.piece(S,B,G)}},Y=new Q(S,B,j,K);this.peerRequests.push(Y),this.emit("request",S,B,j,K)}_onPiece(S,B,j){this._debug("got piece index=%d offset=%d",S,B),this._callback(this._pull(this.requests,S,B,j.length),null,j),this.downloaded+=j.length,this.downloadSpeed(j.length),this.emit("download",j.length),this.emit("piece",S,B,j)}_onCancel(S,B,j){this._debug("got cancel index=%d offset=%d length=%d",S,B,j),this._pull(this.peerRequests,S,B,j),this.emit("cancel",S,B,j)}_onPort(S){this._debug("got port %d",S),this.emit("port",S)}_onExtended(S,B){if(0===S){let j;try{j=v.decode(B)}catch(K){this._debug("ignoring invalid extended handshake: %s",K.message||K)}if(!j)return;if(this.peerExtendedHandshake=j,"object"==typeof j.m)for(const K in j.m)this.peerExtendedMapping[K]=Number(j.m[K].toString());for(const K in this._ext)this.peerExtendedMapping[K]&&this._ext[K].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[S]&&this._ext[S=this.extendedMapping[S]]&&this._ext[S].onMessage(B),this._debug("got extended message ext=%s",S),this.emit("extended",S,B)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(S,B,j){if(2===this._encryptionMethod&&this._cryptoHandshakeDone&&(S=this._decrypt(S)),this._bufferSize+=S.length,this._buffer.push(S),this._buffer.length>1&&(this._buffer=[Buffer.concat(this._buffer,this._bufferSize)]),this._cryptoSyncPattern){const K=this._buffer[0].indexOf(this._cryptoSyncPattern);if(-1!==K)this._buffer[0]=this._buffer[0].slice(K+this._cryptoSyncPattern.length),this._bufferSize-=K+this._cryptoSyncPattern.length,this._cryptoSyncPattern=null;else if(this._bufferSize+S.length>this._waitMaxBytes+this._cryptoSyncPattern.length)return this._debug("Error: could not resynchronize"),void this.destroy()}for(;this._bufferSize>=this._parserSize&&!this._cryptoSyncPattern;)if(0===this._parserSize)this._parser(Buffer.from([]));else{const K=this._buffer[0];this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[K.slice(this._parserSize)]:[],this._parser(K.slice(0,this._parserSize))}j(null)}_callback(S,B,j){!S||(this._resetTimeout(!this.peerChoking&&!this._finished),S.callback(B,j))}_resetTimeout(S){if(!S||!this._timeoutMs||!this.requests.length)return clearTimeout(this._timeout),this._timeout=null,void(this._timeoutExpiresAt=null);const B=Date.now()+this._timeoutMs;if(this._timeout){if(B-this._timeoutExpiresAt<.05*this._timeoutMs)return;clearTimeout(this._timeout)}this._timeoutExpiresAt=B,this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref()}_parse(S,B){this._parserSize=S,this._parser=B}_parseUntil(S,B){this._cryptoSyncPattern=S,this._waitMaxBytes=B}_onMessageLength(S){const B=S.readUInt32BE(0);B>0?this._parse(B,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(S){switch(this._parse(4,this._onMessageLength),S[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(S.readUInt32BE(1));case 5:return this._onBitField(S.slice(1));case 6:return this._onRequest(S.readUInt32BE(1),S.readUInt32BE(5),S.readUInt32BE(9));case 7:return this._onPiece(S.readUInt32BE(1),S.readUInt32BE(5),S.slice(9));case 8:return this._onCancel(S.readUInt32BE(1),S.readUInt32BE(5),S.readUInt32BE(9));case 9:return this._onPort(S.readUInt16BE(1));case 20:return this._onExtended(S.readUInt8(1),S.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",S)}}_determineHandshakeType(){this._parse(1,S=>{const B=S.readUInt8(0);19===B?this._parse(B+48,this._onHandshakeBuffer):this._parsePe1(S)})}_parsePe1(S){this._parse(95,B=>{this._onPe1(Buffer.concat([S,B])),this._parsePe3()})}_parsePe2(){this._parse(96,S=>{for(this._onPe2(S);!this._setGenerators;);this._parsePe4()})}_parsePe3(){const S=Buffer.from(a.sync(Buffer.from(this._utfToHex("req1")+this._sharedSecret,"hex")),"hex");this._parseUntil(S,512),this._parse(20,B=>{for(this._onPe3(B);!this._setGenerators;);this._parsePe3Encrypted()})}_parsePe3Encrypted(){this._parse(14,S=>{const B=this._decryptHandshake(S.slice(0,8)),j=this._decryptHandshake(S.slice(8,12)),K=this._decryptHandshake(S.slice(12,14)).readUInt16BE(0);this._parse(K,Y=>{Y=this._decryptHandshake(Y),this._parse(2,se=>{const G=this._decryptHandshake(se).readUInt16BE(0);this._parse(G,J=>{J=this._decryptHandshake(J),this._onPe3Encrypted(B,j,Y,J);const $=G?J.readUInt8(0):null,le=G?J.slice(1,20):null;19===$&&"BitTorrent protocol"===le.toString()?this._onHandshakeBuffer(J.slice(1)):this._parseHandshake()})})})})}_parsePe4(){const S=this._decryptHandshake(L);this._parseUntil(S,512),this._parse(6,B=>{const j=this._decryptHandshake(B.slice(0,4)),K=this._decryptHandshake(B.slice(4,6)).readUInt16BE(0);this._parse(K,Y=>{this._decryptHandshake(Y),this._onPe4(j),this._parseHandshake(null)})})}_parseHandshake(){this._parse(1,S=>{const B=S.readUInt8(0);if(19!==B)return this._debug("Error: wire not speaking BitTorrent protocol (%s)",B.toString()),void this.end();this._parse(B+48,this._onHandshakeBuffer)})}_onHandshakeBuffer(S){const B=S.slice(0,19);if("BitTorrent protocol"!==B.toString())return this._debug("Error: wire not speaking BitTorrent protocol (%s)",B.toString()),void this.end();S=S.slice(19),this._onHandshake(S.slice(8,28),S.slice(28,48),{dht:!!(1&S[7]),extended:!!(16&S[5])}),this._parse(4,this._onMessageLength)}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...S){S[0]=`[${this._debugId}] ${S[0]}`,i(...S)}_pull(S,B,j,K){for(let Y=0;Y<S.length;Y++){const se=S[Y];if(se.piece===B&&se.offset===j&&se.length===K)return x(S,Y),se}return null}_encryptHandshake(S){const B=Buffer.from(S);if(!this._encryptGenerator)return this._debug("Warning: Encrypting without any generator"),B;for(let j=0;j<S.length;j++){const K=this._encryptGenerator.randomByte();B[j]=B[j]^K}return B}_encrypt(S){const B=Buffer.from(S);if(!this._encryptGenerator||2!==this._encryptionMethod)return B;for(let j=0;j<S.length;j++){const K=this._encryptGenerator.randomByte();B[j]=B[j]^K}return B}_decryptHandshake(S){const B=Buffer.from(S);if(!this._decryptGenerator)return this._debug("Warning: Decrypting without any generator"),B;for(let j=0;j<S.length;j++){const K=this._decryptGenerator.randomByte();B[j]=B[j]^K}return B}_decrypt(S){const B=Buffer.from(S);if(!this._decryptGenerator||2!==this._encryptionMethod)return B;for(let j=0;j<S.length;j++){const K=this._decryptGenerator.randomByte();B[j]=B[j]^K}return B}_utfToHex(S){return Buffer.from(S,"utf8").toString("hex")}}},98390:F=>{F.exports=function(d,x){if("undefined"==typeof Blob||!(d instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof x)throw new Error("second argument must be a function");const v=new FileReader;v.addEventListener("loadend",function w(f){v.removeEventListener("loadend",w,!1),f.error?x(f.error):x(null,Buffer.from(v.result))},!1),v.readAsArrayBuffer(d)}},29671:(F,_,d)=>{const{Transform:x}=d(73469);F.exports=class extends x{constructor(f,i={}){super(i),"object"==typeof f&&(f=(i=f).size),this.size=f||512;const{nopad:n,zeroPadding:a=!0}=i;this._zeroPadding=!n&&!!a,this._buffered=[],this._bufferedBytes=0}_transform(f,i,n){for(this._bufferedBytes+=f.length,this._buffered.push(f);this._bufferedBytes>=this.size;){this._bufferedBytes-=this.size;const a=[];let p=0;for(;p<this.size;){const u=this._buffered.shift();if(p+u.length<=this.size)a.push(u),p+=u.length;else{const o=this.size-p;a.push(u.slice(0,o)),p+=o,this._buffered.unshift(u.slice(o))}}this.push(Buffer.concat(a,this.size))}n()}_flush(){if(this._bufferedBytes&&this._zeroPadding){const f=Buffer.alloc(this.size-this._bufferedBytes);this._buffered.push(f),this.push(Buffer.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(Buffer.concat(this._buffered)),this._buffered=null);this.push(null)}}},68290:F=>{F.exports=function(d){if("number"!=typeof d)throw new TypeError('"size" argument must be a number');if(d<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(d):new Buffer(d)}},96371:(F,_,d)=>{var x=d(52650),v=d(68290);F.exports=function(f,i,n){if("number"!=typeof f)throw new TypeError('"size" argument must be a number');if(f<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(f,i,n);var a=v(f);return 0===f?a:void 0===i?x(a,0):("string"!=typeof n&&(n=void 0),x(a,i,n))}},52650:F=>{var _=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var f=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return f.fill("ab","ucs2"),"61006200"===f.toString("hex")}catch(i){return!1}}();function x(f,i,n,a){if(n<0||a>f.length)throw new RangeError("Out of range index");return(a=void 0===a?f.length:a>>>0)>(n>>>=0)&&f.fill(i,n,a),f}F.exports=function(f,i,n,a,p){if(_)return f.fill(i,n,a,p);if("number"==typeof i)return x(f,i,n,a);if("string"==typeof i){if("string"==typeof n?(p=n,n=0,a=f.length):"string"==typeof a&&(p=a,a=f.length),void 0!==p&&"string"!=typeof p)throw new TypeError("encoding must be a string");if("latin1"===p&&(p="binary"),"string"==typeof p&&!Buffer.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(""===i)return x(f,0,n,a);if(function(f){return 1===f.length&&f.charCodeAt(0)<256}(i))return x(f,i.charCodeAt(0),n,a);i=new Buffer(i,p)}return Buffer.isBuffer(i)?function(f,i,n,a){if(n<0||a>f.length)throw new RangeError("Out of range index");if(a<=n)return f;a=void 0===a?f.length:a>>>0;for(var p=n>>>=0,u=i.length;p<=a-u;)i.copy(f,p),p+=u;return p!==a&&i.copy(f,p,0,a-p),f}(f,i,n,a):x(f,0,n,a)}},61320:F=>{F.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},26981:(F,_,d)=>{const x=d(36620),v=d(41965);F.exports=class{constructor(i,n){if(this.store=i,this.chunkLength=i.chunkLength,this.inProgressGets=new Map,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.cache=new x(n)}put(i,n,a=(()=>{})){if(!this.cache)return v(()=>a(new Error("CacheStore closed")));this.cache.remove(i),this.store.put(i,n,a)}get(i,n,a=(()=>{})){if("function"==typeof n)return this.get(i,null,n);if(!this.cache)return v(()=>a(new Error("CacheStore closed")));n||(n={});let p=this.cache.get(i);if(p){const s=n.offset||0,h=n.length||p.length-s;return(0!==s||h!==p.length)&&(p=p.slice(s,h+s)),v(()=>a(null,p))}let u=this.inProgressGets.get(i);const o=!!u;u||(u=[],this.inProgressGets.set(i,u)),u.push({opts:n,cb:a}),o||this.store.get(i,(s,h)=>{!s&&null!=this.cache&&this.cache.set(i,h);const g=this.inProgressGets.get(i);this.inProgressGets.delete(i);for(const{opts:T,cb:E}of g)if(s)E(s);else{const P=T.offset||0,b=T.length||h.length-P;let C=h;(0!==P||b!==h.length)&&(C=h.slice(P,b+P)),E(null,C)}})}close(i=(()=>{})){if(!this.cache)return v(()=>i(new Error("CacheStore closed")));this.cache=null,this.store.close(i)}destroy(i=(()=>{})){if(!this.cache)return v(()=>i(new Error("CacheStore closed")));this.cache=null,this.store.destroy(i)}}},29114:(F,_,d)=>{const x=d(29671),v=d(73469);F.exports=class extends v.Writable{constructor(i,n,a={}){if(super(a),!i||!i.put||!i.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(!(n=Number(n)))throw new Error("Second argument must be a chunk length");const p=void 0!==a.zeroPadding&&a.zeroPadding;this._blockstream=new x(n,rn(nn({},a),{zeroPadding:p})),this._outstandingPuts=0,this._storeMaxOutstandingPuts=a.storeMaxOutstandingPuts||16;let u=0;this._blockstream.on("data",s=>{this.destroyed||(this._outstandingPuts+=1,this._outstandingPuts>=this._storeMaxOutstandingPuts&&this._blockstream.pause(),i.put(u,s,h=>{if(h)return this.destroy(h);this._outstandingPuts-=1,this._outstandingPuts<this._storeMaxOutstandingPuts&&this._blockstream.resume(),0===this._outstandingPuts&&"function"==typeof this._finalCb&&(this._finalCb(null),this._finalCb=null)}),u+=1)}).on("error",s=>{this.destroy(s)})}_write(i,n,a){this._blockstream.write(i,n,a)}_final(i){this._blockstream.end(),this._blockstream.once("end",()=>{0===this._outstandingPuts?i(null):this._finalCb=i})}destroy(i){this.destroyed||(this.destroyed=!0,i&&this.emit("error",i),this.emit("close"))}}},29299:F=>{F.exports=function(){for(var d=navigator.hardwareConcurrency||1,x=[],v=0;v<d;v++)x.push({model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});return x}},97348:(F,_,d)=>{const x=d(22089),v=d(29671),w=d(97816),f=d(49899),i=d(80757),n=d(30970),a=d(23653),p=d(16079),u=d(55211),o=d(84032),s=d(41965),h=d(20316),g=d(73469),T=d(62528);function C(S,B,j){if(function(S){return"undefined"!=typeof FileList&&S instanceof FileList}(S)&&(S=Array.from(S)),Array.isArray(S)||(S=[S]),0===S.length)throw new Error("invalid input type");S.forEach($=>{if(null==$)throw new Error(`invalid input type: ${$}`)}),1===(S=S.map($=>z($)&&"string"==typeof $.path&&"function"==typeof T?$.path:$)).length&&"string"!=typeof S[0]&&!S[0].name&&(S[0].name=B.name);let K=null;S.forEach(($,le)=>{if("string"==typeof $)return;let pe=$.fullPath||$.name;pe||(pe=`Unknown File ${le+1}`,$.unknownName=!0),$.path=pe.split("/"),$.path[0]||$.path.shift(),$.path.length<2?K=null:0===le&&S.length>1?K=$.path[0]:$.path[0]!==K&&(K=null)}),(void 0===B.filterJunkFiles||B.filterJunkFiles)&&(S=S.filter($=>"string"==typeof $||!M($.path))),K&&S.forEach($=>{const le=(Buffer.isBuffer($)||W($))&&!$.path;"string"==typeof $||le||$.path.shift()}),!B.name&&K&&(B.name=K),B.name||S.some($=>"string"==typeof $?(B.name=f.basename($),!0):!$.unknownName&&(B.name=$.path[$.path.length-1],!0)),B.name||(B.name=`Unnamed Torrent ${Date.now()}`);const se=S.reduce(($,le)=>$+Number("string"==typeof le),0);let G=1===S.length;if(1===S.length&&"string"==typeof S[0]){if("function"!=typeof T)throw new Error("filesystem paths do not work in the browser");n(S[0],($,le)=>{if($)return j($);G=le,J()})}else s(J);function J(){o(S.map($=>le=>{const pe={};if(z($))pe.getStream=function(S){return()=>new i(S)}($),pe.length=$.size;else if(Buffer.isBuffer($))pe.getStream=function(S){return()=>{const B=new g.PassThrough;return B.end(S),B}}($),pe.length=$.length;else{if(!W($)){if("string"==typeof $){if("function"!=typeof T)throw new Error("filesystem paths do not work in the browser");return void T($,se>1||G,le)}throw new Error("invalid input type")}pe.getStream=function(S,B){return()=>{const j=new g.Transform;return j._transform=function(K,Y,se){B.length+=K.length,this.push(K),se()},S.pipe(j),j}}($,pe),pe.length=0}pe.path=$.path,le(null,pe)}),($,le)=>{if($)return j($);le=le.flat(),j(null,le,G)})}}function M(S){const B=S[S.length-1];return"."===B[0]&&a.is(B)}function L(S,B){return S+B.length}function z(S){return"undefined"!=typeof Blob&&S instanceof Blob}function W(S){return"object"==typeof S&&null!=S&&"function"==typeof S.pipe}F.exports=function(S,B,j){"function"==typeof B&&([B,j]=[j,B]),C(S,B=B?Object.assign({},B):{},(K,Y,se)=>{if(K)return j(K);B.singleFileTorrent=se,function(S,B,j){let K=B.announceList;K||("string"==typeof B.announce?K=[[B.announce]]:Array.isArray(B.announce)&&(K=B.announce.map(J=>[J]))),K||(K=[]),globalThis.WEBTORRENT_ANNOUNCE&&("string"==typeof globalThis.WEBTORRENT_ANNOUNCE?K.push([[globalThis.WEBTORRENT_ANNOUNCE]]):Array.isArray(globalThis.WEBTORRENT_ANNOUNCE)&&(K=K.concat(globalThis.WEBTORRENT_ANNOUNCE.map(J=>[J])))),void 0===B.announce&&void 0===B.announceList&&(K=K.concat(F.exports.announceList)),"string"==typeof B.urlList&&(B.urlList=[B.urlList]);const Y={info:{name:B.name},"creation date":Math.ceil((Number(B.creationDate)||Date.now())/1e3),encoding:"UTF-8"};0!==K.length&&(Y.announce=K[0][0],Y["announce-list"]=K),void 0!==B.comment&&(Y.comment=B.comment),void 0!==B.createdBy&&(Y["created by"]=B.createdBy),void 0!==B.private&&(Y.info.private=Number(B.private)),void 0!==B.info&&Object.assign(Y.info,B.info),void 0!==B.sslCert&&(Y.info["ssl-cert"]=B.sslCert),void 0!==B.urlList&&(Y["url-list"]=B.urlList);const se=S.reduce(L,0),G=B.pieceLength||w(se);Y.info["piece length"]=G,function(S,B,j,K,Y){Y=u(Y);const se=[];let G=0,J=0;const $=S.map(Fe=>Fe.getStream);let le=0,pe=0,te=!1;const ve=new p($),Be=new v(B,{zeroPadding:!1});function De(Fe){G+=Fe.length;const We=pe;h(Fe,st=>{se[We]=st,le-=1,le<5&&Be.resume(),J+=Fe.length,K.onProgress&&K.onProgress(J,j),Te()}),le+=1,le>=5&&Be.pause(),pe+=1}function Me(){te=!0,Te()}function et(Fe){Pe(),Y(Fe)}function Pe(){ve.removeListener("error",et),Be.removeListener("data",De),Be.removeListener("end",Me),Be.removeListener("error",et)}function Te(){te&&0===le&&(Pe(),Y(null,Buffer.from(se.join(""),"hex"),G))}ve.on("error",et),ve.pipe(Be).on("data",De).on("end",Me).on("error",et)}(S,G,se,B,(J,$,le)=>{if(J)return j(J);Y.info.pieces=$,S.forEach(pe=>{delete pe.getStream}),B.singleFileTorrent?Y.info.length=le:Y.info.files=S,j(null,x.encode(Y))})}(Y,B,j)})},F.exports.parseInput=function(S,B,j){"function"==typeof B&&([B,j]=[j,B]),C(S,B=B?Object.assign({},B):{},j)},F.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"]],F.exports.isJunkPath=M},67048:(F,_,d)=>{var x=d(55211),v=function(){},i=function(n,a,p){if("function"==typeof a)return i(n,null,a);a||(a={}),p=x(p||v);var u=n._writableState,o=n._readableState,s=a.readable||!1!==a.readable&&n.readable,h=a.writable||!1!==a.writable&&n.writable,g=!1,T=function(){n.writable||E()},E=function(){h=!1,s||p.call(n)},P=function(){s=!1,h||p.call(n)},b=function(M){p.call(n,M?new Error("exited with error code: "+M):null)},C=function(M){p.call(n,M)},l=function(){process.nextTick(m)},m=function(){if(!g){if(s&&(!o||!o.ended||o.destroyed))return p.call(n,new Error("premature close"));if(h&&(!u||!u.ended||u.destroyed))return p.call(n,new Error("premature close"))}},U=function(){n.req.on("finish",E)};return function(n){return n.setHeader&&"function"==typeof n.abort}(n)?(n.on("complete",E),n.on("abort",l),n.req?U():n.on("request",U)):h&&!u&&(n.on("end",T),n.on("close",T)),function(n){return n.stdio&&Array.isArray(n.stdio)&&3===n.stdio.length}(n)&&n.on("exit",b),n.on("end",P),n.on("finish",E),!1!==a.error&&n.on("error",C),n.on("close",l),function(){g=!0,n.removeListener("complete",E),n.removeListener("abort",l),n.removeListener("request",U),n.req&&n.req.removeListener("finish",E),n.removeListener("end",T),n.removeListener("close",T),n.removeListener("finish",E),n.removeListener("exit",b),n.removeListener("end",P),n.removeListener("error",C),n.removeListener("close",l)}};F.exports=i},86074:F=>{F.exports=class{constructor(d){if(!(d>0)||0!=(d-1&d))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(d),this.mask=d-1,this.top=0,this.btm=0,this.next=null}push(d){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=d,this.top=this.top+1&this.mask,!0)}shift(){const d=this.buffer[this.btm];if(void 0!==d)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,d}isEmpty(){return void 0===this.buffer[this.btm]}}},44537:(F,_,d)=>{const x=d(86074);F.exports=class{constructor(w){this.hwm=w||16,this.head=new x(this.hwm),this.tail=this.head}push(w){this.head.push(w)||(this.head=this.head.next=new x(2*this.head.buffer.length),this.head.push(w))}shift(){const w=this.tail.shift();if(void 0===w&&this.tail.next){const f=this.tail.next;return this.tail.next=null,this.tail=f,this.tail.shift()}return w}isEmpty(){return this.head.isEmpty()}}},80757:(F,_,d)=>{const{Readable:x}=d(73469),v=d(65569);F.exports=class extends x{constructor(i,n={}){super(n),this._offset=0,this._ready=!1,this._file=i,this._size=i.size,this._chunkSize=n.chunkSize||Math.max(this._size/1e3,204800);const a=new FileReader;a.onload=()=>{this.push(v(a.result))},a.onerror=()=>{this.emit("error",a.error)},this.reader=a,this._generateHeaderBlocks(i,n,(p,u)=>{if(p)return this.emit("error",p);Array.isArray(u)&&u.forEach(o=>this.push(o)),this._ready=!0,this.emit("_ready")})}_generateHeaderBlocks(i,n,a){a(null,[])}_read(){if(!this._ready)return void this.once("_ready",this._read.bind(this));const i=this._offset;let n=this._offset+this._chunkSize;if(n>this._size&&(n=this._size),i===this._size)return this.destroy(),void this.push(null);this.reader.readAsArrayBuffer(this._file.slice(i,n)),this._offset=n}destroy(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(i){}}this.reader=null}}},86030:(F,_,d)=>{var x=d(42107),v=d(56099),w=F.exports;for(var f in x)x.hasOwnProperty(f)&&(w[f]=x[f]);function i(n){if("string"==typeof n&&(n=v.parse(n)),n.protocol||(n.protocol="https:"),"https:"!==n.protocol)throw new Error('Protocol "'+n.protocol+'" not supported. Expected "https:"');return n}w.request=function(n,a){return n=i(n),x.request.call(this,n,a)},w.get=function(n,a){return n=i(n),x.get.call(this,n,a)}},87806:(F,_,d)=>{const x=d(41965);F.exports=class{constructor(f){if(this.store=f,this.chunkLength=f.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(f,i,n=(()=>{})){this.mem[f]=i,this.store.put(f,i,a=>{this.mem[f]=null,n(a)})}get(f,i,n=(()=>{})){if("function"==typeof i)return this.get(f,null,i);let a=this.mem[f];if(!a)return this.store.get(f,i,n);i||(i={});const p=i.offset||0,u=i.length||a.length-p;(0!==p||u!==a.length)&&(a=a.slice(p,u+p)),x(()=>n(null,a))}close(f=(()=>{})){this.store.close(f)}destroy(f=(()=>{})){this.store.destroy(f)}}},11719:F=>{F.exports=function(x){for(var v=0,w=x.length;v<w;++v)if(x.charCodeAt(v)>127)return!1;return!0}},49628:F=>{F.exports=x,x.strict=v,x.loose=w;var _=Object.prototype.toString,d={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function x(f){return v(f)||w(f)}function v(f){return f instanceof Int8Array||f instanceof Int16Array||f instanceof Int32Array||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Uint16Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array}function w(f){return d[_.call(f)]}},23653:(F,_)=>{"use strict";_.re=()=>{throw new Error("`junk.re` was renamed to `junk.regex`")},_.regex=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^Desktop\\.ini$","@eaDir$"].join("|")),_.is=x=>_.regex.test(x),_.not=x=>!_.is(x),_.default=F.exports},52968:(F,_,d)=>{_.RateLimiter=d(14711),_.TokenBucket=d(83694)},380:F=>{F.exports=function(){if("undefined"!=typeof process&&process.hrtime){var d=process.hrtime();return 1e3*d[0]+Math.floor(d[1]/1e6)}return(new Date).getTime()}},14711:(F,_,d)=>{var x=d(83694),v=d(380),w=function(f,i,n){this.tokenBucket=new x(f,f,i,null),this.tokenBucket.content=f,this.curIntervalStart=v(),this.tokensThisInterval=0,this.fireImmediately=n};w.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(f,i){if(f>this.tokenBucket.bucketSize)return process.nextTick(i.bind(null,"Requested tokens "+f+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var n=this,a=v();if((a<this.curIntervalStart||a-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=a,this.tokensThisInterval=0),f>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(i.bind(null,null,-1));else{var p=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-a);setTimeout(function(){n.tokenBucket.removeTokens(f,u)},p)}return!1}return this.tokenBucket.removeTokens(f,u);function u(o,s){if(o)return i(o,null);n.tokensThisInterval+=f,i(null,s)}},tryRemoveTokens:function(f){if(f>this.tokenBucket.bucketSize)return!1;var i=v();if((i<this.curIntervalStart||i-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=i,this.tokensThisInterval=0),f>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var n=this.tokenBucket.tryRemoveTokens(f);return n&&(this.tokensThisInterval+=f),n},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},F.exports=w},83694:F=>{var _=function(d,x,v,w){if(this.bucketSize=d,this.tokensPerInterval=x,"string"==typeof v)switch(v){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+v)}else this.interval=v;this.parentBucket=w,this.content=0,this.lastDrip=+new Date};_.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(d,x){var v=this;return this.bucketSize?d>this.bucketSize?(process.nextTick(x.bind(null,"Requested tokens "+d+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),d>this.content?w():this.parentBucket?this.parentBucket.removeTokens(d,function(f,i){return f?x(f,null):d>v.content?w():(v.content-=d,void x(null,Math.min(i,v.content)))}):(this.content-=d,process.nextTick(x.bind(null,null,this.content)),!0)):(process.nextTick(x.bind(null,null,d,Number.POSITIVE_INFINITY)),!0);function w(){var f=Math.ceil(v.interval/v.tokensPerInterval*(d-v.content));return setTimeout(function(){v.removeTokens(d,x)},f),!1}},tryRemoveTokens:function(d){return!this.bucketSize||!(d>this.bucketSize||(this.drip(),d>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(d))&&(this.content-=d,!0)},drip:function(){if(this.tokensPerInterval){var d=+new Date,x=Math.max(d-this.lastDrip,0);this.lastDrip=d,this.content=Math.min(this.content+x*(this.tokensPerInterval/this.interval),this.bucketSize)}else this.content=this.bucketSize}},F.exports=_},36620:(F,_,d)=>{var x=d(43674),v=d(18134);function w(f){if(!(this instanceof w))return new w(f);"number"==typeof f&&(f={max:f}),f||(f={}),x.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=f.max||1e3,this.maxAge=f.maxAge||0}F.exports=w,v(w,x.EventEmitter),Object.defineProperty(w.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),w.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},w.prototype.remove=function(f){if("string"!=typeof f&&(f=""+f),this.cache.hasOwnProperty(f)){var i=this.cache[f];return delete this.cache[f],this._unlink(f,i.prev,i.next),i.value}},w.prototype._unlink=function(f,i,n){this.length--,0===this.length?this.head=this.tail=null:this.head===f?(this.head=i,this.cache[this.head].next=null):this.tail===f?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[i].next=n,this.cache[n].prev=i)},w.prototype.peek=function(f){if(this.cache.hasOwnProperty(f)){var i=this.cache[f];if(this._checkAge(f,i))return i.value}},w.prototype.set=function(f,i){var n;if("string"!=typeof f&&(f=""+f),this.cache.hasOwnProperty(f)){if((n=this.cache[f]).value=i,this.maxAge&&(n.modified=Date.now()),f===this.head)return i;this._unlink(f,n.prev,n.next)}else n={value:i,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[f]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=f),this.head=f,this.tail||(this.tail=f),i},w.prototype._checkAge=function(f,i){return!(this.maxAge&&Date.now()-i.modified>this.maxAge&&(this.remove(f),this.emit("evict",{key:f,value:i.value}),1))},w.prototype.get=function(f){if("string"!=typeof f&&(f=""+f),this.cache.hasOwnProperty(f)){var i=this.cache[f];if(this._checkAge(f,i))return this.head!==f&&(f===this.tail?(this.tail=i.next,this.cache[this.tail].prev=null):this.cache[i.prev].next=i.next,this.cache[i.next].prev=i.prev,this.cache[this.head].next=f,i.prev=this.head,i.next=null,this.head=f),i.value}},w.prototype.evict=function(){if(this.tail){var f=this.tail,i=this.remove(this.tail);this.emit("evict",{key:f,value:i})}}},19538:(F,_,d)=>{const x=d(73225),{EventEmitter:v}=d(43674),w=d(57115)("lt_donthave");F.exports=()=>{class f extends v{constructor(n){super(),this._peerSupports=!1,this._wire=n}onExtendedHandshake(){this._peerSupports=!0}onMessage(n){let a;try{a=n.readUInt32BE()}catch(p){return}!this._wire.peerPieces.get(a)||(w("got donthave %d",a),this._wire.peerPieces.set(a,!1),this.emit("donthave",a),this._failRequests(a))}donthave(n){if(!this._peerSupports)return;w("donthave %d",n);const a=Buffer.alloc(4);a.writeUInt32BE(n),this._wire.extended("lt_donthave",a)}_failRequests(n){const a=this._wire.requests;for(let p=0;p<a.length;p++){const u=a[p];u.piece===n&&(x(a,p),p-=1,this._wire._callback(u,new Error("peer sent donthave"),null))}}}return f.prototype.name="lt_donthave",f}},29109:(F,_,d)=>{F.exports=w,F.exports.decode=w,F.exports.encode=function(i){i=Object.assign({},i);let n=new Set;i.xt&&"string"==typeof i.xt&&n.add(i.xt),i.xt&&Array.isArray(i.xt)&&(n=new Set(i.xt)),i.infoHashBuffer&&n.add(`urn:btih:${i.infoHashBuffer.toString("hex")}`),i.infoHash&&n.add(`urn:btih:${i.infoHash}`),i.infoHashV2Buffer&&n.add(i.xt=`urn:btmh:1220${i.infoHashV2Buffer.toString("hex")}`),i.infoHashV2&&n.add(`urn:btmh:1220${i.infoHashV2}`);const a=Array.from(n);1===a.length&&(i.xt=a[0]),a.length>1&&(i.xt=a),i.publicKeyBuffer&&(i.xs=`urn:btpk:${i.publicKeyBuffer.toString("hex")}`),i.publicKey&&(i.xs=`urn:btpk:${i.publicKey}`),i.name&&(i.dn=i.name),i.keywords&&(i.kt=i.keywords),i.announce&&(i.tr=i.announce),i.urlList&&(i.ws=i.urlList,delete i.as),i.peerAddresses&&(i["x.pe"]=i.peerAddresses);let p="magnet:?";return Object.keys(i).filter(u=>2===u.length||"x.pe"===u).forEach((u,o)=>{const s=Array.isArray(i[u])?i[u]:[i[u]];s.forEach((h,g)=>{(o>0||g>0)&&("kt"!==u&&"so"!==u||0===g)&&(p+="&"),"dn"===u&&(h=encodeURIComponent(h).replace(/%20/g,"+")),("tr"===u||"as"===u||"ws"===u)&&(h=encodeURIComponent(h)),"xs"===u&&!h.startsWith("urn:btpk:")&&(h=encodeURIComponent(h)),"kt"===u&&(h=encodeURIComponent(h)),"so"!==u&&(p+="kt"===u&&g>0?`+${h}`:`${u}=${h}`)}),"so"===u&&(p+=`${u}=${v.compose(s)}`)}),p};const x=d(89759),v=d(24427);function w(i){const n={},a=i.split("magnet:?")[1];let u;return(a&&a.length>=0?a.split("&"):[]).forEach(o=>{const s=o.split("=");if(2!==s.length)return;const h=s[0];let g=s[1];"dn"===h&&(g=decodeURIComponent(g).replace(/\+/g," ")),("tr"===h||"xs"===h||"as"===h||"ws"===h)&&(g=decodeURIComponent(g)),"kt"===h&&(g=decodeURIComponent(g).split("+")),"ix"===h&&(g=Number(g)),"so"===h&&(g=v.parse(decodeURIComponent(g).split(","))),n[h]?(Array.isArray(n[h])||(n[h]=[n[h]]),n[h].push(g)):n[h]=g}),n.xt&&(Array.isArray(n.xt)?n.xt:[n.xt]).forEach(s=>{if(u=s.match(/^urn:btih:(.{40})/))n.infoHash=u[1].toLowerCase();else if(u=s.match(/^urn:btih:(.{32})/)){const h=x.decode(u[1]);n.infoHash=Buffer.from(h,"binary").toString("hex")}else(u=s.match(/^urn:btmh:1220(.{64})/))&&(n.infoHashV2=u[1].toLowerCase())}),n.xs&&(Array.isArray(n.xs)?n.xs:[n.xs]).forEach(s=>{(u=s.match(/^urn:btpk:(.{64})/))&&(n.publicKey=u[1].toLowerCase())}),n.infoHash&&(n.infoHashBuffer=Buffer.from(n.infoHash,"hex")),n.infoHashV2&&(n.infoHashV2Buffer=Buffer.from(n.infoHashV2,"hex")),n.publicKey&&(n.publicKeyBuffer=Buffer.from(n.publicKey,"hex")),n.dn&&(n.name=n.dn),n.kt&&(n.keywords=n.kt),n.announce=[],("string"==typeof n.tr||Array.isArray(n.tr))&&(n.announce=n.announce.concat(n.tr)),n.urlList=[],("string"==typeof n.as||Array.isArray(n.as))&&(n.urlList=n.urlList.concat(n.as)),("string"==typeof n.ws||Array.isArray(n.ws))&&(n.urlList=n.urlList.concat(n.ws)),n.peerAddresses=[],("string"==typeof n["x.pe"]||Array.isArray(n["x.pe"]))&&(n.peerAddresses=n.peerAddresses.concat(n["x.pe"])),n.announce=Array.from(new Set(n.announce)),n.urlList=Array.from(new Set(n.urlList)),n.peerAddresses=Array.from(new Set(n.peerAddresses)),n}},77847:(F,_,d)=>{F.exports=n;var x=d(18134),v=d(73469),w=d(62348),f="undefined"!=typeof window&&window.MediaSource;function n(o,s){var h=this;if(!(h instanceof n))return new n(o,s);if(!f)throw new Error("web browser lacks MediaSource support");s||(s={}),h._debug=s.debug,h._bufferDuration=s.bufferDuration||60,h._elem=o,h._mediaSource=new f,h._streams=[],h.detailedError=null,h._errorHandler=function(){h._elem.removeEventListener("error",h._errorHandler),h._streams.slice().forEach(function(T){T.destroy(h._elem.error)})},h._elem.addEventListener("error",h._errorHandler),h._elem.src=window.URL.createObjectURL(h._mediaSource)}function a(o,s){var h=this;if(v.Writable.call(h),h._wrapper=o,h._elem=o._elem,h._mediaSource=o._mediaSource,h._allStreams=o._streams,h._allStreams.push(h),h._bufferDuration=o._bufferDuration,h._sourceBuffer=null,h._debugBuffers=[],h._openHandler=function(){h._onSourceOpen()},h._flowHandler=function(){h._flow()},h._errorHandler=function(g){h.destroyed||h.emit("error",g)},"string"==typeof s)h._type=s,"open"===h._mediaSource.readyState?h._createSourceBuffer():h._mediaSource.addEventListener("sourceopen",h._openHandler);else if(null===s._sourceBuffer)s.destroy(),h._type=s._type,h._mediaSource.addEventListener("sourceopen",h._openHandler);else{if(!s._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");s.destroy(),h._type=s._type,h._sourceBuffer=s._sourceBuffer,h._debugBuffers=s._debugBuffers,h._sourceBuffer.addEventListener("updateend",h._flowHandler),h._sourceBuffer.addEventListener("error",h._errorHandler)}h._elem.addEventListener("timeupdate",h._flowHandler),h.on("error",function(g){h._wrapper.error(g)}),h.on("finish",function(){if(!h.destroyed&&(h._finished=!0,h._allStreams.every(function(g){return g._finished}))){h._wrapper._dumpDebugData();try{h._mediaSource.endOfStream()}catch(g){}}})}n.prototype.createWriteStream=function(o){return new a(this,o)},n.prototype.error=function(o){var s=this;s.detailedError||(s.detailedError=o),s._dumpDebugData();try{s._mediaSource.endOfStream("decode")}catch(h){}try{window.URL.revokeObjectURL(s._elem.src)}catch(h){}},n.prototype._dumpDebugData=function(){var o=this;o._debug&&(o._debug=!1,o._streams.forEach(function(s,h){!function(o,s){var h=document.createElement("a");h.href=window.URL.createObjectURL(new window.Blob(o)),h.download=s,h.click()}(s._debugBuffers,"mediasource-stream-"+h)}))},x(a,v.Writable),a.prototype._onSourceOpen=function(){var o=this;o.destroyed||(o._mediaSource.removeEventListener("sourceopen",o._openHandler),o._createSourceBuffer())},a.prototype.destroy=function(o){var s=this;s.destroyed||(s.destroyed=!0,s._allStreams.splice(s._allStreams.indexOf(s),1),s._mediaSource.removeEventListener("sourceopen",s._openHandler),s._elem.removeEventListener("timeupdate",s._flowHandler),s._sourceBuffer&&(s._sourceBuffer.removeEventListener("updateend",s._flowHandler),s._sourceBuffer.removeEventListener("error",s._errorHandler),"open"===s._mediaSource.readyState&&s._sourceBuffer.abort()),o&&s.emit("error",o),s.emit("close"))},a.prototype._createSourceBuffer=function(){var o=this;if(!o.destroyed)if(f.isTypeSupported(o._type)){if(o._sourceBuffer=o._mediaSource.addSourceBuffer(o._type),o._sourceBuffer.addEventListener("updateend",o._flowHandler),o._sourceBuffer.addEventListener("error",o._errorHandler),o._cb){var s=o._cb;o._cb=null,s()}}else o.destroy(new Error("The provided type is not supported"))},a.prototype._write=function(o,s,h){var g=this;if(!g.destroyed){if(!g._sourceBuffer)return void(g._cb=function(E){if(E)return h(E);g._write(o,s,h)});if(g._sourceBuffer.updating)return h(new Error("Cannot append buffer while source buffer updating"));var T=w(o);g._wrapper._debug&&g._debugBuffers.push(T);try{g._sourceBuffer.appendBuffer(T)}catch(E){return void g.destroy(E)}g._cb=h}},a.prototype._flow=function(){var o=this;if(!o.destroyed&&o._sourceBuffer&&!o._sourceBuffer.updating&&!("open"===o._mediaSource.readyState&&o._getBufferDuration()>o._bufferDuration)&&o._cb){var s=o._cb;o._cb=null,s()}},a.prototype._getBufferDuration=function(){for(var s=this._sourceBuffer.buffered,h=this._elem.currentTime,g=-1,T=0;T<s.length;T++){var E=s.start(T),P=s.end(T)+0;if(E>h)break;(g>=0||h<=P)&&(g=P)}var b=g-h;return b<0&&(b=0),b}},69706:(F,_,d)=>{F.exports=v;const x=d(41965);function v(w,f){if(!(this instanceof v))return new v(w,f);if(f||(f={}),this.chunkLength=Number(w),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(f.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}v.prototype.put=function(w,f,i=(()=>{})){if(this.closed)return x(()=>i(new Error("Storage is closed")));const n=w===this.lastChunkIndex;return n&&f.length!==this.lastChunkLength?x(()=>i(new Error("Last chunk length must be "+this.lastChunkLength))):n||f.length===this.chunkLength?(this.chunks[w]=f,void x(()=>i(null))):x(()=>i(new Error("Chunk length must be "+this.chunkLength)))},v.prototype.get=function(w,f,i=(()=>{})){if("function"==typeof f)return this.get(w,null,f);if(this.closed)return x(()=>i(new Error("Storage is closed")));let n=this.chunks[w];if(!n){const u=new Error("Chunk not found");return u.notFound=!0,x(()=>i(u))}f||(f={});const a=f.offset||0,p=f.length||n.length-a;(0!==a||p!==n.length)&&(n=n.slice(a,p+a)),x(()=>i(null,n))},v.prototype.close=v.prototype.destroy=function(w=(()=>{})){if(this.closed)return x(()=>w(new Error("Storage is closed")));this.closed=!0,this.chunks=null,x(()=>w(null))}},87344:F=>{"use strict";function _(){this._types=Object.create(null),this._extensions=Object.create(null);for(let d=0;d<arguments.length;d++)this.define(arguments[d]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}_.prototype.define=function(d,x){for(let v in d){let w=d[v].map(function(f){return f.toLowerCase()});v=v.toLowerCase();for(let f=0;f<w.length;f++){const i=w[f];if("*"!==i[0]){if(!x&&i in this._types)throw new Error('Attempt to change mapping for "'+i+'" extension from "'+this._types[i]+'" to "'+v+'". Pass `force=true` to allow this, otherwise remove "'+i+'" from the list of extensions for "'+v+'".');this._types[i]=v}}if(x||!this._extensions[v]){const f=w[0];this._extensions[v]="*"!==f[0]?f:f.substr(1)}}},_.prototype.getType=function(d){let x=(d=String(d)).replace(/^.*[/\\]/,"").toLowerCase(),v=x.replace(/^.*\./,"").toLowerCase();return(v.length<x.length-1||!(x.length<d.length))&&this._types[v]||null},_.prototype.getExtension=function(d){return(d=/^\s*([^;\s]*)/.test(d)&&RegExp.$1)&&this._extensions[d.toLowerCase()]||null},F.exports=_},86281:(F,_,d)=>{"use strict";let x=d(87344);F.exports=new x(d(46296),d(59291))},59291:F=>{F.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},46296:F=>{F.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},24738:(F,_,d)=>{var x=d(40120),v=d(24411),w=d(35151),f=20828448e5;function n(l,m,U){for(var M=m;M<U;M++)l[M]=0}function a(l,m,U){m.writeUInt32BE(Math.floor((l.getTime()+f)/1e3),U)}function p(l,m,U){m.writeUIntBE(Math.floor((l.getTime()+f)/1e3),U,6)}function u(l,m,U){m.writeUInt16BE(Math.floor(l)%65536,U),m.writeUInt16BE(Math.floor(256*l*256)%65536,U+2)}function s(l,m,U){l||(l=[0,0,0,0,0,0,0,0,0]);for(var M=0;M<l.length;M++)u(l[M],m,U+4*M)}function g(l){for(var m=new Array(l.length/4),U=0;U<m.length;U++)m[U]=P(l,4*U);return m}function T(l,m){return new Date(1e3*l.readUIntBE(m,6)-f)}function E(l,m){return new Date(1e3*l.readUInt32BE(m)-f)}function P(l,m){return l.readUInt16BE(m)+l.readUInt16BE(m+2)/65536}function b(l,m){return l[m]+l[m+1]/256}function C(l,m,U){var M;for(M=0;M<U&&0!==l[m+M];M++);return l.toString("utf8",m,m+M)}_.fullBoxes={},["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach(function(l){_.fullBoxes[l]=!0}),_.ftyp={},_.ftyp.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(_.ftyp.encodingLength(l));var M=l.compatibleBrands||[];m.write(l.brand,0,4,"ascii"),m.writeUInt32BE(l.brandVersion,4);for(var L=0;L<M.length;L++)m.write(M[L],8+4*L,4,"ascii");return _.ftyp.encode.bytes=8+4*M.length,m},_.ftyp.decode=function(l,m){for(var U=(l=l.slice(m)).toString("ascii",0,4),M=l.readUInt32BE(4),L=[],z=8;z<l.length;z+=4)L.push(l.toString("ascii",z,z+4));return{brand:U,brandVersion:M,compatibleBrands:L}},_.ftyp.encodingLength=function(l){return 8+4*(l.compatibleBrands||[]).length},_.mvhd={},_.mvhd.encode=function(l,m,U){return m=m?m.slice(U):Buffer.alloc(96),a(l.ctime||new Date,m,0),a(l.mtime||new Date,m,4),m.writeUInt32BE(l.timeScale||0,8),m.writeUInt32BE(l.duration||0,12),u(l.preferredRate||0,m,16),function(l,m,U){m[20]=Math.floor(l)%256,m[21]=Math.floor(256*l)%256}(l.preferredVolume||0,m),n(m,22,32),s(l.matrix,m,32),m.writeUInt32BE(l.previewTime||0,68),m.writeUInt32BE(l.previewDuration||0,72),m.writeUInt32BE(l.posterTime||0,76),m.writeUInt32BE(l.selectionTime||0,80),m.writeUInt32BE(l.selectionDuration||0,84),m.writeUInt32BE(l.currentTime||0,88),m.writeUInt32BE(l.nextTrackId||0,92),_.mvhd.encode.bytes=96,m},_.mvhd.decode=function(l,m){return{ctime:E(l=l.slice(m),0),mtime:E(l,4),timeScale:l.readUInt32BE(8),duration:l.readUInt32BE(12),preferredRate:P(l,16),preferredVolume:b(l,20),matrix:g(l.slice(32,68)),previewTime:l.readUInt32BE(68),previewDuration:l.readUInt32BE(72),posterTime:l.readUInt32BE(76),selectionTime:l.readUInt32BE(80),selectionDuration:l.readUInt32BE(84),currentTime:l.readUInt32BE(88),nextTrackId:l.readUInt32BE(92)}},_.mvhd.encodingLength=function(l){return 96},_.tkhd={},_.tkhd.encode=function(l,m,U){return m=m?m.slice(U):Buffer.alloc(80),a(l.ctime||new Date,m,0),a(l.mtime||new Date,m,4),m.writeUInt32BE(l.trackId||0,8),n(m,12,16),m.writeUInt32BE(l.duration||0,16),n(m,20,28),m.writeUInt16BE(l.layer||0,28),m.writeUInt16BE(l.alternateGroup||0,30),m.writeUInt16BE(l.volume||0,32),s(l.matrix,m,36),m.writeUInt32BE(l.trackWidth||0,72),m.writeUInt32BE(l.trackHeight||0,76),_.tkhd.encode.bytes=80,m},_.tkhd.decode=function(l,m){return{ctime:E(l=l.slice(m),0),mtime:E(l,4),trackId:l.readUInt32BE(8),duration:l.readUInt32BE(16),layer:l.readUInt16BE(28),alternateGroup:l.readUInt16BE(30),volume:l.readUInt16BE(32),matrix:g(l.slice(36,72)),trackWidth:l.readUInt32BE(72),trackHeight:l.readUInt32BE(76)}},_.tkhd.encodingLength=function(l){return 80},_.mdhd={},_.mdhd.encode=function(l,m,U){return 1===l.version?(m=m?m.slice(U):Buffer.alloc(32),p(l.ctime||new Date,m,0),p(l.mtime||new Date,m,8),m.writeUInt32BE(l.timeScale||0,16),m.writeUIntBE(l.duration||0,20,6),m.writeUInt16BE(l.language||0,28),m.writeUInt16BE(l.quality||0,30),_.mdhd.encode.bytes=32,m):(m=m?m.slice(U):Buffer.alloc(20),a(l.ctime||new Date,m,0),a(l.mtime||new Date,m,4),m.writeUInt32BE(l.timeScale||0,8),m.writeUInt32BE(l.duration||0,12),m.writeUInt16BE(l.language||0,16),m.writeUInt16BE(l.quality||0,18),_.mdhd.encode.bytes=20,m)},_.mdhd.decode=function(l,m,U){return l=l.slice(m),U-m!=20?{ctime:T(l,0),mtime:T(l,8),timeScale:l.readUInt32BE(16),duration:l.readUIntBE(20,6),language:l.readUInt16BE(28),quality:l.readUInt16BE(30)}:{ctime:E(l,0),mtime:E(l,4),timeScale:l.readUInt32BE(8),duration:l.readUInt32BE(12),language:l.readUInt16BE(16),quality:l.readUInt16BE(18)}},_.mdhd.encodingLength=function(l){return 1===l.version?32:20},_.vmhd={},_.vmhd.encode=function(l,m,U){(m=m?m.slice(U):Buffer.alloc(8)).writeUInt16BE(l.graphicsMode||0,0);var M=l.opcolor||[0,0,0];return m.writeUInt16BE(M[0],2),m.writeUInt16BE(M[1],4),m.writeUInt16BE(M[2],6),_.vmhd.encode.bytes=8,m},_.vmhd.decode=function(l,m){return{graphicsMode:(l=l.slice(m)).readUInt16BE(0),opcolor:[l.readUInt16BE(2),l.readUInt16BE(4),l.readUInt16BE(6)]}},_.vmhd.encodingLength=function(l){return 8},_.smhd={},_.smhd.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(4)).writeUInt16BE(l.balance||0,0),n(m,2,4),_.smhd.encode.bytes=4,m},_.smhd.decode=function(l,m){return{balance:(l=l.slice(m)).readUInt16BE(0)}},_.smhd.encodingLength=function(l){return 4},_.stsd={},_.stsd.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(_.stsd.encodingLength(l));var M=l.entries||[];m.writeUInt32BE(M.length,0);for(var L=4,z=0;z<M.length;z++)x.encode(M[z],m,L),L+=x.encode.bytes;return _.stsd.encode.bytes=L,m},_.stsd.decode=function(l,m,U){for(var M=(l=l.slice(m)).readUInt32BE(0),L=new Array(M),z=4,O=0;O<M;O++){var W=x.decode(l,z,U);L[O]=W,z+=W.length}return{entries:L}},_.stsd.encodingLength=function(l){var m=4;if(!l.entries)return m;for(var U=0;U<l.entries.length;U++)m+=x.encodingLength(l.entries[U]);return m},_.avc1=_.VisualSampleEntry={},_.VisualSampleEntry.encode=function(l,m,U){n(m=m?m.slice(U):Buffer.alloc(_.VisualSampleEntry.encodingLength(l)),0,6),m.writeUInt16BE(l.dataReferenceIndex||0,6),n(m,8,24),m.writeUInt16BE(l.width||0,24),m.writeUInt16BE(l.height||0,26),m.writeUInt32BE(l.hResolution||4718592,28),m.writeUInt32BE(l.vResolution||4718592,32),n(m,36,40),m.writeUInt16BE(l.frameCount||1,40);var M=l.compressorName||"",L=Math.min(M.length,31);m.writeUInt8(L,42),m.write(M,43,L,"utf8"),m.writeUInt16BE(l.depth||24,74),m.writeInt16BE(-1,76);var z=78;(l.children||[]).forEach(function(W){x.encode(W,m,z),z+=x.encode.bytes}),_.VisualSampleEntry.encode.bytes=z},_.VisualSampleEntry.decode=function(l,m,U){l=l.slice(m);for(var M=U-m,L=Math.min(l.readUInt8(42),31),z={dataReferenceIndex:l.readUInt16BE(6),width:l.readUInt16BE(24),height:l.readUInt16BE(26),hResolution:l.readUInt32BE(28),vResolution:l.readUInt32BE(32),frameCount:l.readUInt16BE(40),compressorName:l.toString("utf8",43,43+L),depth:l.readUInt16BE(74),children:[]},O=78;M-O>=8;){var W=x.decode(l,O,M);z.children.push(W),z[W.type]=W,O+=W.length}return z},_.VisualSampleEntry.encodingLength=function(l){var m=78;return(l.children||[]).forEach(function(M){m+=x.encodingLength(M)}),m},_.avcC={},_.avcC.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(l.buffer.length),l.buffer.copy(m),_.avcC.encode.bytes=l.buffer.length},_.avcC.decode=function(l,m,U){return{mimeCodec:(l=l.slice(m,U)).toString("hex",1,4),buffer:Buffer.from(l)}},_.avcC.encodingLength=function(l){return l.buffer.length},_.mp4a=_.AudioSampleEntry={},_.AudioSampleEntry.encode=function(l,m,U){n(m=m?m.slice(U):Buffer.alloc(_.AudioSampleEntry.encodingLength(l)),0,6),m.writeUInt16BE(l.dataReferenceIndex||0,6),n(m,8,16),m.writeUInt16BE(l.channelCount||2,16),m.writeUInt16BE(l.sampleSize||16,18),n(m,20,24),m.writeUInt32BE(l.sampleRate||0,24);var M=28;(l.children||[]).forEach(function(z){x.encode(z,m,M),M+=x.encode.bytes}),_.AudioSampleEntry.encode.bytes=M},_.AudioSampleEntry.decode=function(l,m,U){for(var M=U-m,L={dataReferenceIndex:(l=l.slice(m,U)).readUInt16BE(6),channelCount:l.readUInt16BE(16),sampleSize:l.readUInt16BE(18),sampleRate:l.readUInt32BE(24),children:[]},z=28;M-z>=8;){var O=x.decode(l,z,M);L.children.push(O),L[O.type]=O,z+=O.length}return L},_.AudioSampleEntry.encodingLength=function(l){var m=28;return(l.children||[]).forEach(function(M){m+=x.encodingLength(M)}),m},_.esds={},_.esds.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(l.buffer.length),l.buffer.copy(m,0),_.esds.encode.bytes=l.buffer.length},_.esds.decode=function(l,m,U){l=l.slice(m,U);var M=v.Descriptor.decode(l,0,l.length),z=("ESDescriptor"===M.tagName?M:{}).DecoderConfigDescriptor||{},O=z.oti||0,W=z.DecoderSpecificInfo,Q=W?(248&W.buffer.readUInt8(0))>>3:0,ie=null;return O&&(ie=O.toString(16),Q&&(ie+="."+Q)),{mimeCodec:ie,buffer:Buffer.from(l.slice(0))}},_.esds.encodingLength=function(l){return l.buffer.length},_.stsz={},_.stsz.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.stsz.encodingLength(l))).writeUInt32BE(0,0),m.writeUInt32BE(M.length,4);for(var L=0;L<M.length;L++)m.writeUInt32BE(M[L],4*L+8);return _.stsz.encode.bytes=8+4*M.length,m},_.stsz.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=l.readUInt32BE(4),L=new Array(M),z=0;z<M;z++)L[z]=0===U?l.readUInt32BE(4*z+8):U;return{entries:L}},_.stsz.encodingLength=function(l){return 8+4*l.entries.length},_.stss=_.stco={},_.stco.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.stco.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++)m.writeUInt32BE(M[L],4*L+4);return _.stco.encode.bytes=4+4*M.length,m},_.stco.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++)M[L]=l.readUInt32BE(4*L+4);return{entries:M}},_.stco.encodingLength=function(l){return 4+4*l.entries.length},_.co64={},_.co64.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.co64.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++)w.encode(M[L],m,8*L+4);return _.co64.encode.bytes=4+8*M.length,m},_.co64.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++)M[L]=w.decode(l,8*L+4);return{entries:M}},_.co64.encodingLength=function(l){return 4+8*l.entries.length},_.stts={},_.stts.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.stts.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++){var z=8*L+4;m.writeUInt32BE(M[L].count||0,z),m.writeUInt32BE(M[L].duration||0,z+4)}return _.stts.encode.bytes=4+8*l.entries.length,m},_.stts.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++){var z=8*L+4;M[L]={count:l.readUInt32BE(z),duration:l.readUInt32BE(z+4)}}return{entries:M}},_.stts.encodingLength=function(l){return 4+8*l.entries.length},_.ctts={},_.ctts.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.ctts.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++){var z=8*L+4;m.writeUInt32BE(M[L].count||0,z),m.writeUInt32BE(M[L].compositionOffset||0,z+4)}return _.ctts.encode.bytes=4+8*M.length,m},_.ctts.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++){var z=8*L+4;M[L]={count:l.readUInt32BE(z),compositionOffset:l.readInt32BE(z+4)}}return{entries:M}},_.ctts.encodingLength=function(l){return 4+8*l.entries.length},_.stsc={},_.stsc.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.stsc.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++){var z=12*L+4;m.writeUInt32BE(M[L].firstChunk||0,z),m.writeUInt32BE(M[L].samplesPerChunk||0,z+4),m.writeUInt32BE(M[L].sampleDescriptionId||0,z+8)}return _.stsc.encode.bytes=4+12*M.length,m},_.stsc.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++){var z=12*L+4;M[L]={firstChunk:l.readUInt32BE(z),samplesPerChunk:l.readUInt32BE(z+4),sampleDescriptionId:l.readUInt32BE(z+8)}}return{entries:M}},_.stsc.encodingLength=function(l){return 4+12*l.entries.length},_.dref={},_.dref.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(_.dref.encodingLength(l));var M=l.entries||[];m.writeUInt32BE(M.length,0);for(var L=4,z=0;z<M.length;z++){var O=M[z];m.writeUInt32BE((O.buf?O.buf.length:0)+4+4,L),m.write(O.type,L+=4,4,"ascii"),L+=4,O.buf&&(O.buf.copy(m,L),L+=O.buf.length)}return _.dref.encode.bytes=L,m},_.dref.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=4,z=0;z<U;z++){var O=l.readUInt32BE(L),W=l.toString("ascii",L+4,L+8),Q=l.slice(L+8,L+O);L+=O,M[z]={type:W,buf:Q}}return{entries:M}},_.dref.encodingLength=function(l){var m=4;if(!l.entries)return m;for(var U=0;U<l.entries.length;U++){var M=l.entries[U].buf;m+=(M?M.length:0)+4+4}return m},_.elst={},_.elst.encode=function(l,m,U){var M=l.entries||[];(m=m?m.slice(U):Buffer.alloc(_.elst.encodingLength(l))).writeUInt32BE(M.length,0);for(var L=0;L<M.length;L++){var z=12*L+4;m.writeUInt32BE(M[L].trackDuration||0,z),m.writeUInt32BE(M[L].mediaTime||0,z+4),u(M[L].mediaRate||0,m,z+8)}return _.elst.encode.bytes=4+12*M.length,m},_.elst.decode=function(l,m){for(var U=(l=l.slice(m)).readUInt32BE(0),M=new Array(U),L=0;L<U;L++){var z=12*L+4;M[L]={trackDuration:l.readUInt32BE(z),mediaTime:l.readInt32BE(z+4),mediaRate:P(l,z+8)}}return{entries:M}},_.elst.encodingLength=function(l){return 4+12*l.entries.length},_.hdlr={},_.hdlr.encode=function(l,m,U){m=m?m.slice(U):Buffer.alloc(_.hdlr.encodingLength(l));var M=21+(l.name||"").length;return m.fill(0,0,M),m.write(l.handlerType||"",4,4,"ascii"),function(l,m,U){var M=Buffer.from(l,"utf8");M.copy(m,20),m[20+M.length]=0}(l.name||"",m),_.hdlr.encode.bytes=M,m},_.hdlr.decode=function(l,m,U){return{handlerType:(l=l.slice(m)).toString("ascii",4,8),name:C(l,20,U)}},_.hdlr.encodingLength=function(l){return 21+(l.name||"").length},_.mehd={},_.mehd.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(4)).writeUInt32BE(l.fragmentDuration||0,0),_.mehd.encode.bytes=4,m},_.mehd.decode=function(l,m){return{fragmentDuration:(l=l.slice(m)).readUInt32BE(0)}},_.mehd.encodingLength=function(l){return 4},_.trex={},_.trex.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(20)).writeUInt32BE(l.trackId||0,0),m.writeUInt32BE(l.defaultSampleDescriptionIndex||0,4),m.writeUInt32BE(l.defaultSampleDuration||0,8),m.writeUInt32BE(l.defaultSampleSize||0,12),m.writeUInt32BE(l.defaultSampleFlags||0,16),_.trex.encode.bytes=20,m},_.trex.decode=function(l,m){return{trackId:(l=l.slice(m)).readUInt32BE(0),defaultSampleDescriptionIndex:l.readUInt32BE(4),defaultSampleDuration:l.readUInt32BE(8),defaultSampleSize:l.readUInt32BE(12),defaultSampleFlags:l.readUInt32BE(16)}},_.trex.encodingLength=function(l){return 20},_.mfhd={},_.mfhd.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(4)).writeUInt32BE(l.sequenceNumber||0,0),_.mfhd.encode.bytes=4,m},_.mfhd.decode=function(l,m){return{sequenceNumber:l.readUInt32BE(0)}},_.mfhd.encodingLength=function(l){return 4},_.tfhd={},_.tfhd.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(4)).writeUInt32BE(l.trackId,0),_.tfhd.encode.bytes=4,m},_.tfhd.decode=function(l,m){},_.tfhd.encodingLength=function(l){return 4},_.tfdt={},_.tfdt.encode=function(l,m,U){return(m=m?m.slice(U):Buffer.alloc(4)).writeUInt32BE(l.baseMediaDecodeTime||0,0),_.tfdt.encode.bytes=4,m},_.tfdt.decode=function(l,m){},_.tfdt.encodingLength=function(l){return 4},_.trun={},_.trun.encode=function(l,m,U){(m=m?m.slice(U):Buffer.alloc(8+16*l.entries.length)).writeUInt32BE(l.entries.length,0),m.writeInt32BE(l.dataOffset,4);for(var M=8,L=0;L<l.entries.length;L++){var z=l.entries[L];m.writeUInt32BE(z.sampleDuration,M),m.writeUInt32BE(z.sampleSize,M+=4),m.writeUInt32BE(z.sampleFlags,M+=4),M+=4,0===(l.version||0)?m.writeUInt32BE(z.sampleCompositionTimeOffset,M):m.writeInt32BE(z.sampleCompositionTimeOffset,M),M+=4}_.trun.encode.bytes=M},_.trun.decode=function(l,m){},_.trun.encodingLength=function(l){return 8+16*l.entries.length},_.mdat={},_.mdat.encode=function(l,m,U){l.buffer?(l.buffer.copy(m,U),_.mdat.encode.bytes=l.buffer.length):_.mdat.encode.bytes=_.mdat.encodingLength(l)},_.mdat.decode=function(l,m,U){return{buffer:Buffer.from(l.slice(m,U))}},_.mdat.encodingLength=function(l){return l.buffer?l.buffer.length:l.contentLength}},24411:(F,_)=>{var d={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};_.Descriptor={},_.Descriptor.decode=function(x,v,w){var n,f=x.readUInt8(v),i=v+1,a=0;do{a=a<<7|127&(n=x.readUInt8(i++))}while(128&n);var p,u=d[f];return(p=_[u]?_[u].decode(x,i,w):{buffer:Buffer.from(x.slice(i,i+a))}).tag=f,p.tagName=u,p.length=i-v+a,p.contentsLen=a,p},_.DescriptorArray={},_.DescriptorArray.decode=function(x,v,w){for(var f=v,i={};f+2<=w;){var n=_.Descriptor.decode(x,f,w);f+=n.length,i[d[n.tag]||"Descriptor"+n.tag]=n}return i},_.ESDescriptor={},_.ESDescriptor.decode=function(x,v,w){var f=x.readUInt8(v+2),i=v+3;return 128&f&&(i+=2),64&f&&(i+=x.readUInt8(i)+1),32&f&&(i+=2),_.DescriptorArray.decode(x,i,w)},_.DecoderConfigDescriptor={},_.DecoderConfigDescriptor.decode=function(x,v,w){var f=x.readUInt8(v),i=_.DescriptorArray.decode(x,v+13,w);return i.oti=f,i}},40120:(F,_,d)=>{var x=d(35151),v=d(24738),w=4294967295,f=_,i=_.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};f.encode=function(n,a,p){return f.encodingLength(n),p=p||0,a=a||Buffer.alloc(n.length),f._encode(n,a,p)},f._encode=function(n,a,p){var u=n.type,o=n.length;o>w&&(o=1),a.writeUInt32BE(o,p),a.write(n.type,p+4,4,"ascii");var s=p+8;if(1===o&&(x.encode(n.length,a,s),s+=8),v.fullBoxes[u]&&(a.writeUInt32BE(n.flags||0,s),a.writeUInt8(n.version||0,s),s+=4),i[u])i[u].forEach(function(E){if(5===E.length){var P=n[E]||[];E=E.substr(0,4),P.forEach(function(b){f._encode(b,a,s),s+=f.encode.bytes})}else n[E]&&(f._encode(n[E],a,s),s+=f.encode.bytes)}),n.otherBoxes&&n.otherBoxes.forEach(function(E){f._encode(E,a,s),s+=f.encode.bytes});else if(v[u]){var g=v[u].encode;g(n,a,s),s+=g.bytes}else{if(!n.buffer)throw new Error("Either `type` must be set to a known type (not'"+u+"') or `buffer` must be set");n.buffer.copy(a,s),s+=n.buffer.length}return f.encode.bytes=s-p,a},f.readHeaders=function(n,a,p){if((p=p||n.length)-(a=a||0)<8)return 8;var h,g,u=n.readUInt32BE(a),o=n.toString("ascii",a+4,a+8),s=a+8;if(1===u){if(p-a<16)return 16;u=x.decode(n,s),s+=8}return v.fullBoxes[o]&&(h=n.readUInt8(s),g=16777215&n.readUInt32BE(s),s+=4),{length:u,headersLen:s-a,contentLen:u-(s-a),type:o,version:h,flags:g}},f.decode=function(n,a,p){var u=f.readHeaders(n,a=a||0,p=p||n.length);if(!u||u.length>p-a)throw new Error("Data too short");return f.decodeWithoutHeaders(u,n,a+u.headersLen,a+u.length)},f.decodeWithoutHeaders=function(n,a,p,u){p=p||0,u=u||a.length;var o=n.type,s={};if(i[o]){s.otherBoxes=[];for(var h=i[o],g=p;u-g>=8;){var T=f.decode(a,g,u);if(g+=T.length,h.indexOf(T.type)>=0)s[T.type]=T;else if(h.indexOf(T.type+"s")>=0){var E=T.type+"s";(s[E]=s[E]||[]).push(T)}else s.otherBoxes.push(T)}}else v[o]?s=(0,v[o].decode)(a,p,u):s.buffer=Buffer.from(a.slice(p,u));return s.length=n.length,s.contentLen=n.contentLen,s.type=n.type,s.version=n.version,s.flags=n.flags,s},f.encodingLength=function(n){var a=n.type,p=8;if(v.fullBoxes[a]&&(p+=4),i[a])i[a].forEach(function(o){if(5===o.length){var s=n[o]||[];o=o.substr(0,4),s.forEach(function(g){g.type=o,p+=f.encodingLength(g)})}else if(n[o]){var h=n[o];h.type=o,p+=f.encodingLength(h)}}),n.otherBoxes&&n.otherBoxes.forEach(function(o){p+=f.encodingLength(o)});else if(v[a])p+=v[a].encodingLength(n);else{if(!n.buffer)throw new Error("Either `type` must be set to a known type (not'"+a+"') or `buffer` must be set");p+=n.buffer.length}return p>w&&(p+=8),n.length=p,p}},55924:(F,_,d)=>{var x=d(73469),v=d(93007),w=d(40120),f=Buffer.alloc(0);class n extends x.PassThrough{constructor(p){super(),this._parent=p,this.destroyed=!1}destroy(p){this.destroyed||(this.destroyed=!0,this._parent.destroy(p),p&&this.emit("error",p),this.emit("close"))}}F.exports=class extends x.Writable{constructor(p){super(p),this.destroyed=!1,this._pending=0,this._missing=0,this._ignoreEmpty=!1,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()}destroy(p){this.destroyed||(this.destroyed=!0,p&&this.emit("error",p),this.emit("close"))}_write(p,u,o){if(!this.destroyed){for(var s=!this._str||!this._str._writableState.needDrain;p.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty)return this._writeBuffer=p,void(this._writeCb=o);var h=p.length<this._missing?p.length:this._missing;if(this._buf?p.copy(this._buf,this._buf.length-this._missing):this._str&&(s=this._str.write(h===p.length?p:p.slice(0,h))),this._missing-=h,!this._missing){var g=this._buf,T=this._cb,E=this._str;this._buf=this._cb=this._str=this._ondrain=null,s=!0,this._ignoreEmpty=!1,E&&E.end(),T&&T(g)}p=h===p.length?f:p.slice(h)}if(this._pending&&!this._missing)return this._writeBuffer=p,void(this._writeCb=o);s?o():this._ondrain(o)}}_buffer(p,u){this._missing=p,this._buf=Buffer.alloc(p),this._cb=u}_stream(p,u){return this._missing=p,this._str=new n(this),this._ondrain=v(this._str,"drain"),this._pending++,this._str.on("end",()=>{this._pending--,this._kick()}),this._cb=u,this._str}_readBox(){const p=(u,o)=>{this._buffer(u,s=>{o=o?Buffer.concat([o,s]):s;var h=w.readHeaders(o);"number"==typeof h?p(h-o.length,o):(this._pending++,this._headers=h,this.emit("box",h))})};p(8)}stream(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var p=this._headers;return this._headers=null,this._stream(p.contentLen,()=>{this._pending--,this._kick()})}decode(p){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var u=this._headers;this._headers=null,this._buffer(u.contentLen,o=>{var s=w.decodeWithoutHeaders(u,o);p(s),this._pending--,this._kick()})}ignore(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var p=this._headers;this._headers=null,this._missing=p.contentLen,0===this._missing&&(this._ignoreEmpty=!0),this._cb=()=>{this._pending--,this._kick()}}_kick(){if(!this._pending&&(!this._buf&&!this._str&&this._readBox(),this._writeBuffer)){var p=this._writeCb,u=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(u,null,p)}}}},14037:(F,_,d)=>{var x=d(73469),v=d(40120),w=d(41965);function f(){}class n extends x.PassThrough{constructor(p){super(),this._parent=p,this.destroyed=!1}destroy(p){this.destroyed||(this.destroyed=!0,this._parent.destroy(p),p&&this.emit("error",p),this.emit("close"))}}F.exports=class extends x.Readable{constructor(p){super(p),this.destroyed=!1,this._finalized=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=()=>{!this._want||(this._want=!1,this._read())},this._onend=()=>{this._stream=null}}mdat(p,u){this.mediaData(p,u)}mediaData(p,u){var o=new n(this);return this.box({type:"mdat",contentLength:p,encodeBufferLen:8,stream:o},u),o}box(p,u){if(u||(u=f),this.destroyed)return u(new Error("Encoder is destroyed"));var o;if(p.encodeBufferLen&&(o=Buffer.alloc(p.encodeBufferLen)),p.stream)p.buffer=null,o=v.encode(p,o),this.push(o),this._stream=p.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",u),this._forward();else{if(o=v.encode(p,o),this.push(o))return w(u);this._drain=u}}destroy(p){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var u=this._drain;this._drain=null,u(p)}p&&this.emit("error",p),this.emit("close")}}finalize(){this._finalized=!0,!this._stream&&!this._drain&&this.push(null)}_forward(){if(this._stream)for(;!this.destroyed;){var p=this._stream.read();if(!p)return void(this._want=!!this._stream);if(!this.push(p))return}}_read(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var p=this._drain;this._drain=null,p()}this._reading=!1,this._finalized&&this.push(null)}}}},60675:(F,_,d)=>{const x=d(55924),v=d(14037);_.decode=w=>new x(w),_.encode=w=>new v(w)},16079:(F,_,d)=>{const x=d(73469),v=d(55211);function w(p){return i(p,{objectMode:!0,highWaterMark:16})}function f(p){return i(p)}function i(p,u){if(!p||"function"==typeof p||p._readableState)return p;const o=new x.Readable(u).wrap(p);return p.destroy&&(o.destroy=p.destroy.bind(p)),o}F.exports=(()=>{class p extends x.Readable{constructor(o,s){super(rn(nn({},s),{autoDestroy:!0})),this._drained=!1,this._forwarding=!1,this._current=null,this._toStreams2=s&&s.objectMode?w:f,"function"==typeof o?this._queue=o:(this._queue=o.map(this._toStreams2),this._queue.forEach(h=>{"function"!=typeof h&&this._attachErrorListener(h)})),this._next()}_read(){this._drained=!0,this._forward()}_forward(){if(this._forwarding||!this._drained||!this._current)return;let o;for(this._forwarding=!0;this._drained&&null!==(o=this._current.read());)this._drained=this.push(o);this._forwarding=!1}_destroy(o,s){let h=[];if(this._current&&h.push(this._current),"function"!=typeof this._queue&&(h=h.concat(this._queue)),0===h.length)s(o);else{let g=h.length,T=o;h.forEach(E=>{!function(p,u,o){if(!p.destroy||p.destroyed)o(u);else{const s=v(h=>o(h||u));p.on("error",s).on("close",()=>s()).destroy(u,s)}}(E,o,P=>{T=T||P,0==--g&&s(T)})})}}_next(){if(this._current=null,"function"==typeof this._queue)this._queue((o,s)=>{if(o)return this.destroy(o);s=this._toStreams2(s),this._attachErrorListener(s),this._gotNextStream(s)});else{let o=this._queue.shift();"function"==typeof o&&(o=this._toStreams2(o()),this._attachErrorListener(o)),this._gotNextStream(o)}}_gotNextStream(o){if(!o)return void this.push(null);this._current=o,this._forward();const s=()=>{this._forward()},h=()=>{if(!o._readableState.ended&&!o.destroyed){const T=new Error("ERR_STREAM_PREMATURE_CLOSE");T.code="ERR_STREAM_PREMATURE_CLOSE",this.destroy(T)}},g=()=>{this._current=null,o.removeListener("readable",s),o.removeListener("end",g),o.removeListener("close",h),o.destroy(),this._next()};o.on("readable",s),o.once("end",g),o.once("close",h)}_attachErrorListener(o){if(!o)return;const s=h=>{o.removeListener("error",s),this.destroy(h)};o.once("error",s)}}return p.obj=u=>new p(u,{objectMode:!0,highWaterMark:16}),p})()},93007:F=>{F.exports=function(d,x){var v=null;return d.on(x,function(w){if(v){var f=v;v=null,f(w)}}),function(w){v=w}}},4690:(F,_,d)=>{const x=d(22089),v=d(98390),w=d(83832),f=d(99769),i=d(29109),n=d(49899),a=d(20316),p=d(41965);function u(b){if("string"==typeof b&&/^(stream-)?magnet:/.test(b)){const C=i(b);if(!C.infoHash)throw new Error("Invalid torrent identifier");return C}if("string"==typeof b&&(/^[a-f0-9]{40}$/i.test(b)||/^[a-z2-7]{32}$/i.test(b)))return i(`magnet:?xt=urn:btih:${b}`);if(Buffer.isBuffer(b)&&20===b.length)return i(`magnet:?xt=urn:btih:${b.toString("hex")}`);if(Buffer.isBuffer(b))return function(b){Buffer.isBuffer(b)&&(b=x.decode(b)),P(b.info,"info"),P(b.info["name.utf-8"]||b.info.name,"info.name"),P(b.info["piece length"],"info['piece length']"),P(b.info.pieces,"info.pieces"),b.info.files?b.info.files.forEach(U=>{P("number"==typeof U.length,"info.files[0].length"),P(U["path.utf-8"]||U.path,"info.files[0].path")}):P("number"==typeof b.info.length,"info.length");const C={info:b.info,infoBuffer:x.encode(b.info),name:(b.info["name.utf-8"]||b.info.name).toString(),announce:[]};C.infoHash=a.sync(C.infoBuffer),C.infoHashBuffer=Buffer.from(C.infoHash,"hex"),void 0!==b.info.private&&(C.private=!!b.info.private),b["creation date"]&&(C.created=new Date(1e3*b["creation date"])),b["created by"]&&(C.createdBy=b["created by"].toString()),Buffer.isBuffer(b.comment)&&(C.comment=b.comment.toString()),Array.isArray(b["announce-list"])&&b["announce-list"].length>0?b["announce-list"].forEach(U=>{U.forEach(M=>{C.announce.push(M.toString())})}):b.announce&&C.announce.push(b.announce.toString()),Buffer.isBuffer(b["url-list"])&&(b["url-list"]=b["url-list"].length>0?[b["url-list"]]:[]),C.urlList=(b["url-list"]||[]).map(U=>U.toString()),C.announce=Array.from(new Set(C.announce)),C.urlList=Array.from(new Set(C.urlList));const l=b.info.files||[b.info];C.files=l.map((U,M)=>{const L=[].concat(C.name,U["path.utf-8"]||U.path||[]).map(z=>z.toString());return{path:n.join.apply(null,[n.sep].concat(L)).slice(1),name:L[L.length-1],length:U.length,offset:l.slice(0,M).reduce(T,0)}}),C.length=l.reduce(T,0);const m=C.files[C.files.length-1];return C.pieceLength=b.info["piece length"],C.lastPieceLength=(m.offset+m.length)%C.pieceLength||C.pieceLength,C.pieces=function(b){const C=[];for(let l=0;l<b.length;l+=20)C.push(b.slice(l,l+20).toString("hex"));return C}(b.info.pieces),C}(b);if(b&&b.infoHash)return b.infoHash=b.infoHash.toLowerCase(),b.announce||(b.announce=[]),"string"==typeof b.announce&&(b.announce=[b.announce]),b.urlList||(b.urlList=[]),b;throw new Error("Invalid torrent identifier")}function T(b,C){return b+C.length}function P(b,C){if(!b)throw new Error(`Torrent is missing required field: ${C}`)}F.exports=u,F.exports.remote=function o(b,C,l){if("function"==typeof C)return o(b,{},C);if("function"!=typeof l)throw new Error("second argument must be a Function");let m;try{m=u(b)}catch(M){}function U(M){try{m=u(M)}catch(L){return l(L)}m&&m.infoHash?l(null,m):l(new Error("Invalid torrent identifier"))}m&&m.infoHash?p(()=>{l(null,m)}):function(b){return"undefined"!=typeof Blob&&b instanceof Blob}(b)?v(b,(M,L)=>{if(M)return l(new Error(`Error converting Blob: ${M.message}`));U(L)}):"function"==typeof f&&/^https?:/.test(b)?(C=Object.assign({url:b,timeout:3e4,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},C),f.concat(C,(M,L,z)=>{if(M)return l(new Error(`Error downloading torrent: ${M.message}`));U(z)})):"function"==typeof w.readFile&&"string"==typeof b?w.readFile(b,(M,L)=>{if(M)return l(new Error("Invalid torrent identifier"));U(L)}):p(()=>{l(new Error("Invalid torrent identifier"))})},F.exports.toMagnetURI=i.encode,F.exports.toTorrentFile=function(b){const C={info:b.info};return C["announce-list"]=(b.announce||[]).map(l=>(C.announce||(C.announce=l),[l=Buffer.from(l,"utf8")])),C["url-list"]=b.urlList||[],void 0!==b.private&&(C.private=Number(b.private)),b.created&&(C["creation date"]=b.created.getTime()/1e3|0),b.createdBy&&(C["created by"]=b.createdBy),b.comment&&(C.comment=b.comment),x.encode(C)},Buffer.alloc(0)},97816:F=>{F.exports=function(d){return Math.max(16384,1<<Math.log2(d<1024?1:d/1024)+.5|0)}},55502:(F,_,d)=>{var x=d(55211),v=d(67048),w=d(83832),f=function(){},i=/^v?\.0/.test(process.version),n=function(g){return"function"==typeof g},u=function(g,T,E,P){P=x(P);var b=!1;g.on("close",function(){b=!0}),v(g,{readable:T,writable:E},function(l){if(l)return P(l);b=!0,P()});var C=!1;return function(l){if(!b&&!C){if(C=!0,function(g){return!(!i||!w)&&(g instanceof(w.ReadStream||f)||g instanceof(w.WriteStream||f))&&n(g.close)}(g))return g.close(f);if(function(g){return g.setHeader&&n(g.abort)}(g))return g.abort();if(n(g.destroy))return g.destroy();P(l||new Error("stream was destroyed"))}}},o=function(g){g()},s=function(g,T){return g.pipe(T)};F.exports=function(){var g=Array.prototype.slice.call(arguments),T=n(g[g.length-1]||f)&&g.pop()||f;if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new Error("pump requires two streams per minimum");var E,P=g.map(function(b,C){var l=C<g.length-1;return u(b,l,C>0,function(U){E||(E=U),U&&P.forEach(o),!l&&(P.forEach(o),T(E))})});return g.reduce(s)}},74949:F=>{"use strict";function _(d,x){return Object.prototype.hasOwnProperty.call(d,x)}F.exports=function(d,x,v,w){v=v||"=";var f={};if("string"!=typeof d||0===d.length)return f;var i=/\+/g;d=d.split(x=x||"&");var n=1e3;w&&"number"==typeof w.maxKeys&&(n=w.maxKeys);var a=d.length;n>0&&a>n&&(a=n);for(var p=0;p<a;++p){var s,h,g,T,u=d[p].replace(i,"%20"),o=u.indexOf(v);o>=0?(s=u.substr(0,o),h=u.substr(o+1)):(s=u,h=""),g=decodeURIComponent(s),T=decodeURIComponent(h),_(f,g)?Array.isArray(f[g])?f[g].push(T):f[g]=[f[g],T]:f[g]=T}return f}},66104:F=>{"use strict";var _=function(d){switch(typeof d){case"string":return d;case"boolean":return d?"true":"false";case"number":return isFinite(d)?d:"";default:return""}};F.exports=function(d,x,v,w){return x=x||"&",v=v||"=",null===d&&(d=void 0),"object"==typeof d?Object.keys(d).map(function(f){var i=encodeURIComponent(_(f))+v;return Array.isArray(d[f])?d[f].map(function(n){return i+encodeURIComponent(_(n))}).join(x):i+encodeURIComponent(_(d[f]))}).join(x):w?encodeURIComponent(_(w))+v+encodeURIComponent(_(d)):""}},90118:(F,_,d)=>{"use strict";_.decode=_.parse=d(74949),_.encode=_.stringify=d(66104)},88703:F=>{F.exports="function"==typeof queueMicrotask?queueMicrotask:_=>Promise.resolve().then(_)},59497:F=>{F.exports=function(d){var x=0;return function(){if(x===d.length)return null;var v=d.length-x,w=Math.random()*v|0,f=d[x+w],i=d[x];return d[x]=f,d[x+w]=i,x++,f}}},69246:F=>{"use strict";function x(i,n){return{start:i.start,end:i.end,index:n}}function v(i){return{start:i.start,end:i.end}}function w(i,n){return i.index-n.index}function f(i,n){return i.start-n.start}F.exports=function(i,n,a){if("string"!=typeof n)throw new TypeError("argument str must be a string");var p=n.indexOf("=");if(-1===p)return-2;var u=n.slice(p+1).split(","),o=[];o.type=n.slice(0,p);for(var s=0;s<u.length;s++){var h=u[s].split("-"),g=parseInt(h[0],10),T=parseInt(h[1],10);isNaN(g)?(g=i-T,T=i-1):isNaN(T)&&(T=i-1),T>i-1&&(T=i-1),!(isNaN(g)||isNaN(T)||g>T||g<0)&&o.push({start:g,end:T})}return o.length<1?-1:a&&a.combine?function(i){for(var n=i.map(x).sort(f),a=0,p=1;p<n.length;p++){var u=n[p],o=n[a];u.start>o.end+1?n[++a]=u:u.end>o.end&&(o.end=u.end,o.index=Math.min(o.index,u.index))}n.length=a+1;var s=n.sort(w).map(v);return s.type=i.type,s}(o):o}},57623:(F,_,d)=>{const{Writable:x,PassThrough:v}=d(73469);F.exports=class extends x{constructor(i,n={}){super(n),this.destroyed=!1,this._queue=[],this._position=i||0,this._cb=null,this._buffer=null,this._out=null}_write(i,n,a){let p=!0;for(;;){if(this.destroyed)return;if(0===this._queue.length)return this._buffer=i,void(this._cb=a);this._buffer=null;var u=this._queue[0];const o=Math.max(u.start-this._position,0),s=u.end-this._position;if(o>=i.length)return this._position+=i.length,a(null);let h;if(s>i.length){this._position+=i.length,h=0===o?i:i.slice(o),p=u.stream.write(h)&&p;break}this._position+=s,h=0===o&&s===i.length?i:i.slice(o,s),p=u.stream.write(h)&&p,u.last&&u.stream.end(),i=i.slice(s),this._queue.shift()}p?a(null):u.stream.once("drain",a.bind(null,null))}slice(i){if(this.destroyed)return null;Array.isArray(i)||(i=[i]);const n=new v;return i.forEach((a,p)=>{this._queue.push({start:a.start,end:a.end,stream:n,last:p===i.length-1})}),this._buffer&&this._write(this._buffer,null,this._cb),n}destroy(i){this.destroyed||(this.destroyed=!0,i&&this.emit("error",i))}}},44618:F=>{"use strict";function _(a){return parseInt(a,10)===a}function d(a){function o(s){this.s=function(s){if(void 0===s){s=new Array(a);for(var h=0;h<a;h++)s[h]=Math.floor(Math.random()*a)}else if("string"==typeof s)s=(s=""+s).split("").map(function(C){return C.charCodeAt(0)%a});else{if(!Array.isArray(s))throw new TypeError("invalid seed key specified");if(!s.every(function(C){return"number"==typeof C&&C===(0|C)}))throw new TypeError("invalid seed key specified: not array of integers")}for(var g=s.length,T=function(){for(var s=new Array(a),h=0;h<a;h++)s[h]=h;return s}(),E=0,P=0;P<a;P++){var b=T[P];T[P]=T[E=(E+T[P]+s[P%g])%a],T[E]=b}return T}(s),this.i=0,this.j=0}return o.prototype.randomNative=function(){this.i=(this.i+1)%a,this.j=(this.j+this.s[this.i])%a;var s=this.s[this.i];return this.s[this.i]=this.s[this.j],this.s[this.j]=s,this.s[(this.s[this.i]+this.s[this.j])%a]},o.prototype.randomUInt32=function(){return 256*(256*(256*this.randomByte()+this.randomByte())+this.randomByte())+this.randomByte()},o.prototype.randomFloat=function(){return this.randomUInt32()/4294967296},o.prototype.random=function(){var s,h;if(1===arguments.length)s=0,h=arguments[0];else{if(2!==arguments.length)throw new TypeError("random takes one or two integer arguments");s=arguments[0],h=arguments[1]}if(!_(s)||!_(h))throw new TypeError("random takes one or two integer arguments");return s+this.randomUInt32()%(h-s+1)},o.prototype.currentState=function(){return{i:this.i,j:this.j,s:this.s.slice()}},o.prototype.setState=function(s){var h=s.s,g=s.i,T=s.j;if(!(g===(0|g)&&0<=g&&g<a))throw new Error("state.i should be integer [0, "+(a-1)+"]");if(!(T===(0|T)&&0<=T&&T<a))throw new Error("state.j should be integer [0, "+(a-1)+"]");if(!Array.isArray(h)||h.length!==a)throw new Error("state should be array of length "+a);for(var E=0;E<a;E++)if(-1===h.indexOf(E))throw new Error("state should be permutation of 0.."+(a-1)+": "+E+" is missing");this.i=g,this.j=T,this.s=h.slice()},o}var x=d(256);x.prototype.randomByte=x.prototype.randomNative;var v=d(16);v.prototype.randomByte=function(){return 16*this.randomNative()+this.randomNative()};var w="a".charCodeAt(0),f="0".charCodeAt(0);function i(a){return String.fromCharCode(a<10?f+a:w+a-10)}function n(a){return parseInt(a,16)}v.prototype.currentStateString=function(){var a=this.currentState();return i(a.i)+i(a.j)+a.s.map(i).join("")},v.prototype.setStateString=function(a){if(!a.match(/^[0-9a-f]{18}$/))throw new TypeError("RC4small stateString should be 18 hex character string");var p=n(a[0]),u=n(a[1]),o=a.split("").slice(2).map(n);this.setState({i:p,j:u,s:o})},x.RC4small=v,F.exports=x},7715:(F,_,d)=>{_.render=function(O,W,Q,ie){"function"==typeof Q&&(ie=Q,Q={}),Q||(Q={}),ie||(ie=()=>{}),U(O),L(Q),"string"==typeof W&&(W=document.querySelector(W)),l(O,ae=>{if(W.nodeName!==ae.toUpperCase()){const S=f.extname(O.name).toLowerCase();throw new Error(`Cannot render "${S}" inside a "${W.nodeName.toLowerCase()}" element, expected "${ae}"`)}return("video"===ae||"audio"===ae)&&z(W,Q),W},Q,ie)},_.append=function(O,W,Q,ie){if("function"==typeof Q&&(ie=Q,Q={}),Q||(Q={}),ie||(ie=()=>{}),U(O),L(Q),"string"==typeof W&&(W=document.querySelector(W)),W&&("VIDEO"===W.nodeName||"AUDIO"===W.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");function B(K){const Y=document.createElement(K);return W.appendChild(Y),Y}l(O,function(K){return"video"===K||"audio"===K?function(K){const Y=B(K);return z(Y,Q),W.appendChild(Y),Y}(K):B(K)},Q,function(K,Y){K&&Y&&Y.remove(),ie(K,Y)})},_.mime=d(50876);const x=d(57115)("render-media"),v=d(11719),w=d(77847),f=d(49899),i=d(85403),n=d(79283),a=[".m4a",".m4b",".m4p",".m4v",".mp4"],p=[".m4v",".mkv",".mp4",".webm"],o=[].concat(p,[".m4a",".m4b",".m4p",".mp3"]),s=[".mov",".ogv"],h=[".aac",".oga",".ogg",".wav",".flac"],g=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],T=[".css",".html",".js",".md",".pdf",".srt",".txt"],P="undefined"!=typeof window&&window.MediaSource;function l(O,W,Q,ie){const ae=f.extname(O.name).toLowerCase();let B,S=0;function K(){return!("number"==typeof O.length&&O.length>Q.maxBlobLength&&(x("File length too large for Blob URL approach: %d (max: %d)",O.length,Q.maxBlobLength),pe(new Error(`File length too large for Blob URL approach: ${O.length} (max: ${Q.maxBlobLength})`)),1))}function Y(te){!K()||(B=W(te),m(O,(ve,Be)=>{if(ve)return pe(ve);B.addEventListener("error",pe),B.addEventListener("loadstart",se),B.addEventListener("loadedmetadata",G),B.src=Be}))}function se(){if(B.removeEventListener("loadstart",se),Q.autoplay){const te=B.play();void 0!==te&&te.catch(pe)}}function G(){B.removeEventListener("loadedmetadata",G),ie(null,B)}function $(){m(O,(te,ve)=>{if(te)return pe(te);".pdf"!==ae?(B=W("iframe"),B.sandbox="allow-forms allow-scripts",B.src=ve):(B=W("object"),B.setAttribute("typemustmatch",!0),B.setAttribute("type","application/pdf"),B.setAttribute("data",ve)),ie(null,B)})}function pe(te){te.message=`Error rendering file "${O.name}": ${te.message}`,x(te.message),ie(te)}o.includes(ae)?function(){const te=p.includes(ae)?"video":"audio";function Be(){x(`Use MediaSource API for ${O.name}`),Pe(),B.addEventListener("error",et),B.addEventListener("loadstart",se),B.addEventListener("loadedmetadata",G);const Fe=new w(B).createWriteStream(function(O){return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4b":'audio/mp4; codecs="mp4a.40.5"',".m4p":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[f.extname(O).toLowerCase()]}(O.name));O.createReadStream().pipe(Fe),S&&(B.currentTime=S)}function De(){x(`Use Blob URL for ${O.name}`),Pe(),B.addEventListener("error",pe),B.addEventListener("loadstart",se),B.addEventListener("loadedmetadata",G),m(O,(Te,Fe)=>{if(Te)return pe(Te);B.src=Fe,S&&(B.currentTime=S)})}function et(Te){x("MediaSource API error: fallback to Blob URL: %o",Te.message||Te),K()&&(B.removeEventListener("error",et),B.removeEventListener("loadedmetadata",G),De())}function Pe(){B||(B=W(te),B.addEventListener("progress",()=>{S=B.currentTime}))}P?a.includes(ae)?(x(`Use \`videostream\` package for ${O.name}`),Pe(),B.addEventListener("error",function Me(Te){x("videostream error: fallback to MediaSource API: %o",Te.message||Te),B.removeEventListener("error",Me),B.removeEventListener("loadedmetadata",G),Be()}),B.addEventListener("loadstart",se),B.addEventListener("loadedmetadata",G),new n(O,B)):Be():De()}():s.includes(ae)?Y("video"):h.includes(ae)?Y("audio"):g.includes(ae)?(B=W("img"),m(O,(te,ve)=>{if(te)return pe(te);B.src=ve,B.alt=O.name,ie(null,B)})):T.includes(ae)?$():function(){x('Unknown file extension "%s" - will attempt to render into iframe',ae);let te="";O.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",Be=>{te+=Be}).on("end",function(){v(te)?(x('File extension "%s" appears ascii, so will render.',ae),$()):(x('File extension "%s" appears non-ascii, will not render.',ae),ie(new Error(`Unsupported file type "${ae}": Cannot append to DOM`)))}).on("error",ie)}()}function m(O,W){const Q=f.extname(O.name).toLowerCase();i(O.createReadStream(),_.mime[Q]).then(ie=>W(null,ie),ie=>W(ie))}function U(O){if(null==O)throw new Error("file cannot be null or undefined");if("string"!=typeof O.name)throw new Error("missing or invalid file.name property");if("function"!=typeof O.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function L(O){null==O.autoplay&&(O.autoplay=!1),null==O.muted&&(O.muted=!1),null==O.controls&&(O.controls=!0),null==O.maxBlobLength&&(O.maxBlobLength=2e8)}function z(O,W){O.autoplay=!!W.autoplay,O.muted=!!W.muted,O.controls=!!W.controls}},25404:(F,_,d)=>{F.exports=function(w,f,i){if("number"!=typeof f)throw new Error("second argument must be a Number");let n,a,p,u,o,h,s=!0;function g(E){function P(){i&&i(E,n),i=null}s?x(P):P()}function T(E,P,b){if(n[E]=b,P&&(o=!0),0==--p||P)g(P);else if(!o&&h<a){let C;u?(C=u[h],h+=1,w[C](function(l,m){T(C,l,m)})):(C=h,h+=1,w[C](function(l,m){T(C,l,m)}))}}Array.isArray(w)?(n=[],p=a=w.length):(u=Object.keys(w),n={},p=a=u.length),h=f,p?u?u.some(function(E,P){return w[E](function(b,C){T(E,b,C)}),P===f-1}):w.some(function(E,P){return E(function(b,C){T(P,b,C)}),P===f-1}):g(null),s=!1};const x=d(41965)},90404:function(F){"undefined"!=typeof self&&self,F.exports=function(_){var d={};function x(v){if(d[v])return d[v].exports;var w=d[v]={i:v,l:!1,exports:{}};return _[v].call(w.exports,w,w.exports,x),w.l=!0,w.exports}return x.m=_,x.c=d,x.d=function(v,w,f){x.o(v,w)||Object.defineProperty(v,w,{configurable:!1,enumerable:!0,get:f})},x.n=function(v){var w=v&&v.__esModule?function(){return v.default}:function(){return v};return x.d(w,"a",w),w},x.o=function(v,w){return Object.prototype.hasOwnProperty.call(v,w)},x.p="",x(x.s=3)}([function(_,d,x){var w=x(5),f=x(1),i=f.toHex,n=f.ceilHeapSize,a=x(6),p=function(g){for(g+=9;g%64>0;g+=1);return g},s=function(g,T){var E=new Int32Array(g,T+320,5),P=new Int32Array(5),b=new DataView(P.buffer);return b.setInt32(0,E[0],!1),b.setInt32(4,E[1],!1),b.setInt32(8,E[2],!1),b.setInt32(12,E[3],!1),b.setInt32(16,E[4],!1),P},h=function(){function g(T){if(function(g,T){if(!(g instanceof T))throw new TypeError("Cannot call a class as a function")}(this,g),(T=T||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=T,this._padMaxChunkLen=p(T),this._heap=new ArrayBuffer(n(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new w({Int32Array},{},this._heap)}return g.prototype._initState=function(E,P){this._offset=0;var b=new Int32Array(E,P+320,5);b[0]=1732584193,b[1]=-271733879,b[2]=-1732584194,b[3]=271733878,b[4]=-1009589776},g.prototype._padChunk=function(E,P){var b=p(E),C=new Int32Array(this._heap,0,b>>2);return function(g,T){var E=new Uint8Array(g.buffer),P=T%4,b=T-P;switch(P){case 0:E[b+3]=0;case 1:E[b+2]=0;case 2:E[b+1]=0;case 3:E[b+0]=0}for(var C=1+(T>>2);C<g.length;C++)g[C]=0}(C,E),function(g,T,E){g[T>>2]|=128<<24-(T%4<<3),g[14+(2+(T>>2)&-16)]=E/(1<<29)|0,g[15+(2+(T>>2)&-16)]=E<<3}(C,E,P),b},g.prototype._write=function(E,P,b,C){a(E,this._h8,this._h32,P,b,C||0)},g.prototype._coreCall=function(E,P,b,C,l){var m=b;this._write(E,P,b),l&&(m=this._padChunk(b,C)),this._core.hash(m,this._padMaxChunkLen)},g.prototype.rawDigest=function(E){var P=E.byteLength||E.length||E.size||0;this._initState(this._heap,this._padMaxChunkLen);var b=0,C=this._maxChunkLen;for(b=0;P>b+C;b+=C)this._coreCall(E,b,C,P,!1);return this._coreCall(E,b,P-b,P,!0),s(this._heap,this._padMaxChunkLen)},g.prototype.digest=function(E){return i(this.rawDigest(E).buffer)},g.prototype.digestFromString=function(E){return this.digest(E)},g.prototype.digestFromBuffer=function(E){return this.digest(E)},g.prototype.digestFromArrayBuffer=function(E){return this.digest(E)},g.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},g.prototype.append=function(E){var P=0,b=E.byteLength||E.length||E.size||0,C=this._offset%this._maxChunkLen,l=void 0;for(this._offset+=b;P<b;)l=Math.min(b-P,this._maxChunkLen-C),this._write(E,P,l,C),P+=l,(C+=l)===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),C=0);return this},g.prototype.getState=function(){var P=void 0;if(this._offset%this._maxChunkLen)P=this._heap.slice(0);else{var b=new Int32Array(this._heap,this._padMaxChunkLen+320,5);P=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)}return{offset:this._offset,heap:P}},g.prototype.setState=function(E){return this._offset=E.offset,20===E.heap.byteLength?new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(E.heap)):this._h32.set(new Int32Array(E.heap)),this},g.prototype.rawEnd=function(){var E=this._offset,b=this._padChunk(E%this._maxChunkLen,E);this._core.hash(b,this._padMaxChunkLen);var C=s(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),C},g.prototype.end=function(){return i(this.rawEnd().buffer)},g}();_.exports=h,_.exports._core=w},function(_,d){for(var x=new Array(256),v=0;v<256;v++)x[v]=(v<16?"0":"")+v.toString(16);_.exports.toHex=function(w){for(var f=new Uint8Array(w),i=new Array(w.byteLength),n=0;n<i.length;n++)i[n]=x[f[n]];return i.join("")},_.exports.ceilHeapSize=function(w){var f=0;if(w<=65536)return 65536;if(w<16777216)for(f=1;f<w;f<<=1);else for(f=16777216;f<w;f+=16777216);return f},_.exports.isDedicatedWorkerScope=function(w){return"WorkerGlobalScope"in w&&w instanceof w.WorkerGlobalScope&&!("SharedWorkerGlobalScope"in w&&w instanceof w.SharedWorkerGlobalScope)&&!("ServiceWorkerGlobalScope"in w&&w instanceof w.ServiceWorkerGlobalScope)}},function(_,d,x){_.exports=function(){var v=x(0),f=function(n,a,p,u,o){var s=new self.FileReader;s.onloadend=function(){if(s.error)return o(s.error);var g=s.result;a+=s.result.byteLength;try{n.append(g)}catch(T){return void o(T)}a<u.size?f(n,a,p,u,o):o(null,n.end())},s.readAsArrayBuffer(u.slice(a,a+p))},i=!0;return self.onmessage=function(n){if(i){var a=n.data.data,p=n.data.file,u=n.data.id;if(void 0!==u&&(p||a)){var o=n.data.blockSize||4194304,s=new v(o);s.resetState();var h=function(g,T){g?self.postMessage({id:u,error:g.name}):self.postMessage({id:u,hash:T})};a&&function(n,a,p){try{p(null,n.digest(a))}catch(u){return p(u)}}(s,a,h),p&&f(s,0,o,p,h)}}},function(){i=!1}}},function(_,d,x){var v=x(4),w=x(0),f=x(7),i=x(2),n=x(1),p="undefined"!=typeof self&&(0,n.isDedicatedWorkerScope)(self);w.disableWorkerBehaviour=p?i():function(){},w.createWorker=function(){var u=v(2),o=u.terminate;return u.terminate=function(){URL.revokeObjectURL(u.objectURL),o.call(u)},u},w.createHash=f,_.exports=w},function(_,d,x){function v(u){var o={};function s(g){if(o[g])return o[g].exports;var T=o[g]={i:g,l:!1,exports:{}};return u[g].call(T.exports,T,T.exports,s),T.l=!0,T.exports}s.m=u,s.c=o,s.i=function(g){return g},s.d=function(g,T,E){s.o(g,T)||Object.defineProperty(g,T,{configurable:!1,enumerable:!0,get:E})},s.r=function(g){Object.defineProperty(g,"__esModule",{value:!0})},s.n=function(g){var T=g&&g.__esModule?function(){return g.default}:function(){return g};return s.d(T,"a",T),T},s.o=function(g,T){return Object.prototype.hasOwnProperty.call(g,T)},s.p="/",s.oe=function(g){throw console.error(g),g};var h=s(s.s=ENTRY_MODULE);return h.default||h}var w="[\\.|\\-|\\+|\\w|/|@]+",f="\\((/\\*.*?\\*/)?s?.*?("+w+").*?\\)";function i(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(u,o,s){var h={};h[s]=[];var g=o.toString(),T=g.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!T)return h;for(var b,E=T[1],P=new RegExp("(\\\\n|\\W)"+i(E)+f,"g");b=P.exec(g);)"dll-reference"!==b[3]&&h[s].push(b[3]);for(P=new RegExp("\\("+i(E)+'\\("(dll-reference\\s('+w+'))"\\)\\)'+f,"g");b=P.exec(g);)u[b[2]]||(h[s].push(b[1]),u[b[2]]=x(b[1]).m),h[b[2]]=h[b[2]]||[],h[b[2]].push(b[4]);return h}function a(u){return Object.keys(u).reduce(function(s,h){return s||u[h].length>0},!1)}_.exports=function(u,o){var s={main:x.m},h=(o=o||{}).all?{main:Object.keys(s)}:function(u,o){for(var s={main:[o]},h={main:[]},g={main:{}};a(s);)for(var T=Object.keys(s),E=0;E<T.length;E++){var P=T[E],C=s[P].pop();if(g[P]=g[P]||{},!g[P][C]&&u[P][C]){g[P][C]=!0,h[P]=h[P]||[],h[P].push(C);for(var l=n(u,u[P][C],P),m=Object.keys(l),U=0;U<m.length;U++)s[m[U]]=s[m[U]]||[],s[m[U]]=s[m[U]].concat(l[m[U]])}}return h}(s,u),g="";Object.keys(h).filter(function(C){return"main"!==C}).forEach(function(C){for(var l=0;h[C][l];)l++;h[C].push(l),s[C][l]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",g=g+"var "+C+" = ("+v.toString().replace("ENTRY_MODULE",JSON.stringify(l))+")({"+h[C].map(function(m){return JSON.stringify(m)+": "+s[C][m].toString()}).join(",")+"});\n"}),g=g+"("+v.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+h.main.map(function(C){return JSON.stringify(C)+": "+s.main[C].toString()}).join(",")+"})(self);";var T=new window.Blob([g],{type:"text/javascript"});if(o.bare)return T;var P=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(T),b=new window.Worker(P);return b.objectURL=P,b}},function(_,d){_.exports=function(v,w,f){var i=new v.Int32Array(f);return{hash:function(a,p){a|=0;var u=0,o=0,s=0,h=0,g=0,T=0,E=0,P=0,b=0,C=0,l=0,m=0,U=0,M=0;for(s=0|i[320+(p|=0)>>2],g=0|i[p+324>>2],E=0|i[p+328>>2],b=0|i[p+332>>2],l=0|i[p+336>>2],u=0;(0|u)<(0|a);u=u+64|0){for(h=s,T=g,P=E,C=b,m=l,o=0;(0|o)<64;o=o+4|0)U=((s<<5|s>>>27)+(g&E|~g&b)|0)+(1518500249+((M=0|i[u+o>>2])+l|0)|0)|0,l=b,b=E,E=g<<30|g>>>2,g=s,s=U,i[a+o>>2]=M;for(o=a+64|0;(0|o)<(a+80|0);o=o+4|0)U=((s<<5|s>>>27)+(g&E|~g&b)|0)+(1518500249+((M=(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])<<1|(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])>>>31)+l|0)|0)|0,l=b,b=E,E=g<<30|g>>>2,g=s,s=U,i[o>>2]=M;for(o=a+80|0;(0|o)<(a+160|0);o=o+4|0)U=((s<<5|s>>>27)+(g^E^b)|0)+(1859775393+((M=(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])<<1|(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])>>>31)+l|0)|0)|0,l=b,b=E,E=g<<30|g>>>2,g=s,s=U,i[o>>2]=M;for(o=a+160|0;(0|o)<(a+240|0);o=o+4|0)U=((s<<5|s>>>27)+(g&E|g&b|E&b)|0)+(((M=(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])<<1|(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])>>>31)+l|0)-1894007588|0)|0,l=b,b=E,E=g<<30|g>>>2,g=s,s=U,i[o>>2]=M;for(o=a+240|0;(0|o)<(a+320|0);o=o+4|0)U=((s<<5|s>>>27)+(g^E^b)|0)+(((M=(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])<<1|(i[o-12>>2]^i[o-32>>2]^i[o-56>>2]^i[o-64>>2])>>>31)+l|0)-899497514|0)|0,l=b,b=E,E=g<<30|g>>>2,g=s,s=U,i[o>>2]=M;s=s+h|0,g=g+T|0,E=E+P|0,b=b+C|0,l=l+m|0}i[p+320>>2]=s,i[p+324>>2]=g,i[p+328>>2]=E,i[p+332>>2]=b,i[p+336>>2]=l}}}},function(_,d){var x=this,v=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(v=new self.FileReaderSync);var f=function(n,a,p,u,o,s){var h=void 0,g=s%4,T=(o+g)%4,E=o-T;switch(g){case 0:a[s]=n[u+3];case 1:a[s+1-(g<<1)|0]=n[u+2];case 2:a[s+2-(g<<1)|0]=n[u+1];case 3:a[s+3-(g<<1)|0]=n[u]}if(!(o<T+(4-g))){for(h=4-g;h<E;h=h+4|0)p[s+h>>2|0]=n[u+h]<<24|n[u+h+1]<<16|n[u+h+2]<<8|n[u+h+3];switch(T){case 3:a[s+E+1|0]=n[u+E+2];case 2:a[s+E+2|0]=n[u+E+1];case 1:a[s+E+3|0]=n[u+E]}}};_.exports=function(n,a,p,u,o,s){if("string"==typeof n)return function(n,a,p,u,o,s){var h=void 0,g=s%4,T=(o+g)%4,E=o-T;switch(g){case 0:a[s]=n.charCodeAt(u+3);case 1:a[s+1-(g<<1)|0]=n.charCodeAt(u+2);case 2:a[s+2-(g<<1)|0]=n.charCodeAt(u+1);case 3:a[s+3-(g<<1)|0]=n.charCodeAt(u)}if(!(o<T+(4-g))){for(h=4-g;h<E;h=h+4|0)p[s+h>>2]=n.charCodeAt(u+h)<<24|n.charCodeAt(u+h+1)<<16|n.charCodeAt(u+h+2)<<8|n.charCodeAt(u+h+3);switch(T){case 3:a[s+E+1|0]=n.charCodeAt(u+E+2);case 2:a[s+E+2|0]=n.charCodeAt(u+E+1);case 1:a[s+E+3|0]=n.charCodeAt(u+E)}}}(n,a,p,u,o,s);if(n instanceof Array||x&&x.Buffer&&x.Buffer.isBuffer(n))return f(n,a,p,u,o,s);if(n instanceof ArrayBuffer)return f(new Uint8Array(n),a,p,u,o,s);if(n.buffer instanceof ArrayBuffer)return f(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),a,p,u,o,s);if(n instanceof Blob)return function(n,a,p,u,o,s){var h=void 0,g=s%4,T=(o+g)%4,E=o-T,P=new Uint8Array(v.readAsArrayBuffer(n.slice(u,u+o)));switch(g){case 0:a[s]=P[3];case 1:a[s+1-(g<<1)|0]=P[2];case 2:a[s+2-(g<<1)|0]=P[1];case 3:a[s+3-(g<<1)|0]=P[0]}if(!(o<T+(4-g))){for(h=4-g;h<E;h=h+4|0)p[s+h>>2|0]=P[h]<<24|P[h+1]<<16|P[h+2]<<8|P[h+3];switch(T){case 3:a[s+E+1|0]=P[E+2];case 2:a[s+E+2|0]=P[E+1];case 1:a[s+E+3|0]=P[E]}}}(n,a,p,u,o,s);throw new Error("Unsupported data type.")}},function(_,d,x){var v=function(){function p(u,o){for(var s=0;s<o.length;s++){var h=o[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,o,s){return o&&p(u.prototype,o),s&&p(u,s),u}}();var f=x(0),n=x(1).toHex,a=function(){function p(){(function(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")})(this,p),this._rusha=new f,this._rusha.resetState()}return p.prototype.update=function(o){return this._rusha.append(o),this},p.prototype.digest=function(o){var s=this._rusha.rawEnd().buffer;if(!o)return s;if("hex"===o)return n(s);throw new Error("unsupported digest encoding")},v(p,[{key:"state",get:function(){return this._rusha.getState()},set:function(u){this._rusha.setState(u)}}]),p}();_.exports=function(){return new a}}])},19194:F=>{F.exports=function(_,d){var x=[];_.on("data",function(v){x.push(v)}),_.once("end",function(){d&&d(null,Buffer.concat(x)),d=null}),_.once("error",function(v){d&&d(v),d=null})}},99769:(F,_,d)=>{F.exports=u;const x=d(19194),v=d(11356),w=d(42107),f=d(8749),i=d(55211),n=d(90118),a=d(56099),p=o=>null!==o&&"object"==typeof o&&"function"==typeof o.pipe;function u(o,s){if(o=Object.assign({maxRedirects:10},"string"==typeof o?{url:o}:o),s=i(s),o.url){const{hostname:P,port:b,protocol:C,auth:l,path:m}=a.parse(o.url);delete o.url,P||b||C||l?Object.assign(o,{hostname:P,port:b,protocol:C,auth:l,path:m}):o.path=m}const h={"accept-encoding":"gzip, deflate"};let g;o.headers&&Object.keys(o.headers).forEach(P=>h[P.toLowerCase()]=o.headers[P]),o.headers=h,o.body?g=o.json&&!p(o.body)?JSON.stringify(o.body):o.body:o.form&&(g="string"==typeof o.form?o.form:n.stringify(o.form),o.headers["content-type"]="application/x-www-form-urlencoded"),g&&(o.method||(o.method="POST"),p(g)||(o.headers["content-length"]=Buffer.byteLength(g)),o.json&&!o.form&&(o.headers["content-type"]="application/json")),delete o.body,delete o.form,o.json&&(o.headers.accept="application/json"),o.method&&(o.method=o.method.toUpperCase());const E=("https:"===o.protocol?f:w).request(o,P=>{if(!1!==o.followRedirects&&P.statusCode>=300&&P.statusCode<400&&P.headers.location)return o.url=P.headers.location,delete o.headers.host,P.resume(),"POST"===o.method&&[301,302].includes(P.statusCode)&&(o.method="GET",delete o.headers["content-length"],delete o.headers["content-type"]),0==o.maxRedirects--?s(new Error("too many redirects")):u(o,s);s(null,"function"==typeof v&&"HEAD"!==o.method?v(P):P)});return E.on("timeout",()=>{E.abort(),s(new Error("Request timed out"))}),E.on("error",s),p(g)?g.on("error",s).pipe(E):E.end(g),E}u.concat=(o,s)=>u(o,(h,g)=>{if(h)return s(h);x(g,(T,E)=>{if(T)return s(T);if(o.json)try{E=JSON.parse(E.toString())}catch(P){return s(P,g,E)}s(null,g,E)})}),["get","post","put","patch","head","delete"].forEach(o=>{u[o]=(s,h)=>("string"==typeof s&&(s={url:s}),u(Object.assign({method:o.toUpperCase()},s),h))})},20316:(F,_,d)=>{const x=d(90404),v=d(10466),w=new x,f="undefined"!=typeof window?window:self,i=f.crypto||f.msCrypto||{};let n=i.subtle||i.webkitSubtle;function a(s){return w.digest(s)}try{n.digest({name:"sha-1"},new Uint8Array).catch(function(){n=!1})}catch(s){n=!1}F.exports=function(s,h){n?("string"==typeof s&&(s=function(s){const h=s.length,g=new Uint8Array(h);for(let T=0;T<h;T++)g[T]=s.charCodeAt(T);return g}(s)),n.digest({name:"sha-1"},s).then(function(T){h(function(s){const h=s.length,g=[];for(let T=0;T<h;T++){const E=s[T];g.push((E>>>4).toString(16)),g.push((15&E).toString(16))}return g.join("")}(new Uint8Array(T)))},function(){h(a(s))})):"undefined"!=typeof window?v(s,function(T,E){h(T?a(s):E)}):queueMicrotask(()=>h(a(s)))},F.exports.sync=a},10466:(F,_,d)=>{const x=d(90404);let v,w,f;F.exports=function(a,p){v||(v=x.createWorker(),w=1,f={},v.onmessage=function(p){const u=p.data.id,o=f[u];delete f[u],null!=p.data.error?o(new Error("Rusha worker error: "+p.data.error)):o(null,p.data.hash)}),f[w]=p,v.postMessage({id:w,data:a}),w+=1}},11197:(F,_,d)=>{const x=d(80289),v=d(65126);F.exports={Throttle:x,ThrottleGroup:v}},65126:(F,_,d)=>{const{TokenBucket:x}=d(52968),v=d(80289);F.exports=class{constructor(i={}){if("object"!=typeof i)throw new Error("Options must be an object");this.throttles=[],this.setEnabled(i.enabled),this.setRate(i.rate,i.chunksize)}getEnabled(){return this._enabled}getRate(){return this.bucket.tokensPerInterval}getChunksize(){return this.chunksize}setEnabled(i=!0){if("boolean"!=typeof i)throw new Error("Enabled must be a boolean");this._enabled=i;for(const n of this.throttles)n.setEnabled(i)}setRate(i,n=null){if(!Number.isInteger(i)||i<0)throw new Error("Rate must be an integer bigger than zero");if(i=parseInt(i),n&&("number"!=typeof n||n<=0))throw new Error("Chunksize must be bigger than zero");if(n=n||Math.max(parseInt(i/10),1),n=parseInt(n),i>0&&n>i)throw new Error("Chunk size must be smaller than rate");this.bucket||(this.bucket=new x(i,i,"second",null)),this.bucket.bucketSize=i,this.bucket.tokensPerInterval=i,this.chunksize=n}setChunksize(i){if(!Number.isInteger(i)||i<=0)throw new Error("Chunk size must be an integer bigger than zero");const n=this.getRate();if(i=parseInt(i),n>0&&i>n)throw new Error("Chunk size must be smaller than rate");this.chunksize=i}throttle(i={}){if("object"!=typeof i)throw new Error("Options must be an object");return new v(rn(nn({},i),{group:this}))}destroy(){for(const i of this.throttles)i.destroy();this.throttles=[]}_addThrottle(i){if(!(i instanceof v))throw new Error("Throttle must be an instance of Throttle");this.throttles.push(i)}_removeThrottle(i){const n=this.throttles.indexOf(i);n>-1&&this.throttles.splice(n,1)}}},80289:(F,_,d)=>{var x=d(65963).default;const{EventEmitter:v}=d(43674),{Transform:w}=d(90955),{wait:f}=d(85823);F.exports=class extends w{constructor(p={}){if(super(),"object"!=typeof p)throw new Error("Options must be an object");const u=Object.assign({},p);if(u.group&&!(u.group instanceof n))throw new Error("Group must be an instanece of ThrottleGroup");u.group||(u.group=new n(u)),this._setEnabled(u.enabled||u.group.enabled),this._group=u.group,this._emitter=new v,this._destroyed=!1,this._group._addThrottle(this)}getEnabled(){return this._enabled}getGroup(){return this._group}_setEnabled(p=!0){if("boolean"!=typeof p)throw new Error("Enabled must be a boolean");this._enabled=p}setEnabled(p){this._setEnabled(p),this._emitter.emit(this._enabled?"enabled":"disabled")}_transform(p,u){this._processChunk(p,u)}_waitForTokens(p){var u=this;return x(function*(){return new Promise((o,s)=>{let h=!1;const g=u;function T(E){if(g._emitter.removeListener("disabled",T),g._emitter.removeListener("destroyed",T),!h){if(h=!0,E)return s(E);o()}}u._emitter.once("disabled",T),u._emitter.once("destroyed",T),u._group.bucket.removeTokens(p,T)})})()}_areBothEnabled(){return this._enabled&&this._group.getEnabled()}_processChunk(p,u){var o=this;return x(function*(){if(!o._areBothEnabled())return u(null,p);let s=0,h=o._group.getChunksize(),g=p.slice(s,s+h);for(;g.length>0;){if(o._areBothEnabled())try{for(;0===o._group.getRate()&&!o._destroyed&&o._areBothEnabled();)if(yield f(1e3),o._destroyed)return;if(o._areBothEnabled()&&!o._group.bucket.tryRemoveTokens(g.length)&&(yield o._waitForTokens(g.length),o._destroyed))return}catch(T){return u(T)}o.push(g),s+=h,h=o._areBothEnabled()?o._group.getChunksize():p.length-s,g=p.slice(s,s+h)}return u()})()}destroy(...p){this._group._removeThrottle(this),this._destroyed=!0,this._emitter.emit("destroyed"),super.destroy(...p)}};const n=d(65126)},85823:F=>{F.exports={wait:function(d){return new Promise(x=>setTimeout(x,d))}}},2755:F=>{var v,_=1,d=65535,w=function(){_=_+1&d};F.exports=function(f){v||(v=setInterval(w,250)).unref&&v.unref();var i=4*(f||5),n=[0],a=1,p=_-1&d;return function(u){var o=_-p&d;for(o>i&&(o=i),p=_;o--;)a===i&&(a=0),n[a]=n[0===a?i-1:a-1],a++;u&&(n[a-1]+=u);var s=n[a-1];return n.length<4?s:4*(s-(n.length<i?0:n[a===i?0:a]))/n.length}}},62834:(F,_,d)=>{F.exports=w;var x=d(43674).EventEmitter;function w(){x.call(this)}d(18134)(w,x),w.Readable=d(95760),w.Writable=d(32023),w.Duplex=d(34968),w.Transform=d(23514),w.PassThrough=d(32032),w.finished=d(86777),w.pipeline=d(63242),w.Stream=w,w.prototype.pipe=function(f,i){var n=this;function a(T){f.writable&&!1===f.write(T)&&n.pause&&n.pause()}function p(){n.readable&&n.resume&&n.resume()}n.on("data",a),f.on("drain",p),!f._isStdio&&(!i||!1!==i.end)&&(n.on("end",o),n.on("close",s));var u=!1;function o(){u||(u=!0,f.end())}function s(){u||(u=!0,"function"==typeof f.destroy&&f.destroy())}function h(T){if(g(),0===x.listenerCount(this,"error"))throw T}function g(){n.removeListener("data",a),f.removeListener("drain",p),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",h),f.removeListener("error",h),n.removeListener("end",g),n.removeListener("close",g),f.removeListener("close",g)}return n.on("error",h),f.on("error",h),n.on("end",g),n.on("close",g),f.on("close",g),f.emit("pipe",n),f}},67461:(F,_,d)=>{var x=d(5431),v=d(12547),w=d(5859),f=d(61320),i=d(56099),n=_;n.request=function(a,p){a="string"==typeof a?i.parse(a):w(a);var u=-1===global.location.protocol.search(/^https?:$/)?"http:":"",o=a.protocol||u,s=a.hostname||a.host,h=a.port,g=a.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),a.url=(s?o+"//"+s:"")+(h?":"+h:"")+g,a.method=(a.method||"GET").toUpperCase(),a.headers=a.headers||{};var T=new x(a);return p&&T.on("response",p),T},n.get=function(p,u){var o=n.request(p,u);return o.end(),o},n.ClientRequest=x,n.IncomingMessage=v.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=f,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},66238:(F,_)=>{var d;function x(){if(void 0!==d)return d;if(global.XMLHttpRequest){d=new global.XMLHttpRequest;try{d.open("GET",global.XDomainRequest?"/":"https://example.com")}catch(f){d=null}}else d=null;return d}function v(f){var i=x();if(!i)return!1;try{return i.responseType=f,i.responseType===f}catch(n){}return!1}function w(f){return"function"==typeof f}_.fetch=w(global.fetch)&&w(global.ReadableStream),_.writableStream=w(global.WritableStream),_.abortController=w(global.AbortController),_.arraybuffer=_.fetch||v("arraybuffer"),_.msstream=!_.fetch&&v("ms-stream"),_.mozchunkedarraybuffer=!_.fetch&&v("moz-chunked-arraybuffer"),_.overrideMimeType=_.fetch||!!x()&&w(x().overrideMimeType),d=null},5431:(F,_,d)=>{var x=d(66238),v=d(18134),w=d(12547),f=d(73469),i=w.IncomingMessage,n=w.readyStates,p=F.exports=function(s){var h=this;f.Writable.call(h),h._opts=s,h._body=[],h._headers={},s.auth&&h.setHeader("Authorization","Basic "+Buffer.from(s.auth).toString("base64")),Object.keys(s.headers).forEach(function(E){h.setHeader(E,s.headers[E])});var g,T=!0;if("disable-fetch"===s.mode||"requestTimeout"in s&&!x.abortController)T=!1,g=!0;else if("prefer-streaming"===s.mode)g=!1;else if("allow-wrong-content-type"===s.mode)g=!x.overrideMimeType;else{if(s.mode&&"default"!==s.mode&&"prefer-fast"!==s.mode)throw new Error("Invalid value for opts.mode");g=!0}h._mode=function(s,h){return x.fetch&&h?"fetch":x.mozchunkedarraybuffer?"moz-chunked-arraybuffer":x.msstream?"ms-stream":x.arraybuffer&&s?"arraybuffer":"text"}(g,T),h._fetchTimer=null,h._socketTimeout=null,h._socketTimer=null,h.on("finish",function(){h._onFinish()})};v(p,f.Writable),p.prototype.setHeader=function(s,h){var T=s.toLowerCase();-1===o.indexOf(T)&&(this._headers[T]={name:s,value:h})},p.prototype.getHeader=function(s){var h=this._headers[s.toLowerCase()];return h?h.value:null},p.prototype.removeHeader=function(s){delete this._headers[s.toLowerCase()]},p.prototype._onFinish=function(){var s=this;if(!s._destroyed){var h=s._opts;"timeout"in h&&0!==h.timeout&&s.setTimeout(h.timeout);var g=s._headers,T=null;"GET"!==h.method&&"HEAD"!==h.method&&(T=new Blob(s._body,{type:(g["content-type"]||{}).value||""}));var E=[];if(Object.keys(g).forEach(function(l){var m=g[l].name,U=g[l].value;Array.isArray(U)?U.forEach(function(M){E.push([m,M])}):E.push([m,U])}),"fetch"===s._mode){var P=null;if(x.abortController){var b=new AbortController;P=b.signal,s._fetchAbortController=b,"requestTimeout"in h&&0!==h.requestTimeout&&(s._fetchTimer=global.setTimeout(function(){s.emit("requestTimeout"),s._fetchAbortController&&s._fetchAbortController.abort()},h.requestTimeout))}global.fetch(s._opts.url,{method:s._opts.method,headers:E,body:T||void 0,mode:"cors",credentials:h.withCredentials?"include":"same-origin",signal:P}).then(function(l){s._fetchResponse=l,s._resetTimers(!1),s._connect()},function(l){s._resetTimers(!0),s._destroyed||s.emit("error",l)})}else{var C=s._xhr=new global.XMLHttpRequest;try{C.open(s._opts.method,s._opts.url,!0)}catch(l){return void process.nextTick(function(){s.emit("error",l)})}"responseType"in C&&(C.responseType=s._mode),"withCredentials"in C&&(C.withCredentials=!!h.withCredentials),"text"===s._mode&&"overrideMimeType"in C&&C.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in h&&(C.timeout=h.requestTimeout,C.ontimeout=function(){s.emit("requestTimeout")}),E.forEach(function(l){C.setRequestHeader(l[0],l[1])}),s._response=null,C.onreadystatechange=function(){switch(C.readyState){case n.LOADING:case n.DONE:s._onXHRProgress()}},"moz-chunked-arraybuffer"===s._mode&&(C.onprogress=function(){s._onXHRProgress()}),C.onerror=function(){s._destroyed||(s._resetTimers(!0),s.emit("error",new Error("XHR error")))};try{C.send(T)}catch(l){return void process.nextTick(function(){s.emit("error",l)})}}}},p.prototype._onXHRProgress=function(){var s=this;s._resetTimers(!1),function(s){try{var h=s.status;return null!==h&&0!==h}catch(g){return!1}}(s._xhr)&&!s._destroyed&&(s._response||s._connect(),s._response._onXHRProgress(s._resetTimers.bind(s)))},p.prototype._connect=function(){var s=this;s._destroyed||(s._response=new i(s._xhr,s._fetchResponse,s._mode,s._resetTimers.bind(s)),s._response.on("error",function(h){s.emit("error",h)}),s.emit("response",s._response))},p.prototype._write=function(s,h,g){this._body.push(s),g()},p.prototype._resetTimers=function(s){var h=this;global.clearTimeout(h._socketTimer),h._socketTimer=null,s?(global.clearTimeout(h._fetchTimer),h._fetchTimer=null):h._socketTimeout&&(h._socketTimer=global.setTimeout(function(){h.emit("timeout")},h._socketTimeout))},p.prototype.abort=p.prototype.destroy=function(s){var h=this;h._destroyed=!0,h._resetTimers(!0),h._response&&(h._response._destroyed=!0),h._xhr?h._xhr.abort():h._fetchAbortController&&h._fetchAbortController.abort(),s&&h.emit("error",s)},p.prototype.end=function(s,h,g){"function"==typeof s&&(g=s,s=void 0),f.Writable.prototype.end.call(this,s,h,g)},p.prototype.setTimeout=function(s,h){var g=this;h&&g.once("timeout",h),g._socketTimeout=s,g._resetTimers(!1)},p.prototype.flushHeaders=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},12547:(F,_,d)=>{var x=d(66238),v=d(18134),w=d(73469),f=_.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},i=_.IncomingMessage=function(n,a,p,u){var o=this;if(w.Readable.call(o),o._mode=p,o.headers={},o.rawHeaders=[],o.trailers={},o.rawTrailers=[],o.on("end",function(){process.nextTick(function(){o.emit("close")})}),"fetch"===p){let b=function(){h.read().then(function(C){if(!o._destroyed){if(u(C.done),C.done)return void o.push(null);o.push(Buffer.from(C.value)),b()}}).catch(function(C){u(!0),o._destroyed||o.emit("error",C)})};if(o._fetchResponse=a,o.url=a.url,o.statusCode=a.status,o.statusMessage=a.statusText,a.headers.forEach(function(C,l){o.headers[l.toLowerCase()]=C,o.rawHeaders.push(l,C)}),x.writableStream){var s=new WritableStream({write:function(C){return u(!1),new Promise(function(l,m){o._destroyed?m():o.push(Buffer.from(C))?l():o._resumeFetch=l})},close:function(){u(!0),o._destroyed||o.push(null)},abort:function(C){u(!0),o._destroyed||o.emit("error",C)}});try{return void a.body.pipeTo(s).catch(function(C){u(!0),o._destroyed||o.emit("error",C)})}catch(C){}}var h=a.body.getReader();b()}else if(o._xhr=n,o._pos=0,o.url=n.responseURL,o.statusCode=n.status,o.statusMessage=n.statusText,n.getAllResponseHeaders().split(/\r?\n/).forEach(function(b){var C=b.match(/^([^:]+):\s*(.*)/);if(C){var l=C[1].toLowerCase();"set-cookie"===l?(void 0===o.headers[l]&&(o.headers[l]=[]),o.headers[l].push(C[2])):void 0!==o.headers[l]?o.headers[l]+=", "+C[2]:o.headers[l]=C[2],o.rawHeaders.push(C[1],C[2])}}),o._charset="x-user-defined",!x.overrideMimeType){var T=o.rawHeaders["mime-type"];if(T){var E=T.match(/;\s*charset=([^;])(;|$)/);E&&(o._charset=E[1].toLowerCase())}o._charset||(o._charset="utf-8")}};v(i,w.Readable),i.prototype._read=function(){var a=this._resumeFetch;a&&(this._resumeFetch=null,a())},i.prototype._onXHRProgress=function(n){var a=this,p=a._xhr,u=null;switch(a._mode){case"text":if((u=p.responseText).length>a._pos){var o=u.substr(a._pos);if("x-user-defined"===a._charset){for(var s=Buffer.alloc(o.length),h=0;h<o.length;h++)s[h]=255&o.charCodeAt(h);a.push(s)}else a.push(o,a._charset);a._pos=u.length}break;case"arraybuffer":if(p.readyState!==f.DONE||!p.response)break;u=p.response,a.push(Buffer.from(new Uint8Array(u)));break;case"moz-chunked-arraybuffer":if(u=p.response,p.readyState!==f.LOADING||!u)break;a.push(Buffer.from(new Uint8Array(u)));break;case"ms-stream":if(u=p.response,p.readyState!==f.LOADING)break;var g=new global.MSStreamReader;g.onprogress=function(){g.result.byteLength>a._pos&&(a.push(Buffer.from(new Uint8Array(g.result.slice(a._pos)))),a._pos=g.result.byteLength)},g.onload=function(){n(!0),a.push(null)},g.readAsArrayBuffer(u)}a._xhr.readyState===f.DONE&&"ms-stream"!==a._mode&&(n(!0),a.push(null))}},85403:(F,_,d)=>{var x=d(65963).default;F.exports=function(i,n){return f.apply(this,arguments)};const v=d(10411);function f(){return(f=x(function*(i,n){const a=yield v(i,n);return URL.createObjectURL(a)})).apply(this,arguments)}},10411:F=>{F.exports=function(d,x){if(null!=x&&"string"!=typeof x)throw new Error("Invalid mimetype, expected string.");return new Promise((v,w)=>{const f=[];d.on("data",i=>f.push(i)).once("end",()=>{const i=null!=x?new Blob(f,{type:x}):new Blob(f);v(i)}).once("error",w)})}},41825:(F,_,d)=>{var x=d(55211);F.exports=function(w,f,i){i=x(i);var n=Buffer.alloc(f),a=0;w.on("data",function(p){p.copy(n,a),a+=p.length}).on("end",function(){i(null,n)}).on("error",i)}},90955:(F,_,d)=>{const{EventEmitter:x}=d(43674),v=new Error("Stream was destroyed"),w=new Error("Premature close"),f=d(88703),i=d(44537),n=33554431,o=1^n,C=1024,U=8192,j=384^n,J=8<<16,le=32<<16,pe=64<<16,We=65544,lt=U|le,I=6|lt,X=8470536,Vt=Symbol.asyncIterator||Symbol("asyncIterator");class Tn{constructor(R,{highWaterMark:ue=16384,map:Oe=null,mapWritable:je,byteLength:nt,byteLengthWritable:tt}={}){this.stream=R,this.queue=new i,this.highWaterMark=ue,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=tt||nt||fn,this.map=je||Oe,this.afterWrite=$t.bind(this),this.afterUpdateNextTick=zn.bind(this)}get ended(){return 0!=(this.stream._duplexState&le)}push(R){return null!==this.map&&(R=this.map(R)),this.buffered+=this.byteLength(R),this.queue.push(R),this.buffered<this.highWaterMark?(this.stream._duplexState|=J,!0):(this.stream._duplexState|=1572864,!1)}shift(){const R=this.queue.shift(),ue=this.stream;return this.buffered-=this.byteLength(R),0===this.buffered&&(ue._duplexState&=33030143),R}end(R){"function"==typeof R?this.stream.once("finish",R):null!=R&&this.push(R),this.stream._duplexState=33423359&(16777216|this.stream._duplexState)}autoBatch(R,ue){const Oe=[],je=this.stream;for(Oe.push(R);589824==(589831&je._duplexState);)Oe.push(je._writableState.shift());if(0!=(7&je._duplexState))return ue(null);je._writev(Oe,ue)}update(){const R=this.stream;for(;(589831&R._duplexState)===J;){const ue=this.shift();R._duplexState|=327680,R._write(ue,this.afterWrite),R._duplexState&=33292287}0==(196608&R._duplexState)&&this.updateNonPrimary()}updateNonPrimary(){const R=this.stream;if(16777216==(17301511&R._duplexState))return R._duplexState=16777215&(65536|R._duplexState),void R._final(an.bind(this));2!=(6&R._duplexState)?1==(8404999&R._duplexState)&&(R._duplexState=(R._duplexState|We)&o,R._open(Rt.bind(this))):0==(R._duplexState&X)&&(R._duplexState|=We,R._destroy(ln.bind(this)))}updateNextTick(){0==(8454144&this.stream._duplexState)&&(this.stream._duplexState|=8454144,f(this.afterUpdateNextTick))}}class In{constructor(R,{highWaterMark:ue=16384,map:Oe=null,mapReadable:je,byteLength:nt,byteLengthReadable:tt}={}){this.stream=R,this.queue=new i,this.highWaterMark=ue,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=tt||nt||fn,this.map=je||Oe,this.pipeTo=null,this.afterRead=cn.bind(this),this.afterUpdateNextTick=un.bind(this)}get ended(){return 0!=(this.stream._duplexState&U)}pipe(R,ue){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if(this.stream._duplexState|=256,this.pipeTo=R,this.pipeline=new on(this.stream,R,ue||null),ue&&this.stream.on("error",Qt),ge(R))R._writableState.pipeline=this.pipeline,ue&&R.on("error",Qt),R.on("finish",this.pipeline.finished.bind(this.pipeline));else{const Oe=this.pipeline.done.bind(this.pipeline,R),je=this.pipeline.done.bind(this.pipeline,R,null);R.on("error",Oe),R.on("close",je),R.on("finish",this.pipeline.finished.bind(this.pipeline))}R.on("drain",Gt.bind(this)),this.stream.emit("piping",R),R.emit("pipe",this.stream)}push(R){const ue=this.stream;return null===R?(this.highWaterMark=0,ue._duplexState=33521647&(512|ue._duplexState),!1):(null!==this.map&&(R=this.map(R)),this.buffered+=this.byteLength(R),this.queue.push(R),ue._duplexState=33521663&(64|ue._duplexState),this.buffered<this.highWaterMark)}shift(){const R=this.queue.shift();return this.buffered-=this.byteLength(R),0===this.buffered&&(this.stream._duplexState&=33550271),R}unshift(R){let ue;const Oe=[];for(;void 0!==(ue=this.queue.shift());)Oe.push(ue);this.push(R);for(let je=0;je<Oe.length;je++)this.queue.push(Oe[je])}read(){const R=this.stream;if(64==(8263&R._duplexState)){const ue=this.shift();return 0!=(R._duplexState&C)&&R.emit("data",ue),null!==this.pipeTo&&!1===this.pipeTo.write(ue)&&(R._duplexState&=j),ue}return null}drain(){const R=this.stream;for(;64==(8263&R._duplexState)&&0!=(384&R._duplexState);){const ue=this.shift();0!=(R._duplexState&C)&&R.emit("data",ue),null!==this.pipeTo&&!1===this.pipeTo.write(ue)&&(R._duplexState&=j)}}update(){const R=this.stream;for(this.drain();this.buffered<this.highWaterMark&&0==(41487&R._duplexState);)R._duplexState|=32808,R._read(this.afterRead),R._duplexState&=33554399,0==(8&R._duplexState)&&this.drain();2112==(6215&R._duplexState)&&(R._duplexState|=4096,R.emit("readable")),0==(24&R._duplexState)&&this.updateNonPrimary()}updateNonPrimary(){const R=this.stream;512==(583&R._duplexState)&&(R._duplexState=33553919&(R._duplexState|U),R.emit("end"),(R._duplexState&I)===lt&&(R._duplexState|=2),null!==this.pipeTo&&this.pipeTo.end()),2!=(6&R._duplexState)?1==(8404999&R._duplexState)&&(R._duplexState=(R._duplexState|We)&o,R._open(Rt.bind(this))):0==(R._duplexState&X)&&(R._duplexState|=We,R._destroy(ln.bind(this)))}updateNextTick(){0==(16392&this.stream._duplexState)&&(this.stream._duplexState|=16392,f(this.afterUpdateNextTick))}}class sn{constructor(R){this.data=null,this.afterTransform=hn.bind(R),this.afterFinal=null}}class on{constructor(R,ue,Oe){this.from=R,this.to=ue,this.afterPipe=Oe,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(R,ue){ue&&(this.error=ue),R!==this.to||(this.to=null,null===this.from)?R!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0==(R._duplexState&U)&&this.to.destroy(this.error||new Error("Readable stream closed before ending")):(0==(this.from._duplexState&U)||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function Gt(){this.stream._duplexState|=256,0==(40&this.stream._duplexState)&&this.updateNextTick()}function an(be){const R=this.stream;be&&R.destroy(be),0==(6&R._duplexState)&&(R._duplexState|=le,R.emit("finish")),(R._duplexState&I)===lt&&(R._duplexState|=2),R._duplexState&=33488895,this.update()}function ln(be){const R=this.stream;!be&&this.error!==v&&(be=this.error),be&&R.emit("error",be),R._duplexState|=4,R.emit("close");const ue=R._readableState,Oe=R._writableState;null!==ue&&null!==ue.pipeline&&ue.pipeline.done(R,be),null!==Oe&&null!==Oe.pipeline&&Oe.pipeline.done(R,be)}function $t(be){const R=this.stream;be&&R.destroy(be),R._duplexState&=33488895,1048576==(1638407&R._duplexState)&&(R._duplexState&=32505855,(R._duplexState&pe)===pe&&R.emit("drain")),0==(262144&R._duplexState)&&this.update()}function cn(be){be&&this.stream.destroy(be),this.stream._duplexState&=33554423,0==(32&this.stream._duplexState)&&this.update()}function un(){this.stream._duplexState&=33538039,this.update()}function zn(){this.stream._duplexState&=25100287,this.update()}function Rt(be){const R=this.stream;be&&R.destroy(be),0==(2&R._duplexState)&&(0==(8711&R._duplexState)&&(R._duplexState|=16),0==(18874375&R._duplexState)&&(R._duplexState|=131072),R.emit("open")),R._duplexState&=33488887,null!==R._writableState&&R._writableState.update(),null!==R._readableState&&R._readableState.update()}function hn(be,R){null!=R&&this.push(R),this._writableState.afterWrite(be)}class Pt extends x{constructor(R){super(),this._duplexState=0,this._readableState=null,this._writableState=null,R&&(R.open&&(this._open=R.open),R.destroy&&(this._destroy=R.destroy),R.predestroy&&(this._predestroy=R.predestroy),R.signal&&R.signal.addEventListener("abort",An.bind(this)))}_open(R){R(null)}_destroy(R){R(null)}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return 0!=(4&this._duplexState)}get destroying(){return 0!=(6&this._duplexState)}destroy(R){0==(6&this._duplexState)&&(R||(R=v),this._duplexState=33423343&(2|this._duplexState),null!==this._readableState&&(this._readableState.error=R,this._readableState.updateNextTick()),null!==this._writableState&&(this._writableState.error=R,this._writableState.updateNextTick()),this._predestroy())}on(R,ue){return null!==this._readableState&&("data"===R&&(this._duplexState|=1152,this._readableState.updateNextTick()),"readable"===R&&(this._duplexState|=2048,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===R&&(this._duplexState|=pe,this._writableState.updateNextTick()),super.on(R,ue)}}class vt extends Pt{constructor(R){super(R),this._duplexState|=1|le,this._readableState=new In(this,R),R&&R.read&&(this._read=R.read)}_read(R){R(null)}pipe(R,ue){return this._readableState.pipe(R,ue),this._readableState.updateNextTick(),R}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(R){return this._readableState.updateNextTick(),this._readableState.push(R)}unshift(R){return this._readableState.updateNextTick(),this._readableState.unshift(R)}resume(){return this._duplexState|=128,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=33554303,this}static _fromAsyncIterator(R,ue){let Oe;const je=new vt(rn(nn({},ue),{read(tt){R.next().then(nt).then(tt.bind(null,null)).catch(tt)},predestroy(){Oe=R.return()},destroy(tt){Oe.then(tt.bind(null,null)).catch(tt)}}));return je;function nt(tt){je.push(tt.done?null:tt.value)}}static from(R,ue){if(ge(be=R)&&be.readable)return R;var be;if(R[Vt])return this._fromAsyncIterator(R[Vt](),ue);Array.isArray(R)||(R=void 0===R?[]:[R]);let Oe=0;return new vt(rn(nn({},ue),{read(je){this.push(Oe===R.length?null:R[Oe++]),je(null)}}))}static isBackpressured(R){return 0!=(8710&R._duplexState)||R._readableState.buffered>=R._readableState.highWaterMark}static isPaused(R){return 0==(128&R._duplexState)}[Vt](){const R=this;let ue=null,Oe=null,je=null;return this.on("error",Ge=>{ue=Ge}),this.on("readable",function(){null!==Oe&&St(R.read())}),this.on("close",function(){null!==Oe&&St(null)}),{[Vt](){return this},next:()=>new Promise(function(Ge,_t){Oe=Ge,je=_t;const wt=R.read();null!==wt?St(wt):0!=(4&R._duplexState)&&St(null)}),return:()=>Ht(null),throw:Ge=>Ht(Ge)};function St(Ge){null!==je&&(ue?je(ue):null===Ge&&0==(R._duplexState&U)?je(v):Oe({value:Ge,done:null===Ge}),je=Oe=null)}function Ht(Ge){return R.destroy(Ge),new Promise((_t,wt)=>{if(4&R._duplexState)return _t({value:void 0,done:!0});R.once("close",function(){Ge?wt(Ge):_t({value:void 0,done:!0})})})}}}class Yt extends vt{constructor(R){super(R),this._duplexState=1,this._writableState=new Tn(this,R),R&&(R.writev&&(this._writev=R.writev),R.write&&(this._write=R.write),R.final&&(this._final=R.final))}_writev(R,ue){ue(null)}_write(R,ue){this._writableState.autoBatch(R,ue)}_final(R){R(null)}write(R){return this._writableState.updateNextTick(),this._writableState.push(R)}end(R){return this._writableState.updateNextTick(),this._writableState.end(R),this}}class Xt extends Yt{constructor(R){super(R),this._transformState=new sn(this),R&&(R.transform&&(this._transform=R.transform),R.flush&&(this._flush=R.flush))}_write(R,ue){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=R:this._transform(R,this._transformState.afterTransform)}_read(R){if(null!==this._transformState.data){const ue=this._transformState.data;this._transformState.data=null,R(null),this._transform(ue,this._transformState.afterTransform)}else R(null)}_transform(R,ue){ue(null,R)}_flush(R){R(null)}_final(R){this._transformState.afterFinal=R,this._flush(Ie.bind(this))}}function Ie(be,R){const ue=this._transformState.afterFinal;if(be)return ue(be);null!=R&&this.push(R),this.push(null),ue(null)}function bt(be,...R){const ue=Array.isArray(be)?[...be,...R]:[be,...R],Oe=ue.length&&"function"==typeof ue[ue.length-1]?ue.pop():null;if(ue.length<2)throw new Error("Pipeline requires at least 2 streams");let je=ue[0],nt=null,tt=null;for(let Ge=1;Ge<ue.length;Ge++)nt=ue[Ge],ge(je)?je.pipe(nt,Ht):(St(je,!0,Ge>1,Ht),je.pipe(nt)),je=nt;if(Oe){let Ge=!1;nt.on("finish",()=>{Ge=!0}),nt.on("error",_t=>{tt=tt||_t}),nt.on("close",()=>Oe(tt||(Ge?null:w)))}return nt;function St(Ge,_t,wt,Ze){Ge.on("error",Ze),Ge.on("close",function(){if(_t&&Ge._readableState&&!Ge._readableState.ended||wt&&Ge._writableState&&!Ge._writableState.ended)return Ze(w)})}function Ht(Ge){if(Ge&&!tt){tt=Ge;for(const _t of ue)_t.destroy(Ge)}}}function Ft(be){return!!be._readableState||!!be._writableState}function ge(be){return"number"==typeof be._duplexState&&Ft(be)}function fn(be){return function(be){return"object"==typeof be&&null!==be&&"number"==typeof be.byteLength}(be)?be.byteLength:1024}function Qt(){}function An(){this.destroy(new Error("Stream aborted."))}F.exports={pipeline:bt,pipelinePromise:function(...be){return new Promise((R,ue)=>bt(...be,Oe=>{if(Oe)return ue(Oe);R()}))},isStream:Ft,isStreamx:ge,Stream:Pt,Writable:class extends Pt{constructor(R){super(R),this._duplexState|=1|U,this._writableState=new Tn(this,R),R&&(R.writev&&(this._writev=R.writev),R.write&&(this._write=R.write),R.final&&(this._final=R.final))}_writev(R,ue){ue(null)}_write(R,ue){this._writableState.autoBatch(R,ue)}_final(R){R(null)}static isBackpressured(R){return 0!=(19922950&R._duplexState)}write(R){return this._writableState.updateNextTick(),this._writableState.push(R)}end(R){return this._writableState.updateNextTick(),this._writableState.end(R),this}},Readable:vt,Duplex:Yt,Transform:Xt,PassThrough:class extends Xt{}}},89759:(F,_,d)=>{var x=d(58635);_.encode=x.encode,_.decode=x.decode},58635:(F,_)=>{"use strict";var x=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];_.encode=function(w){Buffer.isBuffer(w)||(w=new Buffer(w));for(var f=0,i=0,n=0,a=0,p=new Buffer(8*function(w){var f=Math.floor(w.length/5);return w.length%5==0?f:f+1}(w));f<w.length;){var u=w[f];n>3?(a=(a=u&255>>n)<<(n=(n+5)%8)|(f+1<w.length?w[f+1]:0)>>8-n,f++):(a=u>>8-(n+5)&31,0==(n=(n+5)%8)&&f++),p[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(a),i++}for(f=i;f<p.length;f++)p[f]=61;return p},_.decode=function(w){var n,f=0,i=0,a=0;Buffer.isBuffer(w)||(w=new Buffer(w));for(var p=new Buffer(Math.ceil(5*w.length/8)),u=0;u<w.length&&61!==w[u];u++){var o=w[u]-48;if(!(o<x.length))throw new Error("Invalid input - it is not base32 encoded string");i=x[o],f<=3?0==(f=(f+5)%8)?(p[a]=n|=i,a++,n=0):n|=255&i<<8-f:(p[a]=n|=255&i>>>(f=(f+5)%8),a++,n=255&i<<8-f)}return p.slice(0,a)}},62348:(F,_,d)=>{var x=d(16853).Buffer;F.exports=function(v){if(v instanceof Uint8Array){if(0===v.byteOffset&&v.byteLength===v.buffer.byteLength)return v.buffer;if("function"==typeof v.buffer.slice)return v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)}if(x.isBuffer(v)){for(var w=new Uint8Array(v.length),f=v.length,i=0;i<f;i++)w[i]=v[i];return w.buffer}throw new Error("Argument must be a Buffer")}},61207:(F,_,d)=>{const x=d(57115)("torrent-discovery"),v=d(2378),w=d(43674).EventEmitter,f=d(84032),i=d(26336),n=d(32067);F.exports=class extends w{constructor(u){if(super(),!u.peerId)throw new Error("Option `peerId` is required");if(!u.infoHash)throw new Error("Option `infoHash` is required");if(!process.browser&&!u.port)throw new Error("Option `port` is required");this.peerId="string"==typeof u.peerId?u.peerId:u.peerId.toString("hex"),this.infoHash="string"==typeof u.infoHash?u.infoHash.toLowerCase():u.infoHash.toString("hex"),this._port=u.port,this._userAgent=u.userAgent,this.destroyed=!1,this._announce=u.announce||[],this._intervalMs=u.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=s=>{this.emit("warning",s)},this._onError=s=>{this.emit("error",s)},this._onDHTPeer=(s,h)=>{h.toString("hex")===this.infoHash&&this.emit("peer",`${s.host}:${s.port}`,"dht")},this._onTrackerPeer=s=>{this.emit("peer",s,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")},this._onLSDPeer=(s,h)=>{this.emit("peer",s,"lsd")};const o=(s,h)=>{const g=new v(h);return g.on("warning",this._onWarning),g.on("error",this._onError),g.listen(s),this._internalDHT=!0,g};!1===u.tracker?this.tracker=null:u.tracker&&"object"==typeof u.tracker?(this._trackerOpts=Object.assign({},u.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),this.dht=!1===u.dht||"function"!=typeof v?null:u.dht&&"function"==typeof u.dht.addNode?u.dht:u.dht&&"object"==typeof u.dht?o(u.dhtPort,u.dht):o(u.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce()),this.lsd=!1===u.lsd||"function"!=typeof n?null:this._createLSD()}updatePort(u){u!==this._port&&(this._port=u,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(u){this.tracker&&this.tracker.complete(u)}destroy(u){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const o=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),o.push(s=>{this.tracker.destroy(s)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),o.push(s=>{this.dht.destroy(s)})),this.lsd&&(this.lsd.removeListener("warning",this._onWarning),this.lsd.removeListener("error",this._onError),this.lsd.removeListener("peer",this._onLSDPeer),o.push(s=>{this.lsd.destroy(s)})),f(o,u),this.dht=null,this.tracker=null,this.lsd=null,this._announce=null}_createTracker(){const u=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),o=new i(u);return o.on("warning",this._onWarning),o.on("error",this._onError),o.on("peer",this._onTrackerPeer),o.on("update",this._onTrackerAnnounce),o.setInterval(this._intervalMs),o.start(),o}_dhtAnnounce(){this._dhtAnnouncing||(x("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,u=>{this._dhtAnnouncing=!1,x("dht announce complete"),u&&this.emit("warning",u),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}_createLSD(){const u=Object.assign({},{infoHash:this.infoHash,peerId:this.peerId,port:this._port}),o=new n(u);return o.on("warning",this._onWarning),o.on("error",this._onError),o.on("peer",this._onLSDPeer),o.start(),o}}},282:F=>{const _=16384;class d{constructor(v){this.length=v,this.missing=v,this.sources=null,this._chunks=Math.ceil(v/_),this._remainder=v%_||_,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(v){return v===this._chunks-1?this._remainder:_}chunkLengthRemaining(v){return this.length-v*_}chunkOffset(v){return v*_}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._cancellations.length||this._reservations<this._chunks){let v=this._reservations;for(;this._cancellations.length;)v=Math.min(v,this._cancellations.pop());return this._reservations=this._chunks,v}return-1}cancel(v){!this.init()||this._cancellations.push(v)}cancelRemaining(v){!this.init()||(this._reservations=v)}get(v){return this.init()?this._buffer[v]:null}set(v,w,f){if(!this.init())return!1;const n=Math.ceil(w.length/_);for(let a=0;a<n;a++)if(!this._buffer[v+a]){const p=a*_,u=w.slice(p,p+_);this._buffered++,this._buffer[v+a]=u,this.missing-=u.length,this.sources.includes(f)||this.sources.push(f)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const v=Buffer.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,v}init(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}Object.defineProperty(d,"BLOCK_LENGTH",{value:_}),F.exports=d},65569:(F,_,d)=>{var x=d(49628).strict;F.exports=function(w){if(x(w)){var f=Buffer.from(w.buffer);return w.byteLength!==w.buffer.byteLength&&(f=f.slice(w.byteOffset,w.byteOffset+w.byteLength)),f}return Buffer.from(w)}},35151:(F,_,d)=>{var x=d(96371),v=Math.pow(2,32);_.encodingLength=function(){return 8},_.encode=function(w,f,i){f||(f=x(8)),i||(i=0);var n=Math.floor(w/v),a=w-n*v;return f.writeUInt32BE(n,i),f.writeUInt32BE(a,i+4),f},_.decode=function(w,f){f||(f=0);var i=w.readUInt32BE(f),n=w.readUInt32BE(f+4);return i*v+n},_.encode.bytes=8,_.decode.bytes=8},73225:F=>{F.exports=function(d,x){if(!(x>=d.length||x<0)){var v=d.pop();if(x<d.length){var w=d[x];return d[x]=v,w}return v}}},39021:function(F,_,d){var x;F=d.nmd(F),function(v){"object"==typeof global&&global;var n,a=2147483647,p=36,P=/^xn--/,b=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=Math.floor,M=String.fromCharCode;function z(G){throw RangeError(l[G])}function O(G,J){for(var $=G.length,le=[];$--;)le[$]=J(G[$]);return le}function W(G,J){var $=G.split("@"),le="";return $.length>1&&(le=$[0]+"@",G=$[1]),le+O((G=G.replace(C,".")).split("."),J).join(".")}function Q(G){for(var pe,te,J=[],$=0,le=G.length;$<le;)(pe=G.charCodeAt($++))>=55296&&pe<=56319&&$<le?56320==(64512&(te=G.charCodeAt($++)))?J.push(((1023&pe)<<10)+(1023&te)+65536):(J.push(pe),$--):J.push(pe);return J}function ie(G){return O(G,function(J){var $="";return J>65535&&($+=M((J-=65536)>>>10&1023|55296),J=56320|1023&J),$+M(J)}).join("")}function ae(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:p}function S(G,J){return G+22+75*(G<26)-((0!=J)<<5)}function B(G,J,$){var le=0;for(G=$?U(G/700):G>>1,G+=U(G/J);G>455;le+=p)G=U(G/35);return U(le+36*G/(G+38))}function j(G){var le,Be,De,Me,et,Pe,Te,Fe,We,st,J=[],$=G.length,pe=0,te=128,ve=72;for((Be=G.lastIndexOf("-"))<0&&(Be=0),De=0;De<Be;++De)G.charCodeAt(De)>=128&&z("not-basic"),J.push(G.charCodeAt(De));for(Me=Be>0?Be+1:0;Me<$;){for(et=pe,Pe=1,Te=p;Me>=$&&z("invalid-input"),((Fe=ae(G.charCodeAt(Me++)))>=p||Fe>U((a-pe)/Pe))&&z("overflow"),pe+=Fe*Pe,!(Fe<(We=Te<=ve?1:Te>=ve+26?26:Te-ve));Te+=p)Pe>U(a/(st=p-We))&&z("overflow"),Pe*=st;ve=B(pe-et,le=J.length+1,0==et),U(pe/le)>a-te&&z("overflow"),te+=U(pe/le),pe%=le,J.splice(pe++,0,te)}return ie(J)}function K(G){var J,$,le,pe,te,ve,Be,De,Me,et,Pe,Fe,We,st,lt,Te=[];for(Fe=(G=Q(G)).length,J=128,$=0,te=72,ve=0;ve<Fe;++ve)(Pe=G[ve])<128&&Te.push(M(Pe));for(le=pe=Te.length,pe&&Te.push("-");le<Fe;){for(Be=a,ve=0;ve<Fe;++ve)(Pe=G[ve])>=J&&Pe<Be&&(Be=Pe);for(Be-J>U((a-$)/(We=le+1))&&z("overflow"),$+=(Be-J)*We,J=Be,ve=0;ve<Fe;++ve)if((Pe=G[ve])<J&&++$>a&&z("overflow"),Pe==J){for(De=$,Me=p;!(De<(et=Me<=te?1:Me>=te+26?26:Me-te));Me+=p)Te.push(M(S(et+(lt=De-et)%(st=p-et),0))),De=U(lt/st);Te.push(M(S(De,0))),te=B($,We,le==pe),$=0,++le}++$,++J}return Te.join("")}n={version:"1.3.2",ucs2:{decode:Q,encode:ie},decode:j,encode:K,toASCII:function(G){return W(G,function(J){return b.test(J)?"xn--"+K(J):J})},toUnicode:function(G){return W(G,function(J){return P.test(J)?j(J.slice(4).toLowerCase()):J})}},void 0!==(x=function(){return n}.call(_,d,_,F))&&(F.exports=x)}()},56099:(F,_,d)=>{"use strict";var x=d(39021),v=d(25572);function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}_.parse=l,_.resolve=function(L,z){return l(L,!1,!0).resolve(z)},_.resolveObject=function(L,z){return L?l(L,!1,!0).resolveObject(z):z},_.format=function(L){return v.isString(L)&&(L=l(L)),L instanceof w?L.format():w.prototype.format.call(L)},_.Url=w;var f=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,n=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(p),o=["%","/","?",";","#"].concat(u),s=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,T=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=d(90118);function l(L,z,O){if(L&&v.isObject(L)&&L instanceof w)return L;var W=new w;return W.parse(L,z,O),W}w.prototype.parse=function(L,z,O){if(!v.isString(L))throw new TypeError("Parameter 'url' must be a string, not "+typeof L);var W=L.indexOf("?"),Q=-1!==W&&W<L.indexOf("#")?"?":"#",ie=L.split(Q);ie[0]=ie[0].replace(/\\/g,"/");var S=L=ie.join(Q);if(S=S.trim(),!O&&1===L.split("#").length){var B=n.exec(S);if(B)return this.path=S,this.href=S,this.pathname=B[1],B[2]?(this.search=B[2],this.query=z?C.parse(this.search.substr(1)):this.search.substr(1)):z&&(this.search="",this.query={}),this}var j=f.exec(S);if(j){var K=(j=j[0]).toLowerCase();this.protocol=K,S=S.substr(j.length)}if(O||j||S.match(/^\/\/[^@\/]+@[^@\/]+/)){var Y="//"===S.substr(0,2);Y&&(!j||!P[j])&&(S=S.substr(2),this.slashes=!0)}if(!P[j]&&(Y||j&&!b[j])){for(var se=-1,G=0;G<s.length;G++)-1!==(J=S.indexOf(s[G]))&&(-1===se||J<se)&&(se=J);var $,le;for(-1!==(le=-1===se?S.lastIndexOf("@"):S.lastIndexOf("@",se))&&($=S.slice(0,le),S=S.slice(le+1),this.auth=decodeURIComponent($)),se=-1,G=0;G<o.length;G++){var J;-1!==(J=S.indexOf(o[G]))&&(-1===se||J<se)&&(se=J)}-1===se&&(se=S.length),this.host=S.slice(0,se),S=S.slice(se),this.parseHost(),this.hostname=this.hostname||"";var pe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!pe)for(var te=this.hostname.split(/\./),ve=(G=0,te.length);G<ve;G++){var Be=te[G];if(Be&&!Be.match(g)){for(var De="",Me=0,et=Be.length;Me<et;Me++)Be.charCodeAt(Me)>127?De+="x":De+=Be[Me];if(!De.match(g)){var Pe=te.slice(0,G),Te=te.slice(G+1),Fe=Be.match(T);Fe&&(Pe.push(Fe[1]),Te.unshift(Fe[2])),Te.length&&(S="/"+Te.join(".")+S),this.hostname=Pe.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),pe||(this.hostname=x.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,pe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==S[0]&&(S="/"+S))}if(!E[K])for(G=0,ve=u.length;G<ve;G++){var lt=u[G];if(-1!==S.indexOf(lt)){var ot=encodeURIComponent(lt);ot===lt&&(ot=escape(lt)),S=S.split(lt).join(ot)}}var Ye=S.indexOf("#");-1!==Ye&&(this.hash=S.substr(Ye),S=S.slice(0,Ye));var I=S.indexOf("?");return-1!==I?(this.search=S.substr(I),this.query=S.substr(I+1),z&&(this.query=C.parse(this.query)),S=S.slice(0,I)):z&&(this.search="",this.query={}),S&&(this.pathname=S),b[K]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},w.prototype.format=function(){var L=this.auth||"";L&&(L=(L=encodeURIComponent(L)).replace(/%3A/i,":"),L+="@");var z=this.protocol||"",O=this.pathname||"",W=this.hash||"",Q=!1,ie="";this.host?Q=L+this.host:this.hostname&&(Q=L+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&v.isObject(this.query)&&Object.keys(this.query).length&&(ie=C.stringify(this.query));var ae=this.search||ie&&"?"+ie||"";return z&&":"!==z.substr(-1)&&(z+=":"),this.slashes||(!z||b[z])&&!1!==Q?(Q="//"+(Q||""),O&&"/"!==O.charAt(0)&&(O="/"+O)):Q||(Q=""),W&&"#"!==W.charAt(0)&&(W="#"+W),ae&&"?"!==ae.charAt(0)&&(ae="?"+ae),z+Q+(O=O.replace(/[?#]/g,function(S){return encodeURIComponent(S)}))+(ae=ae.replace("#","%23"))+W},w.prototype.resolve=function(L){return this.resolveObject(l(L,!1,!0)).format()},w.prototype.resolveObject=function(L){if(v.isString(L)){var z=new w;z.parse(L,!1,!0),L=z}for(var O=new w,W=Object.keys(this),Q=0;Q<W.length;Q++){var ie=W[Q];O[ie]=this[ie]}if(O.hash=L.hash,""===L.href)return O.href=O.format(),O;if(L.slashes&&!L.protocol){for(var ae=Object.keys(L),S=0;S<ae.length;S++){var B=ae[S];"protocol"!==B&&(O[B]=L[B])}return b[O.protocol]&&O.hostname&&!O.pathname&&(O.path=O.pathname="/"),O.href=O.format(),O}if(L.protocol&&L.protocol!==O.protocol){if(!b[L.protocol]){for(var j=Object.keys(L),K=0;K<j.length;K++){var Y=j[K];O[Y]=L[Y]}return O.href=O.format(),O}if(O.protocol=L.protocol,L.host||P[L.protocol])O.pathname=L.pathname;else{for(var ve=(L.pathname||"").split("/");ve.length&&!(L.host=ve.shift()););L.host||(L.host=""),L.hostname||(L.hostname=""),""!==ve[0]&&ve.unshift(""),ve.length<2&&ve.unshift(""),O.pathname=ve.join("/")}return O.search=L.search,O.query=L.query,O.host=L.host||"",O.auth=L.auth,O.hostname=L.hostname||L.host,O.port=L.port,(O.pathname||O.search)&&(O.path=(O.pathname||"")+(O.search||"")),O.slashes=O.slashes||L.slashes,O.href=O.format(),O}var J=O.pathname&&"/"===O.pathname.charAt(0),$=L.host||L.pathname&&"/"===L.pathname.charAt(0),le=$||J||O.host&&L.pathname,pe=le,te=O.pathname&&O.pathname.split("/")||[],Be=(ve=L.pathname&&L.pathname.split("/")||[],O.protocol&&!b[O.protocol]);if(Be&&(O.hostname="",O.port=null,O.host&&(""===te[0]?te[0]=O.host:te.unshift(O.host)),O.host="",L.protocol&&(L.hostname=null,L.port=null,L.host&&(""===ve[0]?ve[0]=L.host:ve.unshift(L.host)),L.host=null),le=le&&(""===ve[0]||""===te[0])),$)O.host=L.host||""===L.host?L.host:O.host,O.hostname=L.hostname||""===L.hostname?L.hostname:O.hostname,O.search=L.search,O.query=L.query,te=ve;else if(ve.length)te||(te=[]),te.pop(),te=te.concat(ve),O.search=L.search,O.query=L.query;else if(!v.isNullOrUndefined(L.search))return Be&&(O.hostname=O.host=te.shift(),(De=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=De.shift(),O.host=O.hostname=De.shift())),O.search=L.search,O.query=L.query,(!v.isNull(O.pathname)||!v.isNull(O.search))&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O;if(!te.length)return O.pathname=null,O.path=O.search?"/"+O.search:null,O.href=O.format(),O;for(var Me=te.slice(-1)[0],et=(O.host||L.host||te.length>1)&&("."===Me||".."===Me)||""===Me,Pe=0,Te=te.length;Te>=0;Te--)"."===(Me=te[Te])?te.splice(Te,1):".."===Me?(te.splice(Te,1),Pe++):Pe&&(te.splice(Te,1),Pe--);if(!le&&!pe)for(;Pe--;Pe)te.unshift("..");le&&""!==te[0]&&(!te[0]||"/"!==te[0].charAt(0))&&te.unshift(""),et&&"/"!==te.join("/").substr(-1)&&te.push("");var De,Fe=""===te[0]||te[0]&&"/"===te[0].charAt(0);return Be&&(O.hostname=O.host=Fe?"":te.length?te.shift():"",(De=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=De.shift(),O.host=O.hostname=De.shift())),(le=le||O.host&&te.length)&&!Fe&&te.unshift(""),te.length?O.pathname=te.join("/"):(O.pathname=null,O.path=null),(!v.isNull(O.pathname)||!v.isNull(O.search))&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=L.auth||O.auth,O.slashes=O.slashes||L.slashes,O.href=O.format(),O},w.prototype.parseHost=function(){var L=this.host,z=i.exec(L);z&&(":"!==(z=z[0])&&(this.port=z.substr(1)),L=L.substr(0,L.length-z.length)),L&&(this.hostname=L)}},25572:F=>{"use strict";F.exports={isString:function(_){return"string"==typeof _},isObject:function(_){return"object"==typeof _&&null!==_},isNull:function(_){return null===_},isNullOrUndefined:function(_){return null==_}}},57366:(F,_,d)=>{const{EventEmitter:x}=d(43674),v=d(22089),w=d(19296).Z,f=d(57115)("ut_metadata"),i=d(20316),p=16384;F.exports=u=>{class o extends x{constructor(h){super(),this._wire=h,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new w(0,{grow:1e3}),Buffer.isBuffer(u)&&this.setMetadata(u)}onHandshake(h,g,T){this._infoHash=h}onExtendedHandshake(h){return h.m&&h.m.ut_metadata?h.metadata_size?"number"!=typeof h.metadata_size||1e7<h.metadata_size||h.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=h.metadata_size,this._numPieces=Math.ceil(this._metadataSize/p),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(h){let g,T;try{const E=h.toString(),P=E.indexOf("ee")+2;g=v.decode(E.substring(0,P)),T=h.slice(P)}catch(E){return}switch(g.msg_type){case 0:this._onRequest(g.piece);break;case 1:this._onData(g.piece,T,g.total_size);break;case 2:this._onReject(g.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}setMetadata(h){if(this._metadataComplete)return!0;f("set metadata");try{const g=v.decode(h).info;g&&(h=v.encode(g))}catch(g){}return!(this._infoHash&&this._infoHash!==i.sync(h)||(this.cancel(),this.metadata=h,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",v.encode({info:v.decode(this.metadata)})),0))}_send(h,g){let T=v.encode(h);Buffer.isBuffer(g)&&(T=Buffer.concat([T,g])),this._wire.extended("ut_metadata",T)}_request(h){this._send({msg_type:0,piece:h})}_data(h,g,T){const E={msg_type:1,piece:h};"number"==typeof T&&(E.total_size=T),this._send(E,g)}_reject(h){this._send({msg_type:2,piece:h})}_onRequest(h){if(!this._metadataComplete)return void this._reject(h);const g=h*p;let T=g+p;T>this._metadataSize&&(T=this._metadataSize);const E=this.metadata.slice(g,T);this._data(h,E,this._metadataSize)}_onData(h,g,T){g.length>p||!this._fetching||(g.copy(this.metadata,h*p),this._bitfield.set(h),this._checkDone())}_onReject(h){this._remainingRejects>0&&this._fetching?(this._request(h),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=Buffer.alloc(this._metadataSize);for(let h=0;h<this._numPieces;h++)this._request(h)}}_checkDone(){let h=!0;for(let T=0;T<this._numPieces;T++)if(!this._bitfield.get(T)){h=!1;break}h&&(this.setMetadata(this.metadata)||this._failedMetadata())}_failedMetadata(){this._bitfield=new w(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return o.prototype.name="ut_metadata",o}},53713:(F,_,d)=>{const x=d(37046),v=d(43674),w=d(60675),f=d(40120),i=d(57623);class p{constructor(h,g){this._entries=h,this._countName=g||"count",this._index=0,this._offset=0,this.value=this._entries[0]}inc(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}F.exports=class extends v{constructor(h){super(),this._tracks=[],this._file=h,this._decoder=null,this._findMoov(0)}_findMoov(h){this._decoder&&this._decoder.destroy();let g=0;this._decoder=w.decode();const T=this._file.createReadStream({start:h});T.pipe(this._decoder);const E=P=>{"moov"===P.type?(this._decoder.removeListener("box",E),this._decoder.decode(b=>{T.destroy();try{this._processMoov(b)}catch(C){C.message=`Cannot parse mp4 file: ${C.message}`,this.emit("error",C)}})):P.length<4096?(g+=P.length,this._decoder.ignore()):(this._decoder.removeListener("box",E),g+=P.length,T.destroy(),this._decoder.destroy(),this._findMoov(h+g))};this._decoder.on("box",E)}_processMoov(h){const g=h.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(let b=0;b<g.length;b++){const C=g[b],l=C.mdia.minf.stbl,m=l.stsd.entries[0],U=C.mdia.hdlr.handlerType;let M,L;if("vide"===U&&"avc1"===m.type){if(this._hasVideo)continue;this._hasVideo=!0,M="avc1",m.avcC&&(M+=`.${m.avcC.mimeCodec}`),L=`video/mp4; codecs="${M}"`}else{if("soun"!==U||"mp4a"!==m.type)continue;if(this._hasAudio)continue;this._hasAudio=!0,M="mp4a",m.esds&&m.esds.mimeCodec&&(M+=`.${m.esds.mimeCodec}`),L=`audio/mp4; codecs="${M}"`}const z=[];let O=0,W=0,Q=0,ie=0,ae=0,S=0;const B=new p(l.stts.entries);let j=null;l.ctts&&(j=new p(l.ctts.entries));let K=0;for(;;){var T=l.stsc.entries[ae];const G=l.stsz.entries[O],J=B.value.duration;let le=!0;if(l.stss&&(le=l.stss.entries[K]===O+1),z.push({size:G,duration:J,dts:S,presentationOffset:j?j.value.compositionOffset:0,sync:le,offset:ie+(l.stco||l.co64).entries[Q]}),O++,O>=l.stsz.entries.length)break;if(W++,ie+=G,W>=T.samplesPerChunk){W=0,ie=0,Q++;const te=l.stsc.entries[ae+1];te&&Q+1>=te.firstChunk&&ae++}S+=J,B.inc(),j&&j.inc(),le&&K++}C.mdia.mdhd.duration=0,C.tkhd.duration=0,this._tracks.push({fragmentSequence:1,trackId:C.tkhd.trackId,timeScale:C.mdia.mdhd.timeScale,samples:z,currSample:null,currTime:null,moov:{type:"moov",mvhd:h.mvhd,traks:[{tkhd:C.tkhd,mdia:{mdhd:C.mdia.mdhd,hdlr:C.mdia.hdlr,elng:C.mdia.elng,minf:{vmhd:C.mdia.minf.vmhd,smhd:C.mdia.minf.smhd,dinf:C.mdia.minf.dinf,stbl:{stsd:l.stsd,stts:{version:0,flags:0,entries:[]},ctts:{version:0,flags:0,entries:[]},stsc:{version:0,flags:0,entries:[]},stsz:{version:0,flags:0,entries:[]},stco:{version:0,flags:0,entries:[]},stss:{version:0,flags:0,entries:[]}}}}}],mvex:{mehd:{fragmentDuration:h.mvhd.duration},trexs:[{trackId:C.tkhd.trackId,defaultSampleDescriptionIndex:T.sampleDescriptionId,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}},mime:L})}if(0===this._tracks.length)return void this.emit("error",new Error("no playable tracks"));h.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};const E=f.encode(this._ftyp),P=this._tracks.map(b=>{const C=f.encode(b.moov);return{mime:b.mime,init:Buffer.concat([E,C])}});this.emit("ready",P)}seek(h){if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);let g=-1;if(this._tracks.map((T,E)=>{T.outStream&&T.outStream.destroy(),T.inStream&&(T.inStream.destroy(),T.inStream=null);const P=T.outStream=w.encode(),b=this._generateFragment(E,h);if(!b)return P.finalize();(-1===g||b.ranges[0].start<g)&&(g=b.ranges[0].start);const C=l=>{P.destroyed||P.box(l.moof,m=>{if(m)return this.emit("error",m);P.destroyed||T.inStream.slice(l.ranges).pipe(P.mediaData(l.length,M=>{if(M)return this.emit("error",M);if(P.destroyed)return;const L=this._generateFragment(E);if(!L)return P.finalize();C(L)}))})};C(b)}),g>=0){const T=this._fileStream=this._file.createReadStream({start:g});this._tracks.forEach(E=>{E.inStream=new i(g,{highWaterMark:1e7}),T.pipe(E.inStream)})}return this._tracks.map(T=>T.outStream)}_findSampleBefore(h,g){const T=this._tracks[h],E=Math.floor(T.timeScale*g);let P=x(T.samples,E,(b,C)=>b.dts+b.presentationOffset-C);for(-1===P?P=0:P<0&&(P=-P-2);!T.samples[P].sync;)P--;return P}_generateFragment(h,g){const T=this._tracks[h];let E;if(E=void 0!==g?this._findSampleBefore(h,g):T.currSample,E>=T.samples.length)return null;const P=T.samples[E].dts;let b=0;const C=[];for(var l=E;l<T.samples.length;l++){const m=T.samples[l];if(m.sync&&m.dts-P>=1*T.timeScale)break;b+=m.size;const U=C.length-1;U<0||C[U].end!==m.offset?C.push({start:m.offset,end:m.offset+m.size}):C[U].end+=m.size}return T.currSample=l,{moof:this._generateMoof(h,E,l),ranges:C,length:b}}_generateMoof(h,g,T){const E=this._tracks[h],P=[];let b=0;for(let l=g;l<T;l++){const m=E.samples[l];m.presentationOffset<0&&(b=1),P.push({sampleDuration:m.duration,sampleSize:m.size,sampleFlags:m.sync?33554432:16842752,sampleCompositionTimeOffset:m.presentationOffset})}const C={type:"moof",mfhd:{sequenceNumber:E.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:E.trackId},tfdt:{baseMediaDecodeTime:E.samples[g].dts},trun:{flags:3841,dataOffset:8,entries:P,version:b}}]};return C.trafs[0].trun.dataOffset+=f.encodingLength(C),C}}},79283:(F,_,d)=>{const x=d(77847),v=d(55502),w=d(53713);function f(i,n,a={}){if(!(this instanceof f))return console.warn("Don't invoke VideoStream without the 'new' keyword."),new f(i,n,a);this.detailedError=null,this._elem=n,this._elemWrapper=new x(n),this._waitingFired=!1,this._trackMeta=null,this._file=i,this._tracks=null,"none"!==this._elem.preload&&this._createMuxer(),this._onError=()=>{this.detailedError=this._elemWrapper.detailedError,this.destroy()},this._onWaiting=()=>{this._waitingFired=!0,this._muxer?this._tracks&&this._pump():this._createMuxer()},n.autoplay&&(n.preload="auto"),n.addEventListener("waiting",this._onWaiting),n.addEventListener("error",this._onError)}f.prototype={_createMuxer(){this._muxer=new w(this._file),this._muxer.on("ready",i=>{this._tracks=i.map(n=>{const a=this._elemWrapper.createWriteStream(n.mime);a.on("error",u=>{this._elemWrapper.error(u)});const p={muxed:null,mediaSource:a,initFlushed:!1,onInitFlushed:null};return a.write(n.init,u=>{p.initFlushed=!0,p.onInitFlushed&&p.onInitFlushed(u)}),p}),(this._waitingFired||"auto"===this._elem.preload)&&this._pump()}),this._muxer.on("error",i=>{this._elemWrapper.error(i)})},_pump(){const i=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((n,a)=>{const p=()=>{n.muxed&&(n.muxed.destroy(),n.mediaSource=this._elemWrapper.createWriteStream(n.mediaSource),n.mediaSource.on("error",u=>{this._elemWrapper.error(u)})),n.muxed=i[a],v(n.muxed,n.mediaSource)};n.initFlushed?p():n.onInitFlushed=u=>{u?this._elemWrapper.error(u):p()}})},destroy(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach(i=>{i.muxed&&i.muxed.destroy()}),this._elem.src="")}},F.exports=f},54911:(F,_,d)=>{var x=d(65963).default;const{EventEmitter:v}=d(43674),w=d(19194),f=d(97348),i=d(57115)("webtorrent"),n=d(60146),a=d(92050),p=d(84032),u=d(4690),o=d(49899),s=d(71893),h=d(41965),g=d(75650),T=d(20316),E=d(2755),{ThrottleGroup:P}=d(11197),b=d(10139),C=d(51063),l=d(41907).i8,m=l.replace(/\d*./g,O=>("0"+O%100).slice(-2)).slice(0,4),U=`-WW${m}-`;class M extends v{constructor(W={}){super(),this.peerId="string"==typeof W.peerId?W.peerId:Buffer.isBuffer(W.peerId)?W.peerId.toString("hex"):Buffer.from(U+g(9).toString("base64")).toString("hex"),this.peerIdBuffer=Buffer.from(this.peerId,"hex"),this.nodeId="string"==typeof W.nodeId?W.nodeId:Buffer.isBuffer(W.nodeId)?W.nodeId.toString("hex"):g(20).toString("hex"),this.nodeIdBuffer=Buffer.from(this.nodeId,"hex"),this._debugId=this.peerId.toString("hex").substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=W.torrentPort||0,this.dhtPort=W.dhtPort||0,this.tracker=void 0!==W.tracker?W.tracker:{},this.lsd=!1!==W.lsd,this.torrents=[],this.maxConns=Number(W.maxConns)||55,this.utp=M.UTP_SUPPORT&&!1!==W.utp,this._downloadLimit=Math.max("number"==typeof W.downloadLimit?W.downloadLimit:-1,-1),this._uploadLimit=Math.max("number"==typeof W.uploadLimit?W.uploadLimit:-1,-1),this.serviceWorker=null,this.workerKeepAliveInterval=null,this.workerPortCount=0,!0===W.secure&&d(20781).enableSecure(),this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.throttleGroups={down:new P({rate:Math.max(this._downloadLimit,0),enabled:this._downloadLimit>=0}),up:new P({rate:Math.max(this._uploadLimit,0),enabled:this._uploadLimit>=0})},this.tracker&&("object"!=typeof this.tracker&&(this.tracker={}),globalThis.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=globalThis.WRTC)),"function"==typeof b?this._connPool=new b(this):h(()=>{this._onListening()}),this._downloadSpeed=E(),this._uploadSpeed=E(),!1!==W.dht&&"function"==typeof n?(this.dht=new n(Object.assign({},{nodeId:this.nodeId},W.dht)),this.dht.once("error",ie=>{this._destroy(ie)}),this.dht.once("listening",()=>{const ie=this.dht.address();ie&&(this.dhtPort=ie.port)}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=!1!==W.webSeeds;const Q=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};"function"==typeof a&&null!=W.blocklist?a(W.blocklist,{headers:{"user-agent":`WebTorrent/${l} (https://webtorrent.io)`}},(ie,ae)=>{if(ie)return console.error(`Failed to load blocklist: ${ie.message}`);this.blocked=ae,Q()}):h(Q)}loadWorker(W,Q=(()=>{})){var ie=this;if(!(W instanceof ServiceWorker))throw new Error("Invalid worker registration");if("activated"!==W.state)throw new Error("Worker isn't activated");this.serviceWorker=W,navigator.serviceWorker.addEventListener("message",S=>{const{data:B}=S;if(!B.type||"webtorrent"===!B.type||!B.url)return null;let[j,...K]=B.url.slice(B.url.indexOf(B.scope+"webtorrent/")+11+B.scope.length).split("/");if(K=decodeURI(K.join("/")),!j||!K)return null;const[Y]=S.ports,se=this.get(j)&&this.get(j).files.find(te=>te.path===K);if(!se)return null;const[G,J,$]=se._serve(B),le=J&&J[Symbol.asyncIterator](),pe=()=>{Y.onmessage=null,J&&J.destroy(),$&&$.destroy(),this.workerPortCount--,this.workerPortCount||(clearInterval(this.workerKeepAliveInterval),this.workerKeepAliveInterval=null)};Y.onmessage=function(){var te=x(function*(ve){if(ve.data){let Be;try{Be=(yield le.next()).value}catch(De){}Y.postMessage(Be),Be||pe(),ie.workerKeepAliveInterval||(ie.workerKeepAliveInterval=setInterval(()=>fetch(`${ie.serviceWorker.scriptURL.substr(0,ie.serviceWorker.scriptURL.lastIndexOf("/")+1).slice(window.location.origin.length)}webtorrent/keepalive/`),2e4))}else pe()});return function(ve){return te.apply(this,arguments)}}(),this.workerPortCount++,Y.postMessage(G)}),Q(this.serviceWorker)}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const W=this.torrents.filter(ae=>1!==ae.progress);return W.reduce((ae,S)=>ae+S.downloaded,0)/(W.reduce((ae,S)=>ae+(S.length||0),0)||1)}get ratio(){return this.torrents.reduce((ie,ae)=>ie+ae.uploaded,0)/(this.torrents.reduce((ie,ae)=>ie+ae.received,0)||1)}get(W){if(W instanceof C){if(this.torrents.includes(W))return W}else{let Q;try{Q=u(W)}catch(ie){}if(!Q)return null;if(!Q.infoHash)throw new Error("Invalid torrent identifier");for(const ie of this.torrents)if(ie.infoHash===Q.infoHash)return ie}return null}add(W,Q={},ie=(()=>{})){if(this.destroyed)throw new Error("client is destroyed");"function"==typeof Q&&([Q,ie]=[{},Q]);const ae=()=>{if(!this.destroyed)for(const K of this.torrents)if(K.infoHash===j.infoHash&&K!==j)return void j._destroy(new Error(`Cannot add duplicate torrent ${j.infoHash}`))},S=()=>{this.destroyed||(ie(j),this.emit("torrent",j))};this._debug("add"),Q=Q?Object.assign({},Q):{};const j=new C(W,this,Q);return this.torrents.push(j),j.once("_infoHash",ae),j.once("ready",S),j.once("close",function B(){j.removeListener("_infoHash",ae),j.removeListener("ready",S),j.removeListener("close",B)}),j}seed(W,Q,ie){if(this.destroyed)throw new Error("client is destroyed");"function"==typeof Q&&([Q,ie]=[{},Q]),this._debug("seed"),(Q=Q?Object.assign({},Q):{}).skipVerify=!0;const ae="string"==typeof W;ae&&(Q.path=o.dirname(W)),Q.createdBy||(Q.createdBy=`WebTorrent/${m}`);const B=Y=>{this._debug("on seed"),"function"==typeof ie&&ie(Y),Y.emit("seed"),this.emit("seed",Y)},j=this.add(null,Q,Y=>{const se=[G=>{if(ae||Q.preloadedStore)return G();Y.load(K,G)}];this.dht&&se.push(G=>{Y.once("dhtAnnounce",G)}),p(se,G=>{if(!this.destroyed){if(G)return Y._destroy(G);B(Y)}})});let K;return"undefined"!=typeof FileList&&W instanceof FileList?W=Array.from(W):Array.isArray(W)||(W=[W]),p(W.map(Y=>se=>{!Q.preloadedStore&&function(O){return"object"==typeof O&&null!=O&&"function"==typeof O.pipe}(Y)?w(Y,(G,J)=>{if(G)return se(G);J.name=Y.name,se(null,J)}):se(null,Y)}),(Y,se)=>{if(!this.destroyed){if(Y)return j._destroy(Y);f.parseInput(se,Q,(G,J)=>{if(!this.destroyed){if(G)return j._destroy(G);K=J.map($=>$.getStream),f(se,Q,($,le)=>{if(this.destroyed)return;if($)return j._destroy($);const pe=this.get(le);pe?j._destroy(new Error(`Cannot add duplicate torrent ${pe.infoHash}`)):j._onTorrentId(le)})}})}}),j}remove(W,Q,ie){if("function"==typeof Q)return this.remove(W,null,Q);if(this._debug("remove"),!this.get(W))throw new Error(`No torrent with id ${W}`);this._remove(W,Q,ie)}_remove(W,Q,ie){if("function"==typeof Q)return this._remove(W,null,Q);const ae=this.get(W);!ae||(this.torrents.splice(this.torrents.indexOf(ae),1),ae.destroy(Q,ie))}address(){return this.listening?this._connPool?this._connPool.tcpServer.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}throttleDownload(W){return W=Number(W),!(isNaN(W)||!isFinite(W)||W<-1)&&(this._downloadLimit=W,this._downloadLimit<0?this.throttleGroups.down.setEnabled(!1):(this.throttleGroups.down.setEnabled(!0),void this.throttleGroups.down.setRate(this._downloadLimit)))}throttleUpload(W){return W=Number(W),!(isNaN(W)||!isFinite(W)||W<-1)&&(this._uploadLimit=W,this._uploadLimit<0?this.throttleGroups.up.setEnabled(!1):(this.throttleGroups.up.setEnabled(!0),void this.throttleGroups.up.setRate(this._uploadLimit)))}destroy(W){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,W)}_destroy(W,Q){this._debug("client destroy"),this.destroyed=!0;const ie=this.torrents.map(ae=>S=>{ae.destroy(S)});this._connPool&&ie.push(ae=>{this._connPool.destroy(ae)}),this.dht&&ie.push(ae=>{this.dht.destroy(ae)}),p(ie,Q),W&&this.emit("error",W),this.torrents=[],this._connPool=null,this.dht=null,this.throttleGroups.down.destroy(),this.throttleGroups.up.destroy()}_onListening(){if(this._debug("listening"),this.listening=!0,this._connPool){const W=this._connPool.tcpServer.address();W&&(this.torrentPort=W.port)}this.emit("listening")}_debug(){const W=[].slice.call(arguments);W[0]=`[${this._debugId}] ${W[0]}`,i(...W)}_getByHash(W){for(const Q of this.torrents)if(Q.infoHashHash||(Q.infoHashHash=T.sync(Buffer.from("72657132"+Q.infoHash,"hex"))),W===Q.infoHashHash)return Q;return null}}M.WEBRTC_SUPPORT=s.WEBRTC_SUPPORT,M.UTP_SUPPORT=b.UTP_SUPPORT,M.VERSION=l,F.exports=M},56488:(F,_,d)=>{const x=d(57115)("webtorrent:file-stream"),v=d(73469),w=d(67048);F.exports=class extends v.Readable{constructor(n,a){super(a),this._torrent=n._torrent;const p=a&&a.start||0,u=a&&a.end&&a.end<n.length?a.end:n.length-1,o=n._torrent.pieceLength;this._startPiece=(p+n.offset)/o|0,this._endPiece=(u+n.offset)/o|0,this._piece=this._startPiece,this._offset=p+n.offset-this._startPiece*o,this._missing=u-p+1,this._reading=!1,this._notifying=!1,this._criticalLength=Math.min(1048576/o|0,2),this._torrent.select(this._startPiece,this._endPiece,!0,()=>{this._notify()}),w(this,s=>{this.destroy(s)})}_read(){this._reading||(this._reading=!0,this._notify())}_notify(){if(!this._reading||0===this._missing)return;if(!this._torrent.bitfield.get(this._piece))return this._torrent.critical(this._piece,this._piece+this._criticalLength);if(this._notifying)return;if(this._notifying=!0,this._torrent.destroyed)return this.destroy(new Error("Torrent removed"));const n=this._piece,a={};n===this._torrent.pieces.length-1&&(a.length=this._torrent.lastPieceLength),this._torrent.store.get(n,a,(p,u)=>{if(this._notifying=!1,!this.destroyed){if(x("read %s (length %s) (err %s)",n,u&&u.length,p&&p.message),p)return this.destroy(p);this._offset&&(u=u.slice(this._offset),this._offset=0),this._missing<u.length&&(u=u.slice(0,this._missing)),this._missing-=u.length,x("pushing buffer of length %s",u.length),this._reading=!1,this.push(u),0===this._missing&&this.push(null)}}),this._piece+=1}_destroy(n,a){this._torrent.destroyed||this._torrent.deselect(this._startPiece,this._endPiece,!0),a(n)}}},79207:(F,_,d)=>{const{EventEmitter:x}=d(43674),{PassThrough:v}=d(73469),w=d(49899),f=d(7715),i=d(10411),n=d(85403),a=d(41825),p=d(56488),u=d(41965),o=d(69246),s=d(86281),h=d(67048);F.exports=class extends x{constructor(E,P){super(),this._torrent=E,this._destroyed=!1,this._fileStreams=new Set,this.name=P.name,this.path=P.path,this.length=P.length,this.offset=P.offset,this.done=!1;const b=P.offset,C=b+P.length-1;this._startPiece=b/this._torrent.pieceLength|0,this._endPiece=C/this._torrent.pieceLength|0,0===this.length&&(this.done=!0,this.emit("done")),this._serviceWorker=E.client.serviceWorker}get downloaded(){if(this._destroyed||!this._torrent.bitfield)return 0;const{pieces:E,bitfield:P,pieceLength:b,lastPieceLength:C}=this._torrent,{_startPiece:l,_endPiece:m}=this,U=z=>z===E.length-1?C:b,M=z=>{const O=z===E.length-1?C:b;return P.get(z)?O:O-E[z].missing};let L=0;for(let z=l;z<=m;z+=1){const O=M(z);if(L+=O,z===l&&(L-=Math.min(this.offset%b,O)),z===m){const W=U(m)-(this.offset+this.length)%b;L-=Math.min(W,O)}}return L}get progress(){return this.length?this.downloaded/this.length:0}select(E){0!==this.length&&this._torrent.select(this._startPiece,this._endPiece,E)}deselect(){0!==this.length&&this._torrent.deselect(this._startPiece,this._endPiece,!1)}createReadStream(E){if(0===this.length){const b=new v;return u(()=>{b.end()}),b}const P=new p(this,E);return this._fileStreams.add(P),P.once("close",()=>{this._fileStreams.delete(P)}),P}getBuffer(E){a(this.createReadStream(),this.length,E)}getBlob(E){if("undefined"==typeof window)throw new Error("browser-only method");i(this.createReadStream(),this._getMimeType()).then(P=>E(null,P),P=>E(P))}getBlobURL(E){if("undefined"==typeof window)throw new Error("browser-only method");n(this.createReadStream(),this._getMimeType()).then(P=>E(null,P),P=>E(P))}appendTo(E,P,b){if("undefined"==typeof window)throw new Error("browser-only method");f.append(this,E,P,b)}renderTo(E,P,b){if("undefined"==typeof window)throw new Error("browser-only method");f.render(this,E,P,b)}_serve(E){const P={status:200,headers:{"Accept-Ranges":"bytes","Content-Type":s.getType(this.name),"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Expires:"0"},body:"HEAD"===E.method?"":"STREAM"};"document"===E.destination&&(P.headers["Content-Type"]="application/octet-stream",P.headers["Content-Disposition"]="attachment",P.body="DOWNLOAD");let b=o(this.length,E.headers.range||"");b.constructor===Array?(P.status=206,b=b[0],P.headers["Content-Range"]=`bytes ${b.start}-${b.end}/${this.length}`,P.headers["Content-Length"]=""+(b.end-b.start+1)):P.headers["Content-Length"]=this.length;const C="GET"===E.method&&this.createReadStream(b);let l=null;return C&&this.emit("stream",{stream:C,req:E,file:this},m=>{l=m,h(m,()=>{m&&m.destroy(),C.destroy()})}),[P,l||C,l&&C]}getStreamURL(E=(()=>{})){if("undefined"==typeof window)throw new Error("browser-only method");if(!this._serviceWorker)throw new Error("No worker registered");if("activated"!==this._serviceWorker.state)throw new Error("Worker isn't activated");E(null,`${this._serviceWorker.scriptURL.substr(0,this._serviceWorker.scriptURL.lastIndexOf("/")+1).slice(window.location.origin.length)}webtorrent/${this._torrent.infoHash}/${encodeURI(this.path)}`)}streamTo(E,P=(()=>{})){if("undefined"==typeof window)throw new Error("browser-only method");if(!this._serviceWorker)throw new Error("No worker registered");if("activated"!==this._serviceWorker.state)throw new Error("Worker isn't activated");const b=this._serviceWorker.scriptURL.substr(0,this._serviceWorker.scriptURL.lastIndexOf("/")+1).slice(window.location.origin.length);E.src=`${b}webtorrent/${this._torrent.infoHash}/${encodeURI(this.path)}`,P(null,E)}_getMimeType(){return f.mime[w.extname(this.name).toLowerCase()]}_destroy(){this._destroyed=!0,this._torrent=null;for(const E of this._fileStreams)E.destroy();this._fileStreams.clear()}}},20781:(F,_,d)=>{const{EventEmitter:x}=d(43674),{Transform:v}=d(31899),w=d(73225),f=d(57115)("webtorrent:peer"),i=d(19773);let o=!1;_.enableSecure=()=>{o=!0},_.createWebRTCPeer=(T,E,P)=>{const b=new g(T.id,"webrtc");if(b.conn=T,b.swarm=E,b.throttleGroups=P,b.conn.connected)b.onConnect();else{const C=()=>{b.conn.removeListener("connect",l),b.conn.removeListener("error",m)},l=()=>{C(),b.onConnect()},m=U=>{C(),b.destroy(U)};b.conn.once("connect",l),b.conn.once("error",m),b.startConnectTimeout()}return b},_.createTCPIncomingPeer=(T,E)=>s(T,"tcpIncoming",E),_.createUTPIncomingPeer=(T,E)=>s(T,"utpIncoming",E),_.createTCPOutgoingPeer=(T,E,P)=>h(T,E,"tcpOutgoing",P),_.createUTPOutgoingPeer=(T,E,P)=>h(T,E,"utpOutgoing",P);const s=(T,E,P)=>{const b=`${T.remoteAddress}:${T.remotePort}`,C=new g(b,E);return C.conn=T,C.addr=b,C.throttleGroups=P,C.onConnect(),C},h=(T,E,P,b)=>{const C=new g(T,P);return C.addr=T,C.swarm=E,C.throttleGroups=b,C};_.createWebSeedPeer=(T,E,P,b)=>{const C=new g(E,"webSeed");return C.swarm=P,C.conn=T,C.throttleGroups=b,C.onConnect(),C};class g extends x{constructor(E,P){super(),this.id=E,this.type=P,f("new %s Peer %s",P,E),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentPe1=!1,this.sentPe2=!1,this.sentPe3=!1,this.sentPe4=!1,this.sentHandshake=!1}onConnect(){if(this.destroyed)return;this.connected=!0,f("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const E=this.conn;E.once("end",()=>{this.destroy()}),E.once("close",()=>{this.destroy()}),E.once("finish",()=>{this.destroy()}),E.once("error",b=>{this.destroy(b)});const P=this.wire=new i(this.type,this.retries,o);P.once("end",()=>{this.destroy()}),P.once("close",()=>{this.destroy()}),P.once("finish",()=>{this.destroy()}),P.once("error",b=>{this.destroy(b)}),P.once("pe1",()=>{this.onPe1()}),P.once("pe2",()=>{this.onPe2()}),P.once("pe3",()=>{this.onPe3()}),P.once("pe4",()=>{this.onPe4()}),P.once("handshake",(b,C)=>{this.onHandshake(b,C)}),this.startHandshakeTimeout(),this.setThrottlePipes(),this.swarm&&("tcpOutgoing"===this.type?o&&0===this.retries&&!this.sentPe1?this.sendPe1():this.sentHandshake||this.handshake():"tcpIncoming"!==this.type&&!this.sentHandshake&&this.handshake())}sendPe1(){this.wire.sendPe1(),this.sentPe1=!0}onPe1(){this.sendPe2()}sendPe2(){this.wire.sendPe2(),this.sentPe2=!0}onPe2(){this.sendPe3()}sendPe3(){this.wire.sendPe3(this.swarm.infoHash),this.sentPe3=!0}onPe3(E){this.swarm&&(this.swarm.infoHashHash!==E&&this.destroy(new Error("unexpected crypto handshake info hash for this swarm")),this.sendPe4())}sendPe4(){this.wire.sendPe4(this.swarm.infoHash),this.sentPe4=!0}onPe4(){this.sentHandshake||this.handshake()}clearPipes(){this.conn.unpipe(),this.wire.unpipe()}setThrottlePipes(){const E=this;this.conn.pipe(this.throttleGroups.down.throttle()).pipe(new v({transform(P,b,C){E.emit("download",P.length),!E.destroyed&&C(null,P)}})).pipe(this.wire).pipe(this.throttleGroups.up.throttle()).pipe(new v({transform(P,b,C){E.emit("upload",P.length),!E.destroyed&&C(null,P)}})).pipe(this.conn)}onHandshake(E,P){if(!this.swarm||this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(E!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(P===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));f("Peer %s got handshake %s",this.id,E),clearTimeout(this.handshakeTimeout),this.retries=0;let b=this.addr;!b&&this.conn.remoteAddress&&this.conn.remotePort&&(b=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,b),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,{dht:!this.swarm.private&&!!this.swarm.client.dht}),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout),this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},{webrtc:25e3,tcpOutgoing:5e3,utpOutgoing:5e3}[this.type]),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(E){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,f("destroy %s %s (error: %s)",this.type,this.id,E&&(E.message||E)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const P=this.swarm,b=this.conn,C=this.wire;this.swarm=null,this.conn=null,this.wire=null,P&&C&&w(P.wires,P.wires.indexOf(C)),b&&(b.on("error",()=>{}),b.destroy()),C&&C.destroy(),P&&P.removePeer(this.id)}}},61753:F=>{F.exports=class{constructor(x){this._torrent=x,this._numPieces=x.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=v=>{this.recalculate(),this._initWire(v)},this._onWireHave=v=>{this._pieces[v]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(v=>{this._initWire(v)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(x){let v=[],w=1/0;for(let f=0;f<this._numPieces;++f){if(x&&!x(f))continue;const i=this._pieces[f];i===w?v.push(f):i<w&&(v=[f],w=i)}return v.length?v[Math.random()*v.length|0]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(x=>{this._cleanupWireEvents(x)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(x){x._onClose=()=>{this._cleanupWireEvents(x);for(let v=0;v<this._numPieces;++v)this._pieces[v]-=x.peerPieces.get(v)},x.on("have",this._onWireHave),x.on("bitfield",this._onWireBitfield),x.once("close",x._onClose)}recalculate(){this._pieces.fill(0);for(const x of this._torrent.wires)for(let v=0;v<this._numPieces;++v)this._pieces[v]+=x.peerPieces.get(v)}_cleanupWireEvents(x){x.removeListener("have",this._onWireHave),x.removeListener("bitfield",this._onWireBitfield),x._onClose&&x.removeListener("close",x._onClose),x._onClose=null}}},51063:(F,_,d)=>{const x=d(29708),v=d(19296).Z,w=d(26981),f=d(29114),i=d(29299),n=d(57115)("webtorrent:torrent"),a=d(61207),p=d(43674).EventEmitter,u=d(83832),o=d(69706),s=d(99769),h=d(87806),g=d(19538),T=d(69706),E=d(16079),P=d(68856),b=d(65688),C=d(84032),l=d(25404),m=d(4690),U=d(49899),M=d(282),L=d(55502),z=d(41965),O=d(59497),W=d(20316),Q=d(2755),ie=d(57366),ae=d(57525),S=d(79207),B=d(20781),j=d(61753),K=d(98671),Y=d(39696),se=d(77991),$=5e3,le=3*M.BLOCK_LENGTH,De=process.browser?i().length:2,Me=[1e3,5e3,15e3],Pe=`WebTorrent/${d(41907).i8} (https://webtorrent.io)`;let Te;try{Te=U.join(u.statSync("/tmp")&&"/tmp","webtorrent")}catch(Ye){Te=U.join("function"==typeof b.tmpdir?b.tmpdir():"/","webtorrent")}function We(Ye,I){return 2+Math.ceil(I*Ye.downloadSpeed()/M.BLOCK_LENGTH)}function ot(){}F.exports=class extends p{constructor(I,N,V){super(),this._debugId="unknown infohash",this.client=N,this.announce=V.announce,this.urlList=V.urlList,this.path=V.path,this.skipVerify=!!V.skipVerify,this._store=V.store||o,this._preloadedStore=V.preloadedStore||null,this._storeCacheSlots=void 0!==V.storeCacheSlots?V.storeCacheSlots:20,this._destroyStoreOnDestroy=V.destroyStoreOnDestroy||!1,this._getAnnounceOpts=V.getAnnounceOpts,"boolean"==typeof V.private&&(this.private=V.private),this.strategy=V.strategy||"sequential",this.maxWebConns=V.maxWebConns||4,this._rechokeNumSlots=!1===V.uploads||0===V.uploads?0:+V.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=V.paused||!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=Q(),this._uploadSpeed=Q(),this._servers=[],this._xsRequests=[],this._fileModtimes=V.fileModtimes,null!==I&&this._onTorrentId(I),this._debug("new torrent")}get timeRemaining(){return this.done?0:0===this.downloadSpeed?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}get downloaded(){if(!this.bitfield)return 0;let I=0;for(let N=0,V=this.pieces.length;N<V;++N)if(this.bitfield.get(N))I+=N===V-1?this.lastPieceLength:this.pieceLength;else{const X=this.pieces[N];I+=X.length-X.missing}return I}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||this.length)}get numPeers(){return this.wires.length}get torrentFileBlobURL(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let I=0;for(const N in this._peers)this._peers[N].connected&&(I+=1);return I}_onTorrentId(I){if(this.destroyed)return;let N;try{N=m(I)}catch(V){}N?(this.infoHash=N.infoHash,this._debugId=N.infoHash.toString("hex").substring(0,7),z(()=>{this.destroyed||this._onParsedTorrent(N)})):m.remote(I,(V,X)=>{if(!this.destroyed){if(V)return this._destroy(V);this._onParsedTorrent(X)}})}_onParsedTorrent(I){if(!this.destroyed){if(this._processParsedTorrent(I),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this.path||(this.path=U.join(Te,this.infoHash)),this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),!this.destroyed&&(this.emit("infoHash",this.infoHash),!this.destroyed&&(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(I){this._debugId=I.infoHash.toString("hex").substring(0,7),void 0!==this.private&&(I.private=this.private),this.announce&&(I.announce=I.announce.concat(this.announce)),this.client.tracker&&global.WEBTORRENT_ANNOUNCE&&!I.private&&(I.announce=I.announce.concat(global.WEBTORRENT_ANNOUNCE)),this.urlList&&(I.urlList=I.urlList.concat(this.urlList)),I.announce=Array.from(new Set(I.announce)),I.urlList=Array.from(new Set(I.urlList)),Object.assign(this,I),this.magnetURI=m.toMagnetURI(I),this.torrentFile=m.toTorrentFile(I)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let I=this.client.tracker;I&&(I=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{if(this.destroyed)return;const N={uploaded:this.uploaded,downloaded:this.downloaded,left:Math.max(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(N,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(N,this._getAnnounceOpts()),N}})),this.peerAddresses&&this.peerAddresses.forEach(N=>this.addPeer(N)),this.discovery=new a({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:I,port:this.client.torrentPort,userAgent:Pe,lsd:this.client.lsd}),this.discovery.on("error",N=>{this._destroy(N)}),this.discovery.on("peer",(N,V)=>{this._debug("peer %s discovered via %s",N,V),("string"!=typeof N||!this.done)&&this.addPeer(N)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce"),0===this.numPeers&&this.emit("noPeers","tracker")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce"),0===this.numPeers&&this.emit("noPeers","dht")}),this.discovery.on("warning",N=>{this.emit("warning",N)})}_getMetadataFromServer(){const I=this,V=(Array.isArray(this.xs)?this.xs:[this.xs]).map(ce=>xe=>{!function(ce,xe){if(0!==ce.indexOf("http://")&&0!==ce.indexOf("https://"))return I.emit("warning",new Error(`skipping non-http xs param: ${ce}`)),xe(null);const Ne={url:ce,method:"GET",headers:{"user-agent":Pe}};let Ce;try{Ce=s.concat(Ne,function($e,Xe,fe){if(I.destroyed||I.metadata)return xe(null);if($e)return I.emit("warning",new Error(`http error from xs param: ${ce}`)),xe(null);if(200!==Xe.statusCode)return I.emit("warning",new Error(`non-200 status code ${Xe.statusCode} from xs param: ${ce}`)),xe(null);let He;try{He=m(fe)}catch(ze){}return He?He.infoHash!==I.infoHash?(I.emit("warning",new Error(`got torrent file with incorrect info hash from xs param: ${ce}`)),xe(null)):(I._onMetadata(He),void xe(null)):(I.emit("warning",new Error(`got invalid torrent file from xs param: ${ce}`)),xe(null))})}catch($e){return I.emit("warning",new Error(`skipping invalid url xs param: ${ce}`)),xe(null)}I._xsRequests.push(Ce)}(ce,xe)});C(V)}_onMetadata(I){if(this.metadata||this.destroyed)return;let N;if(this._debug("got metadata"),this._xsRequests.forEach(X=>{X.abort()}),this._xsRequests=[],I&&I.infoHash)N=I;else try{N=m(I)}catch(X){return this._destroy(X)}this._processParsedTorrent(N),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(X=>{this.addWebSeed(X)}),this._rarityMap=new j(this);let V=this._preloadedStore;if(V||(V=new this._store(this.pieceLength,{torrent:{infoHash:this.infoHash},files:this.files.map(X=>({path:U.join(this.path,X.path),length:X.length,offset:X.offset})),length:this.length,name:this.infoHash})),this._storeCacheSlots>0&&!(V instanceof T)&&(V=new w(V,{max:this._storeCacheSlots})),this.store=new h(V),this.files=this.files.map(X=>new S(this,X)),this.so?this.files.forEach((X,ce)=>{this.so.includes(ce)?this.files[ce].select():this.files[ce].deselect()}):0!==this.pieces.length&&this.select(0,this.pieces.length-1,!1),this._hashes=this.pieces,this.pieces=this.pieces.map((X,ce)=>new M(ce===this.pieces.length-1?this.lastPieceLength:this.pieceLength)),this._reservations=this.pieces.map(()=>[]),this.bitfield=new v(this.pieces.length),this.wires.forEach(X=>{X.ut_metadata&&X.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(X)}),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const X=ce=>{if(ce)return this._destroy(ce);this._debug("done verifying"),this._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===o?this.getFileModtimes((ce,xe)=>{if(ce)return this._destroy(ce);this.files.map((Ce,Ve)=>xe[Ve]===this._fileModtimes[Ve]).every(Ce=>Ce)?(this._markAllVerified(),this._onStore()):this._verifyPieces(X)}):this._verifyPieces(X)}}getFileModtimes(I){const N=[];l(this.files.map((V,X)=>ce=>{u.stat(U.join(this.path,V.path),(xe,Ne)=>{if(xe&&"ENOENT"!==xe.code)return ce(xe);N[X]=Ne&&Ne.mtime.getTime(),ce(null)})}),De,V=>{this._debug("done getting file modtimes"),I(V,N)})}_verifyPieces(I){l(this.pieces.map((N,V)=>X=>{if(this.destroyed)return X(new Error("torrent is destroyed"));const ce={};V===this.pieces.length-1&&(ce.length=this.lastPieceLength),this.store.get(V,ce,(xe,Ne)=>this.destroyed?X(new Error("torrent is destroyed")):xe?z(()=>X(null)):void W(Ne,Ce=>{if(this.destroyed)return X(new Error("torrent is destroyed"));Ce===this._hashes[V]?(this._debug("piece verified %s",V),this._markVerified(V)):this._debug("piece invalid %s",V),X(null)}))}),De,I)}rescanFiles(I){if(this.destroyed)throw new Error("torrent is destroyed");I||(I=ot),this._verifyPieces(N=>{if(N)return this._destroy(N),I(N);this._checkDone(),I(null)})}_markAllVerified(){for(let I=0;I<this.pieces.length;I++)this._markVerified(I)}_markVerified(I){this.pieces[I]=null,this._reservations[I]=null,this.bitfield.set(I,!0)}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections())}destroy(I,N){if("function"==typeof I)return this.destroy(null,I);this._destroy(null,I,N)}_destroy(I,N,V){if("function"==typeof N)return this._destroy(I,null,N);if(this.destroyed)return;this.destroyed=!0,this._debug("destroy"),this.client._remove(this),clearInterval(this._rechokeIntervalId),this._xsRequests.forEach(ce=>{ce.abort()}),this._rarityMap&&this._rarityMap.destroy();for(const ce in this._peers)this.removePeer(ce);this.files.forEach(ce=>{ce instanceof S&&ce._destroy()});const X=this._servers.map(ce=>xe=>{ce.destroy(xe)});if(this.discovery&&X.push(ce=>{this.discovery.destroy(ce)}),this.store){let ce=this._destroyStoreOnDestroy;N&&void 0!==N.destroyStore&&(ce=N.destroyStore),X.push(xe=>{ce?this.store.destroy(xe):this.store.close(xe)})}C(X,V),I&&(0===this.listenerCount("error")?this.client.emit("error",I):this.emit("error",I)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}addPeer(I){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");let N;if(this.client.blocked){if("string"==typeof I){let ce;try{ce=x(I)}catch(xe){return this._debug("ignoring peer: invalid %s",I),this.emit("invalidPeer",I),!1}N=ce[0]}else"string"==typeof I.remoteAddress&&(N=I.remoteAddress);if(N&&this.client.blocked.contains(N))return this._debug("ignoring peer: blocked %s",I),"string"!=typeof I&&I.destroy(),this.emit("blockedPeer",I),!1}const V=this.client.utp&&this._isIPv4(N)?"utp":"tcp",X=!!this._addPeer(I,V);return this.emit(X?"peer":"invalidPeer",I),X}_addPeer(I,N){if(this.destroyed)return"string"!=typeof I&&I.destroy(),null;if("string"==typeof I&&!this._validAddr(I))return this._debug("ignoring peer: invalid %s",I),null;const V=I&&I.id||I;if(this._peers[V])return this._debug("ignoring peer: duplicate (%s)",V),"string"!=typeof I&&I.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),"string"!=typeof I&&I.destroy(),null;let X;return this._debug("add peer %s",V),X="string"==typeof I?"utp"===N?B.createUTPOutgoingPeer(I,this,this.client.throttleGroups):B.createTCPOutgoingPeer(I,this,this.client.throttleGroups):B.createWebRTCPeer(I,this,this.client.throttleGroups),this._registerPeer(X),"string"==typeof I&&(this._queue.push(X),this._drain()),X}addWebSeed(I){if(this.destroyed)throw new Error("torrent is destroyed");let N,V;if("string"==typeof I){if(N=I,!/^https?:\/\/.+/.test(N))return this.emit("warning",new Error(`ignoring invalid web seed: ${N}`)),void this.emit("invalidPeer",N);if(this._peers[N])return this.emit("warning",new Error(`ignoring duplicate web seed: ${N}`)),void this.emit("invalidPeer",N);V=new se(N,this)}else{if(!I||"string"!=typeof I.connId)return void this.emit("warning",new Error("addWebSeed must be passed a string or connection object with id property"));if(V=I,N=V.connId,this._peers[N])return this.emit("warning",new Error(`ignoring duplicate web seed: ${N}`)),void this.emit("invalidPeer",N)}this._debug("add web seed %s",N);const X=B.createWebSeedPeer(V,N,this,this.client.throttleGroups);this._registerPeer(X),this.emit("peer",N)}_addIncomingPeer(I){return this.destroyed?I.destroy(new Error("torrent is destroyed")):this.paused?I.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",I.id),void this._registerPeer(I))}_registerPeer(I){I.on("download",N=>{this.destroyed||(this.received+=N,this._downloadSpeed(N),this.client._downloadSpeed(N),this.emit("download",N),!this.destroyed&&this.client.emit("download",N))}),I.on("upload",N=>{this.destroyed||(this.uploaded+=N,this._uploadSpeed(N),this.client._uploadSpeed(N),this.emit("upload",N),!this.destroyed&&this.client.emit("upload",N))}),this._peers[I.id]=I,this._peersLength+=1}removePeer(I){const N=I&&I.id||I;(I=this._peers[N])&&(this._debug("removePeer %s",N),delete this._peers[N],this._peersLength-=1,I.destroy(),this._drain())}select(I,N,V,X){if(this.destroyed)throw new Error("torrent is destroyed");if(I<0||N<I||this.pieces.length<=N)throw new Error(`invalid selection ${I} : ${N}`);V=Number(V)||0,this._debug("select %s-%s (priority %s)",I,N,V),this._selections.push({from:I,to:N,offset:0,priority:V,notify:X||ot}),this._selections.sort((ce,xe)=>xe.priority-ce.priority),this._updateSelections()}deselect(I,N,V){if(this.destroyed)throw new Error("torrent is destroyed");V=Number(V)||0,this._debug("deselect %s-%s (priority %s)",I,N,V);for(let X=0;X<this._selections.length;++X){const ce=this._selections[X];if(ce.from===I&&ce.to===N&&ce.priority===V){this._selections.splice(X,1);break}}this._updateSelections()}critical(I,N){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",I,N);for(let V=I;V<=N;++V)this._critical[V]=!0;this._updateSelections()}_onWire(I,N){if(this._debug("got wire %s (%s)",I._debugId,N||"Unknown"),this.wires.push(I),N){const V=x(N);I.remoteAddress=V[0],I.remotePort=V[1]}this.client.dht&&this.client.dht.listening&&I.on("port",V=>{if(!this.destroyed&&!this.client.dht.destroyed){if(!I.remoteAddress)return this._debug("ignoring PORT from peer with no address");if(0===V||V>65536)return this._debug("ignoring invalid PORT from peer");this._debug("port: %s (from %s)",V,N),this.client.dht.addNode({host:I.remoteAddress,port:V})}}),I.on("timeout",()=>{this._debug("wire timeout (%s)",N),I.destroy()}),"webSeed"!==I.type&&I.setTimeout(3e4,!0),I.setKeepAlive(!0),I.use(ie(this.metadata)),I.ut_metadata.on("warning",V=>{this._debug("ut_metadata warning: %s",V.message)}),this.metadata||(I.ut_metadata.on("metadata",V=>{this._debug("got metadata via ut_metadata"),this._onMetadata(V)}),I.ut_metadata.fetch()),"function"==typeof ae&&!this.private&&(I.use(ae()),I.ut_pex.on("peer",V=>{this.done||(this._debug("ut_pex: got peer: %s (from %s)",V,N),this.addPeer(V))}),I.ut_pex.on("dropped",V=>{const X=this._peers[V];X&&!X.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",V,N),this.removePeer(V))}),I.once("close",()=>{I.ut_pex.reset()})),I.use(g()),this.emit("wire",I,N),this.metadata&&z(()=>{this._onWireWithMetadata(I)})}_onWireWithMetadata(I){let N=null;const V=()=>{this.destroyed||I.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&I.amInterested?I.destroy():(N=setTimeout(V,$),N.unref&&N.unref()))};let X;const ce=()=>{if(I.peerPieces.buffer.length===this.bitfield.buffer.length){for(X=0;X<this.pieces.length;++X)if(!I.peerPieces.get(X))return;I.isSeeder=!0,I.choke()}};I.on("bitfield",()=>{ce(),this._update(),this._updateWireInterest(I)}),I.on("have",()=>{ce(),this._update(),this._updateWireInterest(I)}),I.lt_donthave.on("donthave",()=>{ce(),this._update(),this._updateWireInterest(I)}),I.once("interested",()=>{I.unchoke()}),I.once("close",()=>{clearTimeout(N)}),I.on("choke",()=>{clearTimeout(N),N=setTimeout(V,$),N.unref&&N.unref()}),I.on("unchoke",()=>{clearTimeout(N),this._update()}),I.on("request",(xe,Ne,Ce,Ve)=>{if(Ce>131072)return I.destroy();this.pieces[xe]||this.store.get(xe,{offset:Ne,length:Ce},Ve)}),I.bitfield(this.bitfield),this._updateWireInterest(I),I.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&I.port(this.client.dht.address().port),"webSeed"!==I.type&&(N=setTimeout(V,$),N.unref&&N.unref()),I.isSeeder=!1,ce()}_updateSelections(){!this.ready||this.destroyed||(z(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){for(let I=0;I<this._selections.length;++I){const N=this._selections[I],V=N.offset;for(;this.bitfield.get(N.from+N.offset)&&N.from+N.offset<N.to;)N.offset+=1;V!==N.offset&&N.notify(),N.to===N.from+N.offset&&(!this.bitfield.get(N.from+N.offset)||(this._selections.splice(I,1),I-=1,N.notify(),this._updateInterest()))}this._selections.length||this.emit("idle")}_updateInterest(){const I=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(N=>this._updateWireInterest(N)),I!==this._amInterested&&this.emit(this._amInterested?"interested":"uninterested")}_updateWireInterest(I){let N=!1;for(let V=0;V<this.pieces.length;++V)if(this.pieces[V]&&I.peerPieces.get(V)){N=!0;break}N?I.interested():I.uninterested()}_update(){if(this.destroyed)return;const I=O(this.wires);let N;for(;N=I();)this._updateWireWrapper(N)}_updateWireWrapper(I){const N=this;"undefined"!=typeof window&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback(()=>{N._updateWire(I)},{timeout:250}):N._updateWire(I)}_updateWire(I){const N=this;if(I.peerChoking)return;if(!I.downloaded)return function(){if(I.requests.length)return;let $e=N._selections.length;for(;$e--;){const Xe=N._selections[$e];let fe;if("rarest"===N.strategy){const He=Xe.from+Xe.offset,ze=Xe.to,pt=ze-He+1,Le={};let at=0;const xt=ce(He,ze,Le);for(;at<pt&&(fe=N._rarityMap.getRarestPiece(xt),!(fe<0));){if(N._request(I,fe,!1))return;Le[fe]=!0,at+=1}}else for(fe=Xe.to;fe>=Xe.from+Xe.offset;--fe)if(I.peerPieces.get(fe)&&N._request(I,fe,!1))return}}();const V=We(I,.5);if(I.requests.length>=V)return;const X=We(I,1);function ce($e,Xe,fe,He){return ze=>ze>=$e&&ze<=Xe&&!(ze in fe)&&I.peerPieces.get(ze)&&(!He||He(ze))}function Ce($e){let Xe=$e;for(let He=$e;He<N._selections.length&&N._selections[He].priority;He++)Xe=He;const fe=N._selections[$e];N._selections[$e]=N._selections[Xe],N._selections[Xe]=fe}function Ve($e){if(I.requests.length>=X)return!0;const Xe=function(){const $e=I.downloadSpeed()||1;if($e>le)return()=>!0;const Xe=Math.max(1,I.requests.length)*M.BLOCK_LENGTH/$e;let fe=10,He=0;return ze=>{if(!fe||N.bitfield.get(ze))return!0;let pt=N.pieces[ze].missing;for(;He<N.wires.length;He++){const Le=N.wires[He],at=Le.downloadSpeed();if(!(at<le)&&!(at<=$e)&&Le.peerPieces.get(ze)&&!((pt-=at*Xe)>0))return fe--,!1}return!0}}();for(let fe=0;fe<N._selections.length;fe++){const He=N._selections[fe];let ze;if("rarest"===N.strategy){const pt=He.from+He.offset,Le=He.to,at=Le-pt+1,xt={};let gt=0;const At=ce(pt,Le,xt,Xe);for(;gt<at&&(ze=N._rarityMap.getRarestPiece(At),!(ze<0));){for(;N._request(I,ze,N._critical[ze]||$e););if(!(I.requests.length<X))return He.priority&&Ce(fe),!0;xt[ze]=!0,gt++}}else for(ze=He.from+He.offset;ze<=He.to;ze++)if(I.peerPieces.get(ze)&&Xe(ze)){for(;N._request(I,ze,N._critical[ze]||$e););if(!(I.requests.length<X))return He.priority&&Ce(fe),!0}}return!1}Ve(!1)||Ve(!0)}_rechoke(){if(!this.ready)return;const I=this.wires.map(V=>({wire:V,random:Math.random()})).sort((V,X)=>{const ce=V.wire,xe=X.wire;return ce.downloadSpeed()!==xe.downloadSpeed()?ce.downloadSpeed()-xe.downloadSpeed():ce.uploadSpeed()!==xe.uploadSpeed()?ce.uploadSpeed()-xe.uploadSpeed():ce.amChoking!==xe.amChoking?ce.amChoking?-1:1:V.random-X.random}).map(V=>V.wire);this._rechokeOptimisticTime<=0?this._rechokeOptimisticWire=null:this._rechokeOptimisticTime-=1;let N=0;for(;I.length>0&&N<this._rechokeNumSlots-1;){const V=I.pop();V.isSeeder||V===this._rechokeOptimisticWire||(V.unchoke(),V.peerInterested&&N++)}if(null===this._rechokeOptimisticWire&&this._rechokeNumSlots>0){const V=I.filter(X=>X.peerInterested);if(V.length>0){const X=V[(Ye=V.length,Math.random()*Ye|0)];X.unchoke(),this._rechokeOptimisticWire=X,this._rechokeOptimisticTime=2}}var Ye;I.filter(V=>V!==this._rechokeOptimisticWire).forEach(V=>V.choke())}_hotswap(I,N){const V=I.downloadSpeed();if(V<M.BLOCK_LENGTH||!this._reservations[N])return!1;const X=this._reservations[N];if(!X)return!1;let xe,Ne,ce=1/0;for(Ne=0;Ne<X.length;Ne++){const Ce=X[Ne];if(!Ce||Ce===I)continue;const Ve=Ce.downloadSpeed();Ve>=le||2*Ve>V||Ve>ce||(xe=Ce,ce=Ve)}if(!xe)return!1;for(Ne=0;Ne<X.length;Ne++)X[Ne]===xe&&(X[Ne]=null);for(Ne=0;Ne<xe.requests.length;Ne++){const Ce=xe.requests[Ne];Ce.piece===N&&this.pieces[N].cancel(Ce.offset/M.BLOCK_LENGTH|0)}return this.emit("hotswap",xe,I,N),!0}_request(I,N,V){const X=this,ce=I.requests.length,xe="webSeed"===I.type;if(X.bitfield.get(N))return!1;if(ce>=(xe?Math.min(function(Ye,I,N){return 1+Math.ceil(1*Ye.downloadSpeed()/N)}(I,0,X.pieceLength),X.maxWebConns):We(I,1)))return!1;const Ce=X.pieces[N];let Ve=xe?Ce.reserveRemaining():Ce.reserve();if(-1===Ve&&V&&X._hotswap(I,N)&&(Ve=xe?Ce.reserveRemaining():Ce.reserve()),-1===Ve)return!1;let $e=X._reservations[N];$e||($e=X._reservations[N]=[]);let Xe=$e.indexOf(null);-1===Xe&&(Xe=$e.length),$e[Xe]=I;const fe=Ce.chunkOffset(Ve),He=xe?Ce.chunkLengthRemaining(Ve):Ce.chunkLength(Ve);function ze(){z(()=>{X._update()})}return I.request(N,fe,He,function pt(Le,at){if(X.destroyed)return;if(!X.ready)return X.once("ready",()=>{pt(Le,at)});if($e[Xe]===I&&($e[Xe]=null),Ce!==X.pieces[N])return ze();if(Le)return X._debug("error getting piece %s (offset: %s length: %s) from %s: %s",N,fe,He,`${I.remoteAddress}:${I.remotePort}`,Le.message),xe?Ce.cancelRemaining(Ve):Ce.cancel(Ve),void ze();if(X._debug("got piece %s (offset: %s length: %s) from %s",N,fe,He,`${I.remoteAddress}:${I.remotePort}`),!Ce.set(Ve,at,I))return ze();const xt=Ce.flush();W(xt,gt=>{X.destroyed||(gt===X._hashes[N]?(X._debug("piece verified %s",N),X.store.put(N,xt,At=>{At?X._destroy(At):(X.pieces[N]=null,X._markVerified(N),X.wires.forEach(Kt=>{Kt.have(N)}),X._checkDone()&&!X.destroyed&&X.discovery.complete(),ze())})):(X.pieces[N]=new M(Ce.length),X.emit("warning",new Error(`Piece ${N} failed verification`)),ze()))})}),!0}_checkDone(){if(this.destroyed)return;this.files.forEach(N=>{if(!N.done){for(let V=N._startPiece;V<=N._endPiece;++V)if(!this.bitfield.get(V))return;N.done=!0,N.emit("done"),this._debug(`file done: ${N.name}`)}});let I=!0;for(const N of this._selections){for(let V=N.from;V<=N.to;V++)if(!this.bitfield.get(V)){I=!1;break}if(!I)break}return!this.done&&I?(this.done=!0,this._debug(`torrent done: ${this.infoHash}`),this.emit("done")):this.done=!1,this._gcSelections(),I}load(I,N){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(I,N)});Array.isArray(I)||(I=[I]),N||(N=ot);const V=new E(I),X=new f(this.store,this.pieceLength);L(V,X,ce=>{if(ce)return N(ce);this._markAllVerified(),this._checkDone(),N(null)})}createServer(I){if("function"!=typeof K)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");const N=new K(this,I);return this._servers.push(N),N}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const I=[].slice.call(arguments);I[0]=`[${this.client?this.client._debugId:"No Client"}] [${this._debugId}] ${I[0]}`,n(...I)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),"function"!=typeof P.connect||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const I=this._queue.shift();if(!I)return;this._debug("%s connect attempt to %s",I.type,I.addr);const N=x(I.addr),V={host:N[0],port:N[1]};I.conn=this.client.utp&&"utpOutgoing"===I.type?Y.connect(V.port,V.host):P.connect(V);const X=I.conn;X.once("connect",()=>{I.onConnect()}),X.once("error",ce=>{I.destroy(ce)}),I.startConnectTimeout(),X.on("close",()=>{if(this.destroyed)return;if(I.retries>=Me.length){if(this.client.utp){const Ne=this._addPeer(I.addr,"tcp");Ne&&(Ne.retries=0)}else this._debug("conn %s closed: will not re-add (max %s attempts)",I.addr,Me.length);return}const ce=Me[I.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",I.addr,ce,I.retries+1);const xe=setTimeout(()=>{if(this.destroyed)return;const Ne=x(I.addr)[0],Ce=this.client.utp&&this._isIPv4(Ne)?"utp":"tcp",Ve=this._addPeer(I.addr,Ce);Ve&&(Ve.retries=I.retries+1)},ce);xe.unref&&xe.unref()})}_validAddr(I){let N;try{N=x(I)}catch(ce){return!1}const X=N[1];return X>0&&X<65535&&!("127.0.0.1"===N[0]&&X===this.client.torrentPort)}_isIPv4(I){return/^((?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])[.]){3}(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/.test(I)}}},77991:(F,_,d)=>{const x=d(19296).Z,v=d(57115)("webtorrent:webconn"),w=d(99769),f=d(19538),i=d(20316),n=d(19773),a=d(41907).i8;F.exports=class extends n{constructor(h,g){super(),this.url=h,this.connId=h,this.webPeerId=i.sync(h),this._torrent=g,this._init()}_init(){this.setKeepAlive(!0),this.use(f()),this.once("handshake",(h,g)=>{if(this.destroyed)return;this.handshake(h,this.webPeerId);const T=this._torrent.pieces.length,E=new x(T);for(let P=0;P<=T;P++)E.set(P,!0);this.bitfield(E)}),this.once("interested",()=>{v("interested"),this.unchoke()}),this.on("uninterested",()=>{v("uninterested")}),this.on("choke",()=>{v("choke")}),this.on("unchoke",()=>{v("unchoke")}),this.on("bitfield",()=>{v("bitfield")}),this.lt_donthave.on("donthave",()=>{v("donthave")}),this.on("request",(h,g,T,E)=>{v("request pieceIndex=%d offset=%d length=%d",h,g,T),this.httpRequest(h,g,T,(P,b)=>{if(P){this.lt_donthave.donthave(h);const C=setTimeout(()=>{this.destroyed||this.have(h)},1e4);C.unref&&C.unref()}E(P,b)})})}httpRequest(h,g,T,E){const b=h*this._torrent.pieceLength+g,C=b+T-1,l=this._torrent.files;let m;if(l.length<=1)m=[{url:this.url,start:b,end:C}];else{const z=l.filter(O=>O.offset<=C&&O.offset+O.length>b);if(z.length<1)return E(new Error("Could not find file corresponding to web seed range request"));m=z.map(O=>{const W=O.offset+O.length-1;return{url:this.url+("/"===this.url[this.url.length-1]?"":"/")+O.path,fileOffsetInRange:Math.max(O.offset-b,0),start:Math.max(b-O.offset,0),end:Math.min(W,C-O.offset)}})}let L,U=0,M=!1;m.length>1&&(L=Buffer.alloc(T)),m.forEach(z=>{const O=z.url,W=z.start,Q=z.end;v("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",O,h,g,T,W,Q);const ie={url:O,method:"GET",headers:{"user-agent":`WebTorrent/${a} (https://webtorrent.io)`,range:`bytes=${W}-${Q}`},timeout:6e4};function ae(S,B){if(S.statusCode<200||S.statusCode>=300)return M?void 0:(M=!0,E(new Error(`Unexpected HTTP status code ${S.statusCode}`)));v("Got data of length %d",B.length),1===m.length?E(null,B):(B.copy(L,z.fileOffsetInRange),++U===m.length&&E(null,L))}w.concat(ie,(S,B,j)=>{if(!M){if(S)return"undefined"==typeof window||O.startsWith(`${window.location.origin}/`)?(M=!0,E(S)):w.head(O,(K,Y)=>{if(!M){if(K)return M=!0,E(K);if(Y.statusCode<200||Y.statusCode>=300)return M=!0,E(new Error(`Unexpected HTTP status code ${Y.statusCode}`));if(Y.url===O)return M=!0,E(S);ie.url=Y.url,w.concat(ie,(se,G,J)=>{if(!M){if(se)return M=!0,E(se);ae(G,J)}})}});ae(B,j)}})})}destroy(){super.destroy(),this._torrent=null}}},5859:F=>{F.exports=function(){for(var x={},v=0;v<arguments.length;v++){var w=arguments[v];for(var f in w)_.call(w,f)&&(x[f]=w[f])}return x};var _=Object.prototype.hasOwnProperty},9049:(F,_,d)=>{"use strict";d.r(_),d.d(_,{WebTorrentPlugin:()=>Cr});var x=d(22511),v=d.n(x),w=d(54911),f=d(54175),i=d(54187),n=d(3782),a=d(61855),p=d(43674),u=function(){return(u=Object.assign||function(e){for(var r,c=1,y=arguments.length;c<y;c++)for(var k in r=arguments[c])Object.prototype.hasOwnProperty.call(r,k)&&(e[k]=r[k]);return e}).apply(this,arguments)};function o(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var c=Array(t),y=0;for(e=0;e<r;e++)for(var k=arguments[e],A=0,D=k.length;A<D;A++,y++)c[y]=k[A];return c}var s=Object.keys,h=Array.isArray,g="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function T(t,e){return"object"!=typeof e||s(e).forEach(function(r){t[r]=e[r]}),t}"undefined"!=typeof Promise&&!g.Promise&&(g.Promise=Promise);var E=Object.getPrototypeOf,P={}.hasOwnProperty;function b(t,e){return P.call(t,e)}function C(t,e){"function"==typeof e&&(e=e(E(t))),s(e).forEach(function(r){m(t,r,e[r])})}var l=Object.defineProperty;function m(t,e,r,c){l(t,e,T(r&&b(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},c))}function U(t){return{from:function(e){return t.prototype=Object.create(e.prototype),m(t.prototype,"constructor",t),{extend:C.bind(null,t.prototype)}}}}var M=Object.getOwnPropertyDescriptor;function L(t,e){var c;return M(t,e)||(c=E(t))&&L(c,e)}var z=[].slice;function O(t,e,r){return z.call(t,e,r)}function W(t,e){return e(t)}function Q(t){if(!t)throw new Error("Assertion Failed")}function ie(t){g.setImmediate?setImmediate(t):setTimeout(t,0)}function ae(t,e){return t.reduce(function(r,c,y){var k=e(c,y);return k&&(r[k[0]]=k[1]),r},{})}function B(t,e){if(b(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var r=[],c=0,y=e.length;c<y;++c){var k=B(t,e[c]);r.push(k)}return r}var A=e.indexOf(".");if(-1!==A){var D=t[e.substr(0,A)];return void 0===D?void 0:B(D,e.substr(A+1))}}function j(t,e,r){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){Q("string"!=typeof r&&"length"in r);for(var c=0,y=e.length;c<y;++c)j(t,e[c],r[c])}else{var k=e.indexOf(".");if(-1!==k){var A=e.substr(0,k),D=e.substr(k+1);if(""===D)void 0===r?h(t)&&!isNaN(parseInt(A))?t.splice(A,1):delete t[A]:t[A]=r;else{var H=t[A];H||(H=t[A]={}),j(H,D,r)}}else void 0===r?h(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function K(t,e){"string"==typeof e?j(t,e,void 0):"length"in e&&[].map.call(e,function(r){j(t,r,void 0)})}function Y(t){var e={};for(var r in t)b(t,r)&&(e[r]=t[r]);return e}var se=[].concat;function G(t){return se.apply([],t)}var J="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(G([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return g[t]}),$=J.map(function(t){return g[t]}),le=ae(J,function(t){return[t,!0]});function pe(t){if(!t||"object"!=typeof t)return t;var e;if(h(t)){e=[];for(var r=0,c=t.length;r<c;++r)e.push(pe(t[r]))}else if($.indexOf(t.constructor)>=0)e=t;else for(var y in e=t.constructor?Object.create(t.constructor.prototype):{},t)b(t,y)&&(e[y]=pe(t[y]));return e}var te={}.toString;function ve(t){return te.call(t).slice(8,-1)}var Be=function(t,e){return"Array"===e?""+t.map(function(r){return Be(r,ve(r))}):"ArrayBuffer"===e?""+new Uint8Array(t):"Date"===e?t.getTime():ArrayBuffer.isView(t)?""+new Uint8Array(t.buffer):t};function De(t,e,r,c){return r=r||{},c=c||"",s(t).forEach(function(y){if(b(e,y)){var k=t[y],A=e[y];if("object"==typeof k&&"object"==typeof A&&k&&A){var D=ve(k),H=ve(A);D===H?le[D]?Be(k,D)!==Be(A,H)&&(r[c+y]=e[y]):De(k,A,r,c+y+"."):r[c+y]=e[y]}else k!==A&&(r[c+y]=e[y])}else r[c+y]=void 0}),s(e).forEach(function(y){b(t,y)||(r[c+y]=e[y])}),r}var Me="undefined"!=typeof Symbol&&Symbol.iterator,et=Me?function(t){var e;return null!=t&&(e=t[Me])&&e.apply(t)}:function(){return null},Pe={};function Te(t){var e,r,c,y;if(1===arguments.length){if(h(t))return t.slice();if(this===Pe&&"string"==typeof t)return[t];if(y=et(t)){for(r=[];!(c=y.next()).done;)r.push(c.value);return r}if(null==t)return[t];if("number"==typeof(e=t.length)){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var Fe="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},We="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function st(t,e){We=t,lt=e}var lt=function(){return!0},ot=!new Error("").stack;function Ye(){if(ot)try{throw new Error}catch(t){return t}return new Error}function I(t,e){var r=t.stack;return r?(e=e||0,0===r.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),r.split("\n").slice(e).filter(lt).map(function(c){return"\n"+c}).join("")):""}var V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],X=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function xe(t,e){this._e=Ye(),this.name=t,this.message=e}function Ne(t,e){return t+". Errors: "+Object.keys(e).map(function(r){return e[r].toString()}).filter(function(r,c,y){return y.indexOf(r)===c}).join("\n")}function Ce(t,e,r,c){this._e=Ye(),this.failures=e,this.failedKeys=c,this.successCount=r,this.message=Ne(t,e)}function Ve(t,e){this._e=Ye(),this.name="BulkError",this.failures=e,this.message=Ne(t,e)}U(xe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+I(this._e,2))}},toString:function(){return this.name+": "+this.message}}),U(Ce).from(xe),U(Ve).from(xe);var $e=X.reduce(function(t,e){return t[e]=e+"Error",t},{}),Xe=xe,fe=X.reduce(function(t,e){var r=e+"Error";function c(y,k){this._e=Ye(),this.name=r,y?"string"==typeof y?(this.message=y+(k?"\n "+k:""),this.inner=k||null):"object"==typeof y&&(this.message=y.name+" "+y.message,this.inner=y):(this.message=ce[e]||r,this.inner=null)}return U(c).from(Xe),t[e]=c,t},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var He=V.reduce(function(t,e){return t[e+"Error"]=fe[e],t},{}),pt=X.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=fe[e]),t},{});function Le(){}function at(t){return t}function xt(t,e){return null==t||t===at?e:function(r){return e(t(r))}}function gt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function At(t,e){return t===Le?e:function(){var r=t.apply(this,arguments);void 0!==r&&(arguments[0]=r);var c=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var k=e.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?gt(c,this.onsuccess):c),y&&(this.onerror=this.onerror?gt(y,this.onerror):y),void 0!==k?k:r}}function Kt(t,e){return t===Le?e:function(){t.apply(this,arguments);var r=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?gt(r,this.onsuccess):r),c&&(this.onerror=this.onerror?gt(c,this.onerror):c)}}function jn(t,e){return t===Le?e:function(r){var c=t.apply(this,arguments);T(r,c);var y=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var A=e.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?gt(y,this.onsuccess):y),k&&(this.onerror=this.onerror?gt(k,this.onerror):k),void 0===c?void 0===A?void 0:A:T(c,A)}}function Wn(t,e){return t===Le?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function kn(t,e){return t===Le?e:function(){var r=t.apply(this,arguments);if(r&&"function"==typeof r.then){for(var c=this,y=arguments.length,k=new Array(y);y--;)k[y]=arguments[y];return r.then(function(){return e.apply(c,k)})}return e.apply(this,arguments)}}pt.ModifyError=Ce,pt.DexieError=xe,pt.BulkError=Ve;var Mt={},sn="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,t.__proto__,t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,e.__proto__,t]}(),on=sn[0],Gt=sn[1],an=sn[2],ln=Gt&&Gt.then,$t=on&&on.constructor,cn=!!an,un=!1,zn=an?function(){an.then(je)}:g.setImmediate?setImmediate.bind(null,je):g.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){je(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(je,0)},Rt=function(t,e){Nt.push([t,e]),Pt&&(zn(),Pt=!1)},hn=!0,Pt=!0,vt=[],qt=[],Yt=null,Xt=at,Ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{dr(t[0],t[1])}catch(e){}})}},Ie=Ct,Nt=[],bt=0,Ft=[];function ge(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Le,this._lib=!1;var e=this._PSD=Ie;if(We&&(this._stackHolder=Ye(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==Mt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Qt(this,this._value))}this._state=null,this._value=null,++e.ref,fn(this,t)}var dn={get:function(){var t=Ie,e=Pn;function r(c,y){var k=this,A=!t.global&&(t!==Ie||e!==Pn),D=A&&!Wt(),H=new ge(function(q,Z){be(k,new Bn(Ln(c,t,A,D),Ln(y,t,A,D),q,Z,t))});return We&&Oe(H,this),H}return r.prototype=Mt,r},set:function(t){m(this,"then",t&&t.prototype===Mt?dn:{get:function(){return t},set:dn.set})}};function Bn(t,e,r,c,y){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=c,this.psd=y}function fn(t,e){try{e(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var c=t._lib&&nt();r&&"function"==typeof r.then?fn(t,function(y,k){r instanceof ge?r._then(y,k):r.then(y,k)}):(t._state=!0,t._value=r,An(t)),c&&tt()}},Qt.bind(null,t))}catch(r){Qt(t,r)}}function Qt(t,e){if(qt.push(e),null===t._state){var r=t._lib&&nt();e=Xt(e),t._state=!1,t._value=e,We&&null!==e&&"object"==typeof e&&!e._promise&&function(t,e,r){try{t.apply(null,void 0)}catch(c){}}(function(){var c=L(e,"stack");e._promise=t,m(e,"stack",{get:function(){return un?c&&(c.get?c.get.apply(e):c.value):t.stack}})}),function(t){vt.some(function(e){return e._value===t._value})||vt.push(t)}(t),An(t),r&&tt()}}function An(t){var e=t._listeners;t._listeners=[];for(var r=0,c=e.length;r<c;++r)be(t,e[r]);var y=t._PSD;--y.ref||y.finalize(),0===bt&&(++bt,Rt(function(){0==--bt&&St()},[]))}function be(t,e){if(null!==t._state){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++bt,Rt(R,[r,t,e])}else t._listeners.push(e)}function R(t,e,r){try{Yt=e;var c,y=e._value;e._state?c=t(y):(qt.length&&(qt=[]),c=t(y),-1===qt.indexOf(y)&&function(t){for(var e=vt.length;e;)if(vt[--e]._value===t._value)return void vt.splice(e,1)}(e)),r.resolve(c)}catch(k){r.reject(k)}finally{Yt=null,0==--bt&&St(),--r.psd.ref||r.psd.finalize()}}function ue(t,e,r){if(e.length===r)return e;var c="";if(!1===t._state){var k,A,y=t._value;null!=y?(k=y.name||"Error",A=y.message||y,c=I(y,0)):(k=y,A=""),e.push(k+(A?": "+A:"")+c)}return We&&((c=I(t._stackHolder,2))&&-1===e.indexOf(c)&&e.push(c),t._prev&&ue(t._prev,e,r)),e}function Oe(t,e){var r=e?e._numPrev+1:0;r<100&&(t._prev=e,t._numPrev=r)}function je(){nt()&&tt()}function nt(){var t=hn;return hn=!1,Pt=!1,t}function tt(){var t,e,r;do{for(;Nt.length>0;)for(t=Nt,Nt=[],r=t.length,e=0;e<r;++e){var c=t[e];c[0].apply(null,c[1])}}while(Nt.length>0);hn=!0,Pt=!0}function St(){var t=vt;vt=[],t.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var e=Ft.slice(0),r=e.length;r;)e[--r]()}function wt(t){return new ge(Mt,!1,t)}function Ze(t,e){var r=Ie;return function(){var c=nt(),y=Ie;try{return Lt(r,!0),t.apply(this,arguments)}catch(k){e&&e(k)}finally{Lt(y,!1),c&&tt()}}}C(ge.prototype,{then:dn,_then:function(t,e){be(this,new Bn(null,null,t,e,Ie))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],r=arguments[1];return this.then(null,"function"==typeof e?function(c){return c instanceof e?r(c):wt(c)}:function(c){return c&&c.name===e?r(c):wt(c)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),wt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{un=!0;var e=ue(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{un=!1}}},timeout:function(t,e){var r=this;return t<1/0?new ge(function(c,y){var k=setTimeout(function(){return y(new fe.Timeout(e))},t);r.then(c,y).finally(clearTimeout.bind(null,k))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&m(ge.prototype,Symbol.toStringTag,"Dexie.Promise"),Ct.env=lr(),C(ge,{all:function(){var t=Te.apply(null,arguments).map(Cn);return new ge(function(e,r){0===t.length&&e([]);var c=t.length;t.forEach(function(y,k){return ge.resolve(y).then(function(A){t[k]=A,--c||e(t)},r)})})},resolve:function(t){if(t instanceof ge)return t;if(t&&"function"==typeof t.then)return new ge(function(r,c){t.then(r,c)});var e=new ge(Mt,!0,t);return Oe(e,Yt),e},reject:wt,race:function(){var t=Te.apply(null,arguments).map(Cn);return new ge(function(e,r){t.map(function(c){return ge.resolve(c).then(e,r)})})},PSD:{get:function(){return Ie},set:function(t){return Ie=t}},totalEchoes:{get:function(){return Pn}},newPSD:jt,usePSD:mn,scheduler:{get:function(){return Rt},set:function(t){Rt=t}},rejectionMapper:{get:function(){return Xt},set:function(t){Xt=t}},follow:function(t,e){return new ge(function(r,c){return jt(function(y,k){var A=Ie;A.unhandleds=[],A.onunhandled=k,A.finalize=gt(function(){var D=this;Ft.push(function e(){0===D.unhandleds.length?y():k(D.unhandleds[0]),Ft.splice(Ft.indexOf(e),1)}),++bt,Rt(function(){0==--bt&&St()},[])},A.finalize),t()},e,r,c)})}}),$t&&($t.allSettled&&m(ge,"allSettled",function(){var t=Te.apply(null,arguments).map(Cn);return new ge(function(e){0===t.length&&e([]);var r=t.length,c=new Array(r);t.forEach(function(y,k){return ge.resolve(y).then(function(A){return c[k]={status:"fulfilled",value:A}},function(A){return c[k]={status:"rejected",reason:A}}).then(function(){return--r||e(c)})})})}),$t.any&&"undefined"!=typeof AggregateError&&m(ge,"any",function(){var t=Te.apply(null,arguments).map(Cn);return new ge(function(e,r){0===t.length&&r(new AggregateError([]));var c=t.length,y=new Array(c);t.forEach(function(k,A){return ge.resolve(k).then(function(D){return e(D)},function(D){y[A]=D,--c||r(new AggregateError(y))})})})}));var ct={awaits:0,echoes:0,id:0},Dr=0,Rn=[],Kn=0,Pn=0,Ur=0;function jt(t,e,r,c){var y=Ie,k=Object.create(y);k.parent=y,k.ref=0,k.global=!1,k.id=++Ur;var A=Ct.env;k.env=cn?{Promise:ge,PromiseProp:{value:ge,configurable:!0,writable:!0},all:ge.all,race:ge.race,allSettled:ge.allSettled,any:ge.any,resolve:ge.resolve,reject:ge.reject,nthen:ur(A.nthen,k),gthen:ur(A.gthen,k)}:{},e&&T(k,e),++y.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()};var D=mn(k,t,r,c);return 0===k.ref&&k.finalize(),D}function pn(){return ct.id||(ct.id=++Dr),++ct.awaits,ct.echoes+=100,ct.id}function Wt(){return!!ct.awaits&&(0==--ct.awaits&&(ct.id=0),ct.echoes=100*ct.awaits,!0)}function Cn(t){return ct.echoes&&t&&t.constructor===$t?(pn(),t.then(function(e){return Wt(),e},function(e){return Wt(),dt(e)})):t}function Mr(t){++Pn,(!ct.echoes||0==--ct.echoes)&&(ct.echoes=ct.id=0),Rn.push(Ie),Lt(t,!0)}function Nr(){var t=Rn[Rn.length-1];Rn.pop(),Lt(t,!1)}function Lt(t,e){var r=Ie;if((e?ct.echoes&&(!Kn++||t!==Ie):Kn&&(!--Kn||t!==Ie))&&cr(e?Mr.bind(null,t):Nr),t!==Ie&&(Ie=t,r===Ct&&(Ct.env=lr()),cn)){var c=Ct.env.Promise,y=t.env;Gt.then=y.nthen,c.prototype.then=y.gthen,(r.global||t.global)&&(Object.defineProperty(g,"Promise",y.PromiseProp),c.all=y.all,c.race=y.race,c.resolve=y.resolve,c.reject=y.reject,y.allSettled&&(c.allSettled=y.allSettled),y.any&&(c.any=y.any))}}function lr(){var t=g.Promise;return cn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(g,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Gt.then,gthen:t.prototype.then}:{}}function mn(t,e,r,c,y){var k=Ie;try{return Lt(t,!0),e(r,c,y)}finally{Lt(k,!1)}}function cr(t){ln.call(on,t)}function Ln(t,e,r,c){return"function"!=typeof t?t:function(){var y=Ie;r&&pn(),Lt(e,!0);try{return t.apply(this,arguments)}finally{Lt(y,!1),c&&cr(Wt)}}}function ur(t,e){return function(r,c){return t.call(this,Ln(r,e),Ln(c,e))}}-1===(""+ln).indexOf("[native code]")&&(pn=Wt=Le);var hr="unhandledrejection";function dr(t,e){var r;try{r=e.onuncatched(t)}catch(k){}if(!1!==r)try{var c,y={promise:e,reason:t};if(g.document&&document.createEvent?((c=document.createEvent("Event")).initEvent(hr,!0,!0),T(c,y)):g.CustomEvent&&T(c=new CustomEvent(hr,{detail:y}),y),c&&g.dispatchEvent&&(dispatchEvent(c),!g.PromiseRejectionEvent&&g.onunhandledrejection))try{g.onunhandledrejection(c)}catch(k){}We&&c&&!c.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch(k){}}var dt=ge.reject;function fr(t,e,r,c){if(t._state.openComplete||Ie.letThrough){var y=t._createTransaction(e,r,t._dbSchema);try{y.create()}catch(k){return dt(k)}return y._promise(e,function(k,A){return jt(function(){return Ie.trans=y,c(k,A,y)})}).then(function(k){return y._completion.then(function(){return k})})}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return dt(new fe.DatabaseClosed);t.open().catch(Le)}return t._state.dbReadyPromise.then(function(){return fr(t,e,r,c)})}var Jt=String.fromCharCode(65535),Vn=-1/0,Tt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mr="String expected.",gn=[],Gn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Fr=Gn,Hr=Gn,gr=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},On="__dbnames",$n="readonly",qn="readwrite";function zt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var vr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dn(t){return function(e){return void 0===B(e,t)&&K(e=pe(e),t),e}}var jr=function(){function t(){}return t.prototype._trans=function(e,r,c){var y=this._tx||Ie.trans,k=this.name;function A(H,q,Z){if(!Z.schema[k])throw new fe.NotFound("Table "+k+" not part of transaction");return r(Z.idbtrans,Z)}var D=nt();try{return y&&y.db===this.db?y===Ie.trans?y._promise(e,A,c):jt(function(){return y._promise(e,A,c)},{trans:y,transless:Ie.transless||Ie}):fr(this.db,e,[this.name],A)}finally{D&&tt()}},t.prototype.get=function(e,r){var c=this;return e&&e.constructor===Object?this.where(e).first(r):this._trans("readonly",function(y){return c.core.get({trans:y,key:e}).then(function(k){return c.hook.reading.fire(k)})}).then(r)},t.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var r=s(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(Z){return Z.compound&&r.every(function(ne){return Z.keyPath.indexOf(ne)>=0})&&Z.keyPath.every(function(ne){return r.indexOf(ne)>=0})})[0];if(c&&this.db._maxKey!==Jt)return this.where(c.name).equals(c.keyPath.map(function(Z){return e[Z]}));!c&&We&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+r.join("+")+"]");var y=this.schema.idxByName,k=this.db._deps.indexedDB;function A(Z,ne){try{return 0===k.cmp(Z,ne)}catch(we){return!1}}var D=r.reduce(function(Z,ne){var we=Z[0],ye=Z[1],re=y[ne],oe=e[ne];return[we||re,we||!re?zt(ye,re&&re.multi?function(_e){var Ee=B(_e,ne);return h(Ee)&&Ee.some(function(me){return A(oe,me)})}:function(_e){return A(oe,B(_e,ne))}):ye]},[null,null]),H=D[0],q=D[1];return H?this.where(H.name).equals(e[H.keyPath]).filter(q):c?this.filter(q):this.where(r).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var r=function(c){if(!c)return c;var y=Object.create(e.prototype);for(var k in c)if(b(c,k))try{y[k]=c[k]}catch(A){}return y};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},t.prototype.defineClass=function(){return this.mapToClass(function(r){T(this,r)})},t.prototype.add=function(e,r){var c=this,y=this.schema.primKey,A=y.keyPath,D=e;return A&&y.auto&&(D=Dn(A)(e)),this._trans("readwrite",function(H){return c.core.mutate({trans:H,type:"add",keys:null!=r?[r]:null,values:[D]})}).then(function(H){return H.numFailures?ge.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{j(e,A,H)}catch(q){}return H})},t.prototype.update=function(e,r){if("object"!=typeof r||h(r))throw new fe.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||h(e))return this.where(":id").equals(e).modify(r);s(r).forEach(function(y){j(e,y,r[y])});var c=B(e,this.schema.primKey.keyPath);return void 0===c?dt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(r)},t.prototype.put=function(e,r){var c=this,y=this.schema.primKey,A=y.keyPath,D=e;return A&&y.auto&&(D=Dn(A)(e)),this._trans("readwrite",function(H){return c.core.mutate({trans:H,type:"put",values:[D],keys:null!=r?[r]:null})}).then(function(H){return H.numFailures?ge.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{j(e,A,H)}catch(q){}return H})},t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(c){return r.core.mutate({trans:c,type:"delete",keys:[e]})}).then(function(c){return c.numFailures?ge.reject(c.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:vr})}).then(function(r){return r.numFailures?ge.reject(r.failures[0]):void 0})},t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(c){return r.core.getMany({keys:e,trans:c}).then(function(y){return y.map(function(k){return r.hook.reading.fire(k)})})})},t.prototype.bulkAdd=function(e,r,c){var y=this,k=Array.isArray(r)?r:void 0,A=(c=c||(k?void 0:r))?c.allKeys:void 0;return this._trans("readwrite",function(D){var H=y.schema.primKey,q=H.auto,Z=H.keyPath;if(Z&&k)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==e.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ne=e.length,we=Z&&q?e.map(Dn(Z)):e;return y.core.mutate({trans:D,type:"add",keys:k,values:we,wantResults:A}).then(function(ye){var re=ye.numFailures,Ee=ye.failures;if(0===re)return A?ye.results:ye.lastResult;throw new Ve(y.name+".bulkAdd(): "+re+" of "+ne+" operations failed",Object.keys(Ee).map(function(de){return Ee[de]}))})})},t.prototype.bulkPut=function(e,r,c){var y=this,k=Array.isArray(r)?r:void 0,A=(c=c||(k?void 0:r))?c.allKeys:void 0;return this._trans("readwrite",function(D){var H=y.schema.primKey,q=H.auto,Z=H.keyPath;if(Z&&k)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==e.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ne=e.length,we=Z&&q?e.map(Dn(Z)):e;return y.core.mutate({trans:D,type:"put",keys:k,values:we,wantResults:A}).then(function(ye){var re=ye.numFailures,Ee=ye.failures;if(0===re)return A?ye.results:ye.lastResult;throw new Ve(y.name+".bulkPut(): "+re+" of "+ne+" operations failed",Object.keys(Ee).map(function(de){return Ee[de]}))})})},t.prototype.bulkDelete=function(e){var r=this,c=e.length;return this._trans("readwrite",function(y){return r.core.mutate({trans:y,type:"delete",keys:e})}).then(function(y){var k=y.numFailures;if(0===k)return y.lastResult;throw new Ve(r.name+".bulkDelete(): "+k+" of "+c+" operations failed",y.failures)})},t}();function Un(t){var e={},r=function(D,H){if(H){for(var q=arguments.length,Z=new Array(q-1);--q;)Z[q-1]=arguments[q];return e[D].subscribe.apply(null,Z),t}if("string"==typeof D)return e[D]};r.addEventType=k;for(var c=1,y=arguments.length;c<y;++c)k(arguments[c]);return r;function k(D,H,q){if("object"==typeof D)return A(D);H||(H=Wn),q||(q=Le);var Z={subscribers:[],fire:q,subscribe:function(ne){-1===Z.subscribers.indexOf(ne)&&(Z.subscribers.push(ne),Z.fire=H(Z.fire,ne))},unsubscribe:function(ne){Z.subscribers=Z.subscribers.filter(function(we){return we!==ne}),Z.fire=Z.subscribers.reduce(H,q)}};return e[D]=r[D]=Z,Z}function A(D){s(D).forEach(function(H){var q=D[H];if(h(q))k(H,D[H][0],D[H][1]);else{if("asap"!==q)throw new fe.InvalidArgument("Invalid event config");var Z=k(H,at,function(){for(var we=arguments.length,ye=new Array(we);we--;)ye[we]=arguments[we];Z.subscribers.forEach(function(re){ie(function(){re.apply(null,ye)})})})}})}}function vn(t,e){return U(e).from({prototype:t}),e}function yn(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Yn(t,e){t.filter=zt(t.filter,e)}function Xn(t,e,r){var c=t.replayFilter;t.replayFilter=c?function(){return zt(c(),e())}:e,t.justLimit=r&&!c}function Mn(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new fe.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function yr(t,e,r){var c=Mn(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:c,range:t.range}})}function Nn(t,e,r,c){var y=t.replayFilter?zt(t.filter,t.replayFilter()):t.filter;if(t.or){var k={},A=function(D,H,q){if(!y||y(H,q,function(we){return H.stop(we)},function(we){return H.fail(we)})){var Z=H.primaryKey,ne=""+Z;"[object ArrayBuffer]"===ne&&(ne=""+new Uint8Array(Z)),b(k,ne)||(k[ne]=!0,e(D,H,q))}};return Promise.all([t.or._iterate(A,r),_r(yr(t,c,r),t.algorithm,A,!t.keysOnly&&t.valueMapper)])}return _r(yr(t,c,r),zt(t.algorithm,y),e,!t.keysOnly&&t.valueMapper)}function _r(t,e,r,c){var k=Ze(c?function(A,D,H){return r(c(A),D,H)}:r);return t.then(function(A){if(A)return A.start(function(){var D=function(){return A.continue()};(!e||e(A,function(H){return D=H},function(H){A.stop(H),D=Le},function(H){A.fail(H),D=Le}))&&k(A.value,A,function(H){return D=H}),D()})})}var Kr=function(){function t(){}return t.prototype._read=function(e,r){var c=this._ctx;return c.error?c.table._trans(null,dt.bind(null,c.error)):c.table._trans("readonly",e).then(r)},t.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,dt.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=zt(r.algorithm,e)},t.prototype._iterate=function(e,r){return Nn(this._ctx,e,r,this._ctx.table.core)},t.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return e&&T(c,e),r._ctx=c,r},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var r=this._ctx;return this._read(function(c){return Nn(r,e,c,r.table.core)})},t.prototype.count=function(e){var r=this;return this._read(function(c){var y=r._ctx,k=y.table.core;if(yn(y,!0))return k.count({trans:c,query:{index:Mn(y,k.schema),range:y.range}}).then(function(D){return Math.min(D,y.limit)});var A=0;return Nn(y,function(){return++A,!1},c,k).then(function(){return A})}).then(e)},t.prototype.sortBy=function(e,r){var c=e.split(".").reverse(),y=c[0],k=c.length-1;function A(q,Z){return Z?A(q[c[Z]],Z-1):q[y]}var D="next"===this._ctx.dir?1:-1;function H(q,Z){var ne=A(q,k),we=A(Z,k);return ne<we?-D:ne>we?D:0}return this.toArray(function(q){return q.sort(H)}).then(r)},t.prototype.toArray=function(e){var r=this;return this._read(function(c){var y=r._ctx;if("next"===y.dir&&yn(y,!0)&&y.limit>0){var k=y.valueMapper,A=Mn(y,y.table.core.schema);return y.table.core.query({trans:c,limit:y.limit,values:!0,query:{index:A,range:y.range}}).then(function(H){var q=H.result;return k?q.map(k):q})}var D=[];return Nn(y,function(H){return D.push(H)},c,y.table.core).then(function(){return D})},e)},t.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,yn(r)?Xn(r,function(){var c=e;return function(y,k){return 0===c||(1===c?(--c,!1):(k(function(){y.advance(c),c=0}),!1))}}):Xn(r,function(){var c=e;return function(){return--c<0}})),this},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Xn(this._ctx,function(){var r=e;return function(c,y,k){return--r<=0&&y(k),r>=0}},!0),this},t.prototype.until=function(e,r){return Yn(this._ctx,function(c,y,k){return!e(c.value)||(y(k),r)}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Yn(this._ctx,function(r){return e(r.value)}),function(t,e){t.isMatch=zt(t.isMatch,e)}(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(c,y){e(y.key,y)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(c,y){e(y.primaryKey,y)})},t.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var c=[];return this.each(function(y,k){c.push(k.key)}).then(function(){return c}).then(e)},t.prototype.primaryKeys=function(e){var r=this._ctx;if("next"===r.dir&&yn(r,!0)&&r.limit>0)return this._read(function(y){var k=Mn(r,r.table.core.schema);return r.table.core.query({trans:y,values:!1,limit:r.limit,query:{index:k,range:r.range}})}).then(function(y){return y.result}).then(e);r.keysOnly=!r.isMatch;var c=[];return this.each(function(y,k){c.push(k.primaryKey)}).then(function(){return c}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var c={};return Yn(this._ctx,function(y){var k=y.primaryKey.toString(),A=b(c,k);return c[k]=!0,!A}),this},t.prototype.modify=function(e){var r=this,c=this._ctx;return this._write(function(y){var k;if("function"==typeof e)k=e;else{var A=s(e),D=A.length;k=function(me){for(var de=!1,he=0;he<D;++he){var ee=A[he],Se=e[ee];B(me,ee)!==Se&&(j(me,ee,Se),de=!0)}return de}}var H=c.table.core,q=H.schema.primaryKey,Z=q.outbound,ne=q.extractKey,we="testmode"in bn?1:2e3,ye=r.db.core.cmp,re=[],oe=0,_e=[],Ee=function(me,de){var he=de.failures;oe+=me-de.numFailures;for(var Se=0,Ae=s(he);Se<Ae.length;Se++)re.push(he[Ae[Se]])};return r.clone().primaryKeys().then(function(me){var de=function(he){var ee=Math.min(we,me.length-he);return H.getMany({trans:y,keys:me.slice(he,he+ee)}).then(function(Se){for(var Ae=[],ke=[],Re=Z?[]:null,qe=[],Ke=0;Ke<ee;++Ke){var ft=Se[Ke],Qe={value:pe(ft),primKey:me[he+Ke]};!1!==k.call(Qe,Qe.value,Qe)&&(null==Qe.value?qe.push(me[he+Ke]):Z||0===ye(ne(ft),ne(Qe.value))?(ke.push(Qe.value),Z&&Re.push(me[he+Ke])):(qe.push(me[he+Ke]),Ae.push(Qe.value)))}return Promise.resolve(Ae.length>0&&H.mutate({trans:y,type:"add",values:Ae}).then(function(rt){for(var Je in rt.failures)qe.splice(parseInt(Je),1);Ee(Ae.length,rt)})).then(function(rt){return ke.length>0&&H.mutate({trans:y,type:"put",keys:Re,values:ke}).then(function(Je){return Ee(ke.length,Je)})}).then(function(){return qe.length>0&&H.mutate({trans:y,type:"delete",keys:qe}).then(function(rt){return Ee(qe.length,rt)})}).then(function(){return me.length>he+ee&&de(he+we)})})};return de(0).then(function(){if(re.length>0)throw new Ce("Error modifying one or more objects",re,oe,_e);return me.length})})})},t.prototype.delete=function(){var e=this._ctx,r=e.range;return yn(e)&&(e.isPrimKey&&!Hr||3===r.type)?this._write(function(c){var k=r;return e.table.core.count({trans:c,query:{index:e.table.core.schema.primaryKey,range:k}}).then(function(A){return e.table.core.mutate({trans:c,type:"deleteRange",range:k}).then(function(D){var H=D.failures,ne=D.numFailures;if(ne)throw new Ce("Could not delete some values",Object.keys(H).map(function(we){return H[we]}),A-ne);return A-ne})})}):this.modify(function(c,y){return y.value=null})},t}();function Gr(t,e){return t<e?-1:t===e?0:1}function $r(t,e){return t>e?-1:t===e?0:1}function yt(t,e,r){var c=t instanceof wr?new t.Collection(t):t;return c._ctx.error=r?new r(e):new TypeError(e),c}function Zt(t){return new t.Collection(t,function(){return xr("")}).limit(0)}function Xr(t,e,r,c,y,k){for(var A=Math.min(t.length,c.length),D=-1,H=0;H<A;++H){var q=e[H];if(q!==c[H])return y(t[H],r[H])<0?t.substr(0,H)+r[H]+r.substr(H+1):y(t[H],c[H])<0?t.substr(0,H)+c[H]+r.substr(H+1):D>=0?t.substr(0,D)+e[D]+r.substr(D+1):null;y(t[H],q)<0&&(D=H)}return A<c.length&&"next"===k?t+r.substr(t.length):A<t.length&&"prev"===k?t.substr(0,r.length):D<0?null:t.substr(0,D)+c[D]+r.substr(D+1)}function Fn(t,e,r,c){var y,k,A,D,H,q,Z,ne=r.length;if(!r.every(function(oe){return"string"==typeof oe}))return yt(t,mr);function we(oe){y=function(t){return"next"===t?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(oe),k=function(t){return"next"===t?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(oe),A="next"===oe?Gr:$r;var _e=r.map(function(Ee){return{lower:k(Ee),upper:y(Ee)}}).sort(function(Ee,me){return A(Ee.lower,me.lower)});D=_e.map(function(Ee){return Ee.upper}),H=_e.map(function(Ee){return Ee.lower}),q=oe,Z="next"===oe?"":c}we("next");var ye=new t.Collection(t,function(){return Ot(D[0],H[ne-1]+c)});ye._ondirectionchange=function(oe){we(oe)};var re=0;return ye._addAlgorithm(function(oe,_e,Ee){var me=oe.key;if("string"!=typeof me)return!1;var de=k(me);if(e(de,H,re))return!0;for(var he=null,ee=re;ee<ne;++ee){var Se=Xr(me,de,D[ee],H[ee],A,q);null===Se&&null===he?re=ee+1:(null===he||A(he,Se)>0)&&(he=Se)}return _e(null!==he?function(){oe.continue(he+Z)}:Ee),!1}),ye}function Ot(t,e,r,c){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:c}}function xr(t){return{type:1,lower:t,upper:t}}var wr=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),t.prototype.between=function(e,r,c,y){c=!1!==c,y=!0===y;try{return this._cmp(e,r)>0||0===this._cmp(e,r)&&(c||y)&&(!c||!y)?Zt(this):new this.Collection(this,function(){return Ot(e,r,!c,!y)})}catch(k){return yt(this,Tt)}},t.prototype.equals=function(e){return null==e?yt(this,Tt):new this.Collection(this,function(){return xr(e)})},t.prototype.above=function(e){return null==e?yt(this,Tt):new this.Collection(this,function(){return Ot(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return null==e?yt(this,Tt):new this.Collection(this,function(){return Ot(e,void 0,!1)})},t.prototype.below=function(e){return null==e?yt(this,Tt):new this.Collection(this,function(){return Ot(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return null==e?yt(this,Tt):new this.Collection(this,function(){return Ot(void 0,e)})},t.prototype.startsWith=function(e){return"string"!=typeof e?yt(this,mr):this.between(e,e+Jt,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Fn(this,function(r,c){return 0===r.indexOf(c[0])},[e],Jt)},t.prototype.equalsIgnoreCase=function(e){return Fn(this,function(r,c){return r===c[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Te.apply(Pe,arguments);return 0===e.length?Zt(this):Fn(this,function(r,c){return-1!==c.indexOf(r)},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Te.apply(Pe,arguments);return 0===e.length?Zt(this):Fn(this,function(r,c){return c.some(function(y){return 0===r.indexOf(y)})},e,Jt)},t.prototype.anyOf=function(){var e=this,r=Te.apply(Pe,arguments),c=this._cmp;try{r.sort(c)}catch(A){return yt(this,Tt)}if(0===r.length)return Zt(this);var y=new this.Collection(this,function(){return Ot(r[0],r[r.length-1])});y._ondirectionchange=function(A){r.sort(c="next"===A?e._ascending:e._descending)};var k=0;return y._addAlgorithm(function(A,D,H){for(var q=A.key;c(q,r[k])>0;)if(++k===r.length)return D(H),!1;return 0===c(q,r[k])||(D(function(){A.continue(r[k])}),!1)}),y},t.prototype.notEqual=function(e){return this.inAnyRange([[Vn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Te.apply(Pe,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(c){return yt(this,Tt)}var r=e.reduce(function(c,y){return c?c.concat([[c[c.length-1][1],y]]):[[Vn,y]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,r){var c=this,y=this._cmp,k=this._ascending,A=this._descending,D=this._min,H=this._max;if(0===e.length)return Zt(this);if(!e.every(function(ee){return void 0!==ee[0]&&void 0!==ee[1]&&k(ee[0],ee[1])<=0}))return yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var re,q=!r||!1!==r.includeLowers,Z=r&&!0===r.includeUppers,we=k;function ye(ee,Se){return we(ee[0],Se[0])}try{(re=e.reduce(function(ee,Se){for(var Ae=0,ke=ee.length;Ae<ke;++Ae){var Re=ee[Ae];if(y(Se[0],Re[1])<0&&y(Se[1],Re[0])>0){Re[0]=D(Re[0],Se[0]),Re[1]=H(Re[1],Se[1]);break}}return Ae===ke&&ee.push(Se),ee},[])).sort(ye)}catch(ee){return yt(this,Tt)}var oe=0,_e=Z?function(ee){return k(ee,re[oe][1])>0}:function(ee){return k(ee,re[oe][1])>=0},Ee=q?function(ee){return A(ee,re[oe][0])>0}:function(ee){return A(ee,re[oe][0])>=0},de=_e,he=new this.Collection(this,function(){return Ot(re[0][0],re[re.length-1][1],!q,!Z)});return he._ondirectionchange=function(ee){"next"===ee?(de=_e,we=k):(de=Ee,we=A),re.sort(ye)},he._addAlgorithm(function(ee,Se,Ae){for(var ke=ee.key;de(ke);)if(++oe===re.length)return Se(Ae),!1;return!!function(ee){return!_e(ee)&&!Ee(ee)}(ke)||(0===c._cmp(ke,re[oe][1])||0===c._cmp(ke,re[oe][0])||Se(function(){ee.continue(we===k?re[oe][0]:re[oe][1])}),!1)}),he},t.prototype.startsWithAnyOf=function(){var e=Te.apply(Pe,arguments);return e.every(function(r){return"string"==typeof r})?0===e.length?Zt(this):this.inAnyRange(e.map(function(r){return[r,r+Jt]})):yt(this,"startsWithAnyOf() only works with strings")},t}();function Er(t){return 1===t.length?t[0]:t}function Qn(t){try{return t.only([[]]),[[]]}catch(e){return Jt}}function kt(t){return Ze(function(e){return _n(e),t(e.target.error),!1})}function _n(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Jr=function(){function t(){}return t.prototype._lock=function(){return Q(!Ie.global),++this._reculock,1===this._reculock&&!Ie.global&&(Ie.lockOwnerFor=this),this},t.prototype._unlock=function(){if(Q(!Ie.global),0==--this._reculock)for(Ie.global||(Ie.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{mn(e[1],e[0])}catch(r){}}return this},t.prototype._locked=function(){return this._reculock&&Ie.lockOwnerFor!==this},t.prototype.create=function(e){var r=this;if(!this.mode)return this;var c=this.db.idbdb,y=this.db._state.dbOpenError;if(Q(!this.idbtrans),!e&&!c)switch(y&&y.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(y);case"MissingAPIError":throw new fe.MissingAPI(y.message,y);default:throw new fe.OpenFailed(y)}if(!this.active)throw new fe.TransactionInactive;return Q(null===this._completion._state),(e=this.idbtrans=e||c.transaction(Er(this.storeNames),this.mode)).onerror=Ze(function(k){_n(k),r._reject(e.error)}),e.onabort=Ze(function(k){_n(k),r.active&&r._reject(new fe.Abort(e.error)),r.active=!1,r.on("abort").fire(k)}),e.oncomplete=Ze(function(){r.active=!1,r._resolve()}),this},t.prototype._promise=function(e,r,c){var y=this;if("readwrite"===e&&"readwrite"!==this.mode)return dt(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new fe.TransactionInactive);if(this._locked())return new ge(function(A,D){y._blockedFuncs.push([function(){y._promise(e,r,c).then(A,D)},Ie])});if(c)return jt(function(){var A=new ge(function(D,H){y._lock();var q=r(D,H,y);q&&q.then&&q.then(D,H)});return A.finally(function(){return y._unlock()}),A._lib=!0,A});var k=new ge(function(A,D){var H=r(A,D,y);H&&H.then&&H.then(A,D)});return k._lib=!0,k},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var r=this._root(),c=ge.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return c});else{r._waitingFor=c,r._waitingQueue=[];var y=r.idbtrans.objectStore(r.storeNames[0]);!function A(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(y.get(-1/0).onsuccess=A)}()}var k=r._waitingFor;return new ge(function(A,D){c.then(function(H){return r._waitingQueue.push(Ze(A.bind(null,H)))},function(H){return r._waitingQueue.push(Ze(D.bind(null,H)))}).finally(function(){r._waitingFor===k&&(r._waitingFor=null)})})},t.prototype.abort=function(){this.active&&this._reject(new fe.Abort),this.active=!1},t.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(b(r,e))return r[e];var c=this.schema[e];if(!c)throw new fe.NotFound("Table "+e+" not part of transaction");var y=new this.db.Table(e,c,this);return y.core=this.db.core.table(e),r[e]=y,y},t}();function Jn(t,e,r,c,y,k,A){return{name:t,keyPath:e,unique:r,multi:c,auto:y,compound:k,src:(r&&!A?"&":"")+(c?"*":"")+(y?"++":"")+br(e)}}function br(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Sr(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:ae(r,function(c){return[c.name,c]})}}function Zn(t){return null==t?function(){}:"string"==typeof t?function(t){return 1===t.split(".").length?function(r){return r[t]}:function(r){return B(r,t)}}(t):function(e){return B(e,t)}}function kr(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}function Tr(t){return[].slice.call(t)}var ni=0;function xn(t){return null==t?":id":"string"==typeof t?t:"["+t.join("+")+"]"}function ri(t,e,r,c){var y=e.cmp.bind(e);function A(ye){if(3===ye.type)return null;if(4===ye.type)throw new Error("Cannot convert never type to IDBKeyRange");var re=ye.lower,oe=ye.upper,_e=ye.lowerOpen,Ee=ye.upperOpen;return void 0===re?void 0===oe?null:r.upperBound(oe,!!Ee):void 0===oe?r.lowerBound(re,!!_e):r.bound(re,oe,!!_e,!!Ee)}var ye,re,oe,H=(re=c,oe=Tr((ye=t).objectStoreNames),{schema:{name:ye.name,tables:oe.map(function(_e){return re.objectStore(_e)}).map(function(_e){var Ee=_e.keyPath,me=_e.autoIncrement,de=h(Ee),ee={},Se={name:_e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==Ee,compound:de,keyPath:Ee,autoIncrement:me,unique:!0,extractKey:Zn(Ee)},indexes:Tr(_e.indexNames).map(function(Ae){return _e.index(Ae)}).map(function(Ae){var Re=Ae.unique,qe=Ae.multiEntry,Ke=Ae.keyPath,Qe={name:Ae.name,compound:h(Ke),keyPath:Ke,unique:Re,multiEntry:qe,extractKey:Zn(Ke)};return ee[xn(Ke)]=Qe,Qe}),getIndexByKeyPath:function(Ae){return ee[xn(Ae)]}};return ee[":id"]=Se.primaryKey,null!=Ee&&(ee[xn(Ee)]=Se.primaryKey),Se})},hasGetAll:oe.length>0&&"getAll"in re.objectStore(oe[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),q=H.schema,Z=H.hasGetAll,ne=q.tables.map(function(ye){return function(ye){var me,re=ye.name;return{name:re,schema:ye,mutate:function(me){var de=me.trans,he=me.type,ee=me.keys,Se=me.values,Ae=me.range,ke=me.wantResults;return new Promise(function(Re,qe){Re=Ze(Re);var Ke=de.objectStore(re),ft=null==Ke.keyPath,Qe="put"===he||"add"===he;if(!Qe&&"delete"!==he&&"deleteRange"!==he)throw new Error("Invalid operation type: "+he);var rt=(ee||Se||{length:1}).length;if(ee&&Se&&ee.length!==Se.length)throw new Error("Given keys array must have same length as given values array.");if(0===rt)return Re({numFailures:0,failures:{},results:[],lastResult:void 0});var it,Je=ke&&o(ee||kr(ye.primaryKey,{type:he,keys:ee,values:Se})),Ue=[],Et=0,mt=function(ut){++Et,_n(ut),Je&&(Je[ut.target._reqno]=void 0),Ue[ut.target._reqno]=ut.target.error},en=function(ut){var Ut=ut.target;Je[Ut._reqno]=Ut.result};if("deleteRange"===he){if(4===Ae.type)return Re({numFailures:Et,failures:Ue,results:Je,lastResult:void 0});it=3===Ae.type?Ke.clear():Ke.delete(A(Ae))}else{var It=Qe?ft?[Se,ee]:[Se,null]:[ee,null],Sn=It[0],Bt=It[1];if(Qe)for(var ht=0;ht<rt;++ht)(it=Bt&&void 0!==Bt[ht]?Ke[he](Sn[ht],Bt[ht]):Ke[he](Sn[ht]))._reqno=ht,Je&&void 0===Je[ht]&&(it.onsuccess=en),it.onerror=mt;else for(ht=0;ht<rt;++ht)(it=Ke[he](Sn[ht]))._reqno=ht,it.onerror=mt}var tn=function(ut){var Ut=ut.target.result;Je&&(Je[rt-1]=Ut),Re({numFailures:Et,failures:Ue,results:Je,lastResult:Ut})};it.onerror=function(ut){mt(ut),tn(ut)},it.onsuccess=tn})},getMany:function(me){var de=me.trans,he=me.keys;return new Promise(function(ee,Se){ee=Ze(ee);for(var Qe,Ae=de.objectStore(re),ke=he.length,Re=new Array(ke),qe=0,Ke=0,rt=function(Et){var mt=Et.target;Re[mt._pos]=mt.result,++Ke===qe&&ee(Re)},Je=kt(Se),it=0;it<ke;++it)null!=he[it]&&((Qe=Ae.get(he[it]))._pos=it,Qe.onsuccess=rt,Qe.onerror=Je,++qe);0===qe&&ee(Re)})},get:function(me){var de=me.trans,he=me.key;return new Promise(function(ee,Se){ee=Ze(ee);var ke=de.objectStore(re).get(he);ke.onsuccess=function(Re){return ee(Re.target.result)},ke.onerror=kt(Se)})},query:(me=Z,function(de){return new Promise(function(he,ee){he=Ze(he);var Ae=de.values,ke=de.limit,Re=de.query,qe=ke===1/0?void 0:ke,Ke=Re.index,ft=Re.range,Qe=de.trans.objectStore(re),rt=Ke.isPrimaryKey?Qe:Qe.index(Ke.name),Je=A(ft);if(0===ke)return he({result:[]});if(me){var it=Ae?rt.getAll(Je,qe):rt.getAllKeys(Je,qe);it.onsuccess=function(en){return he({result:en.target.result})},it.onerror=kt(ee)}else{var Ue=0,Et=Ae||!("openKeyCursor"in rt)?rt.openCursor(Je):rt.openKeyCursor(Je),mt=[];Et.onsuccess=function(en){var It=Et.result;return It?(mt.push(Ae?It.value:It.primaryKey),++Ue===ke?he({result:mt}):void It.continue()):he({result:mt})},Et.onerror=kt(ee)}})}),openCursor:function(me){var de=me.trans,he=me.values,ee=me.query,Se=me.reverse,Ae=me.unique;return new Promise(function(ke,Re){ke=Ze(ke);var qe=ee.index,Ke=ee.range,ft=de.objectStore(re),Qe=qe.isPrimaryKey?ft:ft.index(qe.name),rt=Se?Ae?"prevunique":"prev":Ae?"nextunique":"next",Je=he||!("openKeyCursor"in Qe)?Qe.openCursor(A(Ke),rt):Qe.openKeyCursor(A(Ke),rt);Je.onerror=kt(Re),Je.onsuccess=Ze(function(it){var Ue=Je.result;if(Ue){Ue.___id=++ni,Ue.done=!1;var Et=Ue.continue.bind(Ue),mt=Ue.continuePrimaryKey;mt&&(mt=mt.bind(Ue));var en=Ue.advance.bind(Ue),Sn=function(){throw new Error("Cursor not stopped")};Ue.trans=de,Ue.stop=Ue.continue=Ue.continuePrimaryKey=Ue.advance=function(){throw new Error("Cursor not started")},Ue.fail=Ze(Re),Ue.next=function(){var Bt=this,ht=1;return this.start(function(){return ht--?Bt.continue():Bt.stop()}).then(function(){return Bt})},Ue.start=function(Bt){var ht=new Promise(function(ut,Ut){ut=Ze(ut),Je.onerror=kt(Ut),Ue.fail=Ut,Ue.stop=function(Oi){Ue.stop=Ue.continue=Ue.continuePrimaryKey=Ue.advance=Sn,ut(Oi)}}),tn=function(){if(Je.result)try{Bt()}catch(ut){Ue.fail(ut)}else Ue.done=!0,Ue.start=function(){throw new Error("Cursor behind last entry")},Ue.stop()};return Je.onsuccess=Ze(function(ut){Je.onsuccess=tn,tn()}),Ue.continue=Et,Ue.continuePrimaryKey=mt,Ue.advance=en,tn(),ht},ke(Ue)}else ke(null)},Re)})},count:function(me){var de=me.query,he=me.trans,ee=de.index,Se=de.range;return new Promise(function(Ae,ke){var Re=he.objectStore(re),qe=ee.isPrimaryKey?Re:Re.index(ee.name),Ke=A(Se),ft=Ke?qe.count(Ke):qe.count();ft.onsuccess=Ze(function(Qe){return Ae(Qe.target.result)}),ft.onerror=kt(ke)})}}}(ye)}),we={};return ne.forEach(function(ye){return we[ye.name]=ye}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(ye){if(!we[ye])throw new Error("Table '"+ye+"' not found");return we[ye]},cmp:y,MIN_KEY:-1/0,MAX_KEY:Qn(r),schema:q}}function er(t,e){var c=function(t,e,r,c){return{dbcore:function(t,e){return e.reduce(function(r,c){var y=c.create;return u(u({},r),y(r))},t)}(ri(e,r.indexedDB,r.IDBKeyRange,c),t.dbcore)}}(t._middlewares,e.db,t._deps,e);t.core=c.dbcore,t.tables.forEach(function(y){var k=y.name;t.core.schema.tables.some(function(A){return A.name===k})&&(y.core=t.core.table(k),t[k]instanceof t.Table&&(t[k].core=y.core))})}function Hn(t,e,r,c){r.forEach(function(y){var k=c[y];e.forEach(function(A){var D=L(A,y);(!D||"value"in D&&void 0===D.value)&&(A===t.Transaction.prototype||A instanceof t.Transaction?m(A,y,{get:function(){return this.table(y)},set:function(H){l(this,y,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):A[y]=new t.Table(y,k))})})}function tr(t,e){e.forEach(function(r){for(var c in r)r[c]instanceof t.Table&&delete r[c]})}function oi(t,e){return t._cfg.version-e._cfg.version}function Ir(t,e){var c,r={del:[],add:[],change:[]};for(c in t)e[c]||r.del.push(c);for(c in e){var y=t[c],k=e[c];if(y){var A={name:c,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(y.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||y.primKey.auto!==k.primKey.auto&&!Gn)A.recreate=!0,r.change.push(A);else{var D=y.idxByName,H=k.idxByName,q=void 0;for(q in D)H[q]||A.del.push(q);for(q in H){var Z=D[q],ne=H[q];Z?Z.src!==ne.src&&A.change.push(ne):A.add.push(ne)}(A.del.length>0||A.add.length>0||A.change.length>0)&&r.change.push(A)}}else r.add.push([c,k])}return r}function nr(t,e,r,c){var y=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return c.forEach(function(k){return rr(y,k)}),y}function rr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ir(t,e,r){var c={};return O(e.objectStoreNames,0).forEach(function(k){for(var A=r.objectStore(k),D=A.keyPath,H=Jn(br(D),D||"",!1,!1,!!A.autoIncrement,D&&"string"!=typeof D,!0),q=[],Z=0;Z<A.indexNames.length;++Z){var ne=A.index(A.indexNames[Z]),we=Jn(ne.name,D=ne.keyPath,!!ne.unique,!!ne.multiEntry,!1,D&&"string"!=typeof D,!1);q.push(we)}c[k]=Sr(k,H,q)}),c}function sr(t,e,r){for(var c=r.db.objectStoreNames,y=0;y<c.length;++y){var k=c[y],A=r.objectStore(k);t._hasGetAll="getAll"in A;for(var D=0;D<A.indexNames.length;++D){var H=A.indexNames[D],q=A.index(H).keyPath,Z="string"==typeof q?q:"["+O(q).join("+")+"]";if(e[k]){var ne=e[k].idxByName[Z];ne&&(ne.name=H,delete e[k].idxByName[Z],e[k].idxByName[H]=ne)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&g.WorkerGlobalScope&&g instanceof g.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}var wn,pi=function(){function t(){}return t.prototype._parseStoresSpec=function(e,r){s(e).forEach(function(c){if(null!==e[c]){var y=function(t){return t.split(",").map(function(e,r){var c=(e=e.trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Jn(c,y||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),h(y),0===r)})}(e[c]),k=y.shift();if(k.multi)throw new fe.Schema("Primary key cannot be multi-valued");y.forEach(function(A){if(A.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),r[c]=Sr(c,k,y)}})},t.prototype.stores=function(e){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?T(this._cfg.storesSource,e):e;var y={},k={};return r._versions.forEach(function(A){T(y,A._cfg.storesSource),k=A._cfg.dbschema={},A._parseStoresSpec(y,k)}),r._dbSchema=k,tr(r,[r._allTables,r,r.Transaction.prototype]),Hn(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],s(k),k),r._storeNames=s(k),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},t}();function or(t){return jt(function(){return Ie.letThrough=!0,t()})}function yi(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?dt(e.dbOpenError):t});We&&(e.openCanceller._stackHolder=Ye()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var c=e.dbReadyResolve,y=null;return ge.race([e.openCanceller,new ge(function(k,A){if(!r)throw new fe.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var D=t.name,H=e.autoSchema?r.open(D):r.open(D,Math.round(10*t.verno));if(!H)throw new fe.MissingAPI("IndexedDB API not available");H.onerror=kt(A),H.onblocked=Ze(t._fireOnBlocked),H.onupgradeneeded=Ze(function(q){if(y=H.transaction,e.autoSchema&&!t._options.allowEmptyDB){H.onerror=_n,y.abort(),H.result.close();var Z=r.deleteDatabase(D);Z.onsuccess=Z.onerror=Ze(function(){A(new fe.NoSuchDatabase("Database "+D+" doesnt exist"))})}else{y.onerror=kt(A);var ne=q.oldVersion>Math.pow(2,62)?0:q.oldVersion;t.idbdb=H.result,function(t,e,r,c){var y=t._dbSchema,k=t._createTransaction("readwrite",t._storeNames,y);k.create(r),k._completion.catch(c);var A=k._reject.bind(k),D=Ie.transless||Ie;jt(function(){Ie.trans=k,Ie.transless=D,0===e?(s(y).forEach(function(H){nr(r,H,y[H].primKey,y[H].indexes)}),er(t,r),ge.follow(function(){return t.on.populate.fire(k)}).catch(A)):function(t,e,r,c){var y=[],k=t._versions,A=t._dbSchema=ir(0,t.idbdb,c),D=!1;return k.filter(function(Z){return Z._cfg.version>=e}).forEach(function(Z){y.push(function(){var ne=A,we=Z._cfg.dbschema;sr(t,ne,c),sr(t,we,c),A=t._dbSchema=we;var ye=Ir(ne,we);ye.add.forEach(function(de){nr(c,de[0],de[1].primKey,de[1].indexes)}),ye.change.forEach(function(de){if(de.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var he=c.objectStore(de.name);de.add.forEach(function(ee){return rr(he,ee)}),de.change.forEach(function(ee){he.deleteIndex(ee.name),rr(he,ee)}),de.del.forEach(function(ee){return he.deleteIndex(ee)})});var re=Z._cfg.contentUpgrade;if(re&&Z._cfg.version>e){er(t,c),r._memoizedTables={},D=!0;var oe=Y(we);ye.del.forEach(function(de){oe[de]=ne[de]}),tr(t,[t.Transaction.prototype]),Hn(t,[t.Transaction.prototype],s(oe),oe),r.schema=oe;var _e=Fe(re);_e&&pn();var Ee,me=ge.follow(function(){if((Ee=re(r))&&_e){var de=Wt.bind(null,null);Ee.then(de,de)}});return Ee&&"function"==typeof Ee.then?ge.resolve(Ee):me.then(function(){return Ee})}}),y.push(function(ne){D&&Fr||function(t,e){for(var r=0;r<e.db.objectStoreNames.length;++r){var c=e.db.objectStoreNames[r];null==t[c]&&e.db.deleteObjectStore(c)}}(Z._cfg.dbschema,ne),tr(t,[t.Transaction.prototype]),Hn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema})}),function q(){return y.length?ge.resolve(y.shift()(r.idbtrans)).then(q):ge.resolve()}().then(function(){!function(t,e){s(t).forEach(function(r){e.db.objectStoreNames.contains(r)||nr(e,r,t[r].primKey,t[r].indexes)})}(A,c)})}(t,e,k,r).catch(A)})}(t,ne/10,y,A)}},A),H.onsuccess=Ze(function(){y=null;var q=t.idbdb=H.result,Z=O(q.objectStoreNames);if(Z.length>0)try{var ne=q.transaction(Er(Z),"readonly");e.autoSchema?function(t,e,r){t.verno=e.version/10;var c=t._dbSchema=ir(0,e,r);t._storeNames=O(e.objectStoreNames,0),Hn(t,[t._allTables],s(c),c)}(t,q,ne):(sr(t,t._dbSchema,ne),function(t,e){var c=Ir(ir(0,t.idbdb,e),t._dbSchema);return!(c.add.length||c.change.some(function(y){return y.add.length||y.change.length}))}(t,ne)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),er(t,ne)}catch(we){}gn.push(t),q.onversionchange=Ze(function(we){e.vcFired=!0,t.on("versionchange").fire(we)}),wn.add(D),k()},A)})]).then(function(){return e.onReadyBeingFired=[],ge.resolve(or(t.on.ready.fire)).then(function k(){if(e.onReadyBeingFired.length>0){var A=e.onReadyBeingFired.reduce(kn,Le);return e.onReadyBeingFired=[],ge.resolve(or(A)).then(k)}})}).finally(function(){e.onReadyBeingFired=null}).then(function(){return e.isBeingOpened=!1,t}).catch(function(k){try{y&&y.abort()}catch(A){}return e.isBeingOpened=!1,t.close(),e.dbOpenError=k,dt(e.dbOpenError)}).finally(function(){e.openComplete=!0,c()})}function ar(t){var e=function(A){return t.next(A)},c=k(e),y=k(function(A){return t.throw(A)});function k(A){return function(D){var H=A(D),q=H.value;return H.done?q:q&&"function"==typeof q.then?q.then(c,y):h(q)?Promise.all(q).then(c,y):c(q)}}return k(e)()}function _i(t,e,r){var c=arguments.length;if(c<2)throw new fe.InvalidArgument("Too few arguments");for(var y=new Array(c-1);--c;)y[c-1]=arguments[c];r=y.pop();var k=G(y);return[t,k,r]}function xi(t,e,r,c,y){return ge.resolve().then(function(){var k=Ie.transless||Ie,A=t._createTransaction(e,r,t._dbSchema,c),D={trans:A,transless:k};c?A.idbtrans=c.idbtrans:A.create();var H=Fe(y);H&&pn();var q,Z=ge.follow(function(){if(q=y.call(A,A))if(H){var ne=Wt.bind(null,null);q.then(ne,ne)}else"function"==typeof q.next&&"function"==typeof q.throw&&(q=ar(q))},D);return(q&&"function"==typeof q.then?ge.resolve(q).then(function(ne){return A.active?ne:dt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return q})).then(function(ne){return c&&A._resolve(),A._completion.then(function(){return ne})}).catch(function(ne){return A._reject(ne),dt(ne)})})}function En(t,e,r){for(var c=h(t)?t.slice():[t],y=0;y<r;++y)c.push(e);return c}var Ei={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return u(u({},t),{table:function(e){var r=t.table(e),c=r.schema,y={},k=[];function A(oe,_e,Ee){var me=xn(oe),de=y[me]=y[me]||[],he=null==oe?0:"string"==typeof oe?1:oe.length,ee=_e>0,Se=u(u({},Ee),{isVirtual:ee,isPrimaryKey:!ee&&Ee.isPrimaryKey,keyTail:_e,keyLength:he,extractKey:Zn(oe),unique:!ee&&Ee.unique});return de.push(Se),Se.isPrimaryKey||k.push(Se),he>1&&A(2===he?oe[0]:oe.slice(0,he-1),_e+1,Ee),de.sort(function(ke,Re){return ke.keyTail-Re.keyTail}),Se}var D=A(c.primaryKey.keyPath,0,c.primaryKey);y[":id"]=[D];for(var H=0,q=c.indexes;H<q.length;H++){var Z=q[H];A(Z.keyPath,0,Z)}function we(oe,_e){return{type:1===oe.type?2:oe.type,lower:En(oe.lower,oe.lowerOpen?t.MAX_KEY:t.MIN_KEY,_e),lowerOpen:!0,upper:En(oe.upper,oe.upperOpen?t.MIN_KEY:t.MAX_KEY,_e),upperOpen:!0}}function ye(oe){var _e=oe.query.index;return _e.isVirtual?u(u({},oe),{query:{index:_e,range:we(oe.query.range,_e.keyTail)}}):oe}return u(u({},r),{schema:u(u({},c),{primaryKey:D,indexes:k,getIndexByKeyPath:function(oe){var _e=y[xn(oe)];return _e&&_e[0]}}),count:function(oe){return r.count(ye(oe))},query:function(oe){return r.query(ye(oe))},openCursor:function(oe){var _e=oe.query.index,Ee=_e.keyTail,de=_e.keyLength;return _e.isVirtual?r.openCursor(ye(oe)).then(function(ee){return ee&&function(ee){return Object.create(ee,{continue:{value:function(ke){null!=ke?ee.continue(En(ke,oe.reverse?t.MAX_KEY:t.MIN_KEY,Ee)):oe.unique?ee.continue(En(ee.key,oe.reverse?t.MIN_KEY:t.MAX_KEY,Ee)):ee.continue()}},continuePrimaryKey:{value:function(ke,Re){ee.continuePrimaryKey(En(ke,t.MAX_KEY,Ee),Re)}},key:{get:function(){var ke=ee.key;return 1===de?ke[0]:ke.slice(0,de)}},value:{get:function(){return ee.value}}})}(ee)}):r.openCursor(oe)}})}})}},bi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return u(u({},t),{table:function(e){var r=t.table(e),c=r.schema.primaryKey;return u(u({},r),{mutate:function(k){var A=Ie.trans,D=A.table(e).hook,H=D.deleting,q=D.creating,Z=D.updating;switch(k.type){case"add":if(q.fire===Le)break;return A._promise("readwrite",function(){return ne(k)},!0);case"put":if(q.fire===Le&&Z.fire===Le)break;return A._promise("readwrite",function(){return ne(k)},!0);case"delete":if(H.fire===Le)break;return A._promise("readwrite",function(){return ne(k)},!0);case"deleteRange":if(H.fire===Le)break;return A._promise("readwrite",function(){return ye((re=k).trans,re.range,1e4);var re},!0)}return r.mutate(k);function ne(re){var oe=Ie.trans,_e=re.keys||kr(c,re);if(!_e)throw new Error("Keys missing");return"delete"!==(re="add"===re.type||"put"===re.type?u(u({},re),{keys:_e,wantResults:!0}):u({},re)).type&&(re.values=o(re.values)),re.keys&&(re.keys=o(re.keys)),function(t,e,r){return"add"===e.type?Promise.resolve(new Array(e.values.length)):t.getMany({trans:e.trans,keys:r})}(r,re,_e).then(function(Ee){var me=_e.map(function(de,he){var ee=Ee[he],Se={onerror:null,onsuccess:null};if("delete"===re.type)H.fire.call(Se,de,ee,oe);else if("add"===re.type||void 0===ee){var Ae=q.fire.call(Se,de,re.values[he],oe);null==de&&null!=Ae&&(re.keys[he]=de=Ae,c.outbound||j(re.values[he],c.keyPath,de))}else{var ke=De(ee,re.values[he]),Re=Z.fire.call(Se,ke,de,ee,oe);if(Re){var qe=re.values[he];Object.keys(Re).forEach(function(Ke){b(qe,Ke)?qe[Ke]=Re[Ke]:j(qe,Ke,Re[Ke])})}}return Se});return r.mutate(re).then(function(de){for(var he=de.failures,ee=de.results,Se=de.numFailures,Ae=de.lastResult,ke=0;ke<_e.length;++ke){var Re=ee?ee[ke]:_e[ke],qe=me[ke];null==Re?qe.onerror&&qe.onerror(he[ke]):qe.onsuccess&&qe.onsuccess("put"===re.type&&Ee[ke]?re.values[ke]:Re)}return{failures:he,results:ee,numFailures:Se,lastResult:Ae}}).catch(function(de){return me.forEach(function(he){return he.onerror&&he.onerror(de)}),Promise.reject(de)})})}function ye(re,oe,_e){return r.query({trans:re,values:!1,query:{index:c,range:oe},limit:_e}).then(function(Ee){var me=Ee.result;return ne({type:"delete",keys:me,trans:re}).then(function(de){return de.numFailures>0?Promise.reject(de.failures[0]):me.length<_e?{failures:[],numFailures:0,lastResult:void 0}:ye(re,u(u({},oe),{lower:me[me.length-1],lowerOpen:!0}),_e)})})}}})}})}},bn=function(){function t(e,r){var c=this;this._middlewares={},this.verno=0;var y=t.dependencies;this._options=r=u({addons:t.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var k=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var A={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0};A.dbReadyPromise=new ge(function(D){A.dbReadyResolve=D}),A.openCanceller=new ge(function(D,H){A.cancelOpen=H}),this._state=A,this.name=e,this.on=Un(this,"populate","blocked","versionchange",{ready:[kn,Le]}),this.on.ready.subscribe=W(this.on.ready.subscribe,function(D){return function(H,q){t.vip(function(){var Z=c._state;if(Z.openComplete)Z.dbOpenError||ge.resolve().then(H),q&&D(H);else if(Z.onReadyBeingFired)Z.onReadyBeingFired.push(H),q&&D(H);else{D(H);var ne=c;q||D(function we(){ne.on.ready.unsubscribe(H),ne.on.ready.unsubscribe(we)})}})}}),this.Collection=function(t){return vn(Kr.prototype,function(r,c){this.db=t;var y=vr,k=null;if(c)try{y=c()}catch(q){k=q}var A=r._ctx,D=A.table,H=D.hook.reading.fire;this._ctx={table:D,index:A.index,isPrimKey:!A.index||D.schema.primKey.keyPath&&A.index===D.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:A.or,valueMapper:H!==at?H:null}})}(this),this.Table=function(t){return vn(jr.prototype,function(r,c,y){this.db=t,this._tx=y,this.name=r,this.schema=c,this.hook=t._allTables[r]?t._allTables[r].hook:Un(null,{creating:[At,Le],reading:[xt,at],updating:[jn,Le],deleting:[Kt,Le]})})}(this),this.Transaction=function(t){return vn(Jr.prototype,function(r,c,y,k){var A=this;this.db=t,this.mode=r,this.storeNames=c,this.schema=y,this.idbtrans=null,this.on=Un(this,"complete","error","abort"),this.parent=k||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ge(function(D,H){A._resolve=D,A._reject=H}),this._completion.then(function(){A.active=!1,A.on.complete.fire()},function(D){var H=A.active;return A.active=!1,A.on.error.fire(D),A.parent?A.parent._reject(D):H&&A.idbtrans&&A.idbtrans.abort(),dt(D)})})}(this),this.Version=function(t){return vn(pi.prototype,function(r){this.db=t,this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(t){return vn(wr.prototype,function(r,c,y){this.db=t,this._ctx={table:r,index:":id"===c?null:c,or:y};var k=t._deps.indexedDB;if(!k)throw new fe.MissingAPI("indexedDB API missing");this._cmp=this._ascending=k.cmp.bind(k),this._descending=function(A,D){return k.cmp(D,A)},this._max=function(A,D){return k.cmp(A,D)>0?A:D},this._min=function(A,D){return k.cmp(A,D)<0?A:D},this._IDBKeyRange=t._deps.IDBKeyRange})}(this),this.on("versionchange",function(D){D.newVersion>0?console.warn("Another connection wants to upgrade database '"+c.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+c.name+"'. Closing db now to resume the delete request."),c.close()}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('"+c.name+"') was blocked"):console.warn("Upgrade '"+c.name+"' blocked by other connection holding version "+D.oldVersion/10)}),this._maxKey=Qn(r.IDBKeyRange),this._createTransaction=function(D,H,q,Z){return new c.Transaction(D,H,q,Z)},this._fireOnBlocked=function(D){c.on("blocked").fire(D),gn.filter(function(H){return H.name===c.name&&H!==c&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(D)})},this.use(Ei),this.use(bi),k.forEach(function(D){return D(c)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new fe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,c=r.filter(function(y){return y._cfg.version===e})[0];return c||(c=new this.Version(e),r.push(c),r.sort(oi),c.stores({}),this._state.autoSchema=!1,c)},t.prototype._whenReady=function(e){var r=this;return this._state.openComplete||Ie.letThrough?e():new ge(function(c,y){if(!r._state.isBeingOpened){if(!r._options.autoOpen)return void y(new fe.DatabaseClosed);r.open().catch(Le)}r._state.dbReadyPromise.then(c,y)}).then(e)},t.prototype.use=function(e){var r=e.stack,c=e.create,y=e.level,k=e.name;k&&this.unuse({stack:r,name:k});var A=this._middlewares[r]||(this._middlewares[r]=[]);return A.push({stack:r,create:c,level:null==y?10:y,name:k}),A.sort(function(D,H){return D.level-H.level}),this},t.prototype.unuse=function(e){var r=e.stack,c=e.name,y=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(k){return y?k.create!==y:!!c&&k.name!==c})),this},t.prototype.open=function(){return yi(this)},t.prototype.close=function(){var e=gn.indexOf(this),r=this._state;if(e>=0&&gn.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(c){}this.idbdb=null}this._options.autoOpen=!1,r.dbOpenError=new fe.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError),r.dbReadyPromise=new ge(function(c){r.dbReadyResolve=c}),r.openCanceller=new ge(function(c,y){r.cancelOpen=y})},t.prototype.delete=function(){var e=this,r=arguments.length>0,c=this._state;return new ge(function(y,k){var A=function(){e.close();var D=e._deps.indexedDB.deleteDatabase(e.name);D.onsuccess=Ze(function(){wn.remove(e.name),y()}),D.onerror=kt(k),D.onblocked=e._fireOnBlocked};if(r)throw new fe.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(A):A()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!0,configurable:!0}),t.prototype.transaction=function(){var e=_i.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,r,c){var y=this,k=Ie.trans;(!k||k.db!==this||-1!==e.indexOf("!"))&&(k=null);var D,H,A=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(H=r.map(function(Z){var ne=Z instanceof y.Table?Z.name:Z;if("string"!=typeof ne)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ne}),"r"==e||e===$n)D=$n;else{if("rw"!=e&&e!=qn)throw new fe.InvalidArgument("Invalid transaction mode: "+e);D=qn}if(k){if(k.mode===$n&&D===qn){if(!A)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&H.forEach(function(Z){if(k&&-1===k.storeNames.indexOf(Z)){if(!A)throw new fe.SubTransaction("Table "+Z+" not included in parent transaction.");k=null}}),A&&k&&!k.active&&(k=null)}}catch(Z){return k?k._promise(null,function(ne,we){we(Z)}):dt(Z)}var q=xi.bind(null,this,D,H,k,c);return k?k._promise(D,q,"lock"):Ie.trans?mn(Ie.transless,function(){return y._whenReady(q)}):this._whenReady(q)},t.prototype.table=function(e){if(!b(this._allTables,e))throw new fe.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Dt=bn;C(Dt,u(u({},pt),{delete:function(t){return new Dt(t).delete()},exists:function(t){return new Dt(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){return wn?wn.getDatabaseNames().then(t):ge.resolve([])},defineClass:function(){return function(e){T(this,e)}},ignoreTransaction:function(t){return Ie.trans?mn(Ie.transless,t):t()},vip:or,async:function(t){return function(){try{var e=ar(t.apply(this,arguments));return e&&"function"==typeof e.then?e:ge.resolve(e)}catch(r){return dt(r)}}},spawn:function(t,e,r){try{var c=ar(t.apply(r,e||[]));return c&&"function"==typeof c.then?c:ge.resolve(c)}catch(y){return dt(y)}},currentTransaction:{get:function(){return Ie.trans||null}},waitFor:function(t,e){var r=ge.resolve("function"==typeof t?Dt.ignoreTransaction(t):t).timeout(e||6e4);return Ie.trans?Ie.trans.waitFor(r):r},Promise:ge,debug:{get:function(){return We},set:function(t){st(t,"dexie"===t?function(){return!0}:gr)}},derive:U,extend:T,props:C,override:W,Events:Un,getByKeyPath:B,setByKeyPath:j,delByKeyPath:K,shallowClone:Y,deepClone:pe,getObjectDiff:De,asap:ie,minKey:Vn,addons:[],connections:gn,errnames:$e,dependencies:function(){try{return{indexedDB:g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,IDBKeyRange:g.IDBKeyRange||g.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"3.0.3",version:"3.0.3".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,2*r)}),default:Dt,Dexie:Dt})),Dt.maxKey=Qn(Dt.dependencies.IDBKeyRange),function(t){try{wn=function(t){var r,e=t&&"function"==typeof t.databases;if(!e){var c=new bn(On,{addons:[]});c.version(1).stores({dbnames:"name"}),r=c.table("dbnames")}return{getDatabaseNames:function(){return e?ge.resolve(t.databases()).then(function(y){return y.map(function(k){return k.name}).filter(function(k){return k!==On})}):r.toCollection().primaryKeys()},add:function(y){return!e&&y!==On&&r.put({name:y}).catch(Le)},remove:function(y){return!e&&y!==On&&r.delete(y).catch(Le)}}}(t)}catch(e){}}(bn.dependencies.indexedDB),ge.rejectionMapper=function(t,e){if(!t||t instanceof xe||t instanceof TypeError||t instanceof SyntaxError||!t.name||!He[t.name])return t;var r=new He[t.name](e||t.message,t);return"stack"in t&&m(r,"stack",{get:function(){return this.inner.stack}}),r},st(We,gr);const Br=bn;class Ar extends Br{constructor(e){super(e),this.version(1).stores({chunks:"id"})}}class Si extends Br{constructor(){super("webtorrent-expiration"),this.version(1).stores({databases:"name,expiration"})}}let ki=(()=>{class t extends p.EventEmitter{constructor(r,c){var y;if(super(),this.pendingPut=[],this.memoryChunks={},this.databaseName="webtorrent-chunks-",c||(c={}),(null===(y=c.torrent)||void 0===y?void 0:y.infoHash)?this.databaseName+=c.torrent.infoHash:this.databaseName+="-default",this.setMaxListeners(100),this.chunkLength=Number(r),!this.chunkLength)throw new Error("First argument must be a chunk length");this.length=Number(c.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1),this.db=new Ar(this.databaseName),this.expirationDB=new Si,this.runCleaner()}put(r,c,y){const k=r===this.lastChunkIndex;return k&&c.length!==this.lastChunkLength?this.nextTick(y,new Error("Last chunk length must be "+this.lastChunkLength)):k||c.length===this.chunkLength?(this.memoryChunks[r]=!0,this.pendingPut.push({id:r,buf:c,cb:y}),void(!this.putBulkTimeout&&(this.putBulkTimeout=setTimeout(()=>(0,a.mG)(this,void 0,void 0,function*(){const A=this.pendingPut;this.pendingPut=[],this.putBulkTimeout=void 0;try{yield this.db.transaction("rw",this.db.chunks,()=>this.db.chunks.bulkPut(A.map(D=>({id:D.id,buf:D.buf}))))}catch(D){console.log("Cannot bulk insert chunks. Store them in memory.",{err:D}),A.forEach(H=>{this.memoryChunks[H.id]=H.buf})}finally{A.forEach(D=>D.cb())}}),t.BUFFERING_PUT_MS)))):this.nextTick(y,new Error("Chunk length must be "+this.chunkLength))}get(r,c,y){if("function"==typeof c)return this.get(r,null,c);const k=this.memoryChunks[r];if(void 0===k){const A=new Error("Chunk not found");return A.notFound=!0,process.nextTick(()=>y(A))}if(!0!==k)return y(null,k);this.db.transaction("r",this.db.chunks,()=>(0,a.mG)(this,void 0,void 0,function*(){const A=yield this.db.chunks.get({id:r});if(void 0===A)return y(null,Buffer.alloc(0));const D=A.buf;if(!c)return this.nextTick(y,null,D);const H=c.offset||0;return y(null,D.slice(H,(c.length||D.length-H)+H))})).catch(A=>(console.error(A),y(A)))}close(r){return this.destroy(r)}destroy(r){return(0,a.mG)(this,void 0,void 0,function*(){try{return this.pendingPut&&(clearTimeout(this.putBulkTimeout),this.pendingPut=null),this.cleanerInterval&&(clearInterval(this.cleanerInterval),this.cleanerInterval=null),this.db&&(this.db.close(),yield this.dropDatabase(this.databaseName)),this.expirationDB&&(this.expirationDB.close(),this.expirationDB=null),r()}catch(c){return console.error("Cannot destroy peertube chunk store.",c),r(c)}})}runCleaner(){this.checkExpiration(),this.cleanerInterval=setInterval(()=>{this.checkExpiration()},t.CLEANER_INTERVAL_MS)}checkExpiration(){return(0,a.mG)(this,void 0,void 0,function*(){let r=[];try{yield this.expirationDB.transaction("rw",this.expirationDB.databases,()=>(0,a.mG)(this,void 0,void 0,function*(){yield this.expirationDB.databases.put({name:this.databaseName,expiration:(new Date).getTime()+t.CLEANER_EXPIRATION_MS});const c=(new Date).getTime();r=yield this.expirationDB.databases.where("expiration").below(c).toArray()}))}catch(c){console.error("Cannot update expiration of fetch expired databases.",c)}for(const c of r)yield this.dropDatabase(c.name)})}dropDatabase(r){return(0,a.mG)(this,void 0,void 0,function*(){const c=new Ar(r);console.log("Destroying IndexDB database %s.",r);try{yield c.delete(),yield this.expirationDB.transaction("rw",this.expirationDB.databases,()=>this.expirationDB.databases.where({name:r}).delete())}catch(y){console.error("Cannot delete %s.",r,y)}})}nextTick(r,c,y){process.nextTick(()=>r(c,y),void 0)}}return t.BUFFERING_PUT_MS=1e3,t.CLEANER_INTERVAL_MS=6e4,t.CLEANER_EXPIRATION_MS=3e5,t})();var Rr=d(49899);const Ti=d(77847),Ii=d(79283),Bi=[".m4a",".m4v",".mp4"];function Pr(t,e,r,c){return function(t){if(null==t)throw new Error("file cannot be null or undefined");if("string"!=typeof t.name)throw new Error("missing or invalid file.name property");if("function"!=typeof t.createReadStream)throw new Error("missing or invalid file.createReadStream property")}(t),function(t,e,r,c){const y=(0,Rr.extname)(t.name).toLowerCase();let k,D,A=0;try{D=Bi.includes(y)?(ne(),k.addEventListener("error",function ye(re){return k.removeEventListener("error",ye),c(re)}),k.addEventListener("loadstart",we),new Ii(t,k)):q()}catch(ye){return c(ye)}function q(ye=!1){const re=function(t,e=!1){const r=(0,Rr.extname)(t).toLowerCase();return".mp4"===r?'video/mp4; codecs="avc1.640029, mp4a.40.5"':".webm"===r?!0===e?'video/webm; codecs="vp9, opus"':'video/webm; codecs="vp8, vorbis"':void 0}(t.name,ye);ne(),k.addEventListener("error",function Ee(me){return k.removeEventListener("error",Ee),re.includes("vp8")?function(ye=!1){console.log(!0===ye?"Falling back to media source with VP9 enabled.":"Falling back to media source.."),q(ye)}(!0):c(me)}),k.addEventListener("loadstart",we);const oe=new Ti(k),_e=oe.createWriteStream(re);return t.createReadStream().pipe(_e),A&&(k.currentTime=A),oe}function ne(){void 0===k&&(k=e,k.addEventListener("progress",function(){A=e.currentTime}))}function we(){k.removeEventListener("loadstart",we),r.autoplay&&k.play(),c(null,D)}}(t,e,r,c)}const Ci=d(26981),Li=v().getPlugin("plugin");class Cr extends Li{constructor(e,r){super(e),this.autoplay=!1,this.startTime=0,this.CONSTANTS={INFO_SCHEDULER:1e3,AUTO_QUALITY_SCHEDULER:3e3,AUTO_QUALITY_THRESHOLD_PERCENT:30,AUTO_QUALITY_OBSERVATION_TIME:1e4,AUTO_QUALITY_HIGHER_RESOLUTION_DELAY:5e3,BANDWIDTH_AVERAGE_NUMBER_OF_VALUES:5},this.webtorrent=new w({tracker:{rtcConfig:(0,n.gI)()},dht:!1}),this.destroyingFakeRenderer=!1,this.autoResolution=!0,this.autoResolutionPossible=!0,this.isAutoResolutionObservation=!1,this.playerRefusedP2P=!1,this.downloadSpeeds=[],this.startTime=(0,f.h8)(r.startTime),this.autoplay=r.autoplay,this.playerRefusedP2P=!(0,i.H2)(),this.videoFiles=r.videoFiles,this.videoDuration=r.videoDuration,this.savePlayerSrcFunction=this.player.src,this.playerElement=r.playerElement,this.player.ready(()=>{const c=this.player.options_,y=(0,i.OV)();void 0!==y&&this.player.volume(y);const k=void 0!==c.muted?c.muted:(0,i.W7)();void 0!==k&&this.player.muted(k),this.player.duration(r.videoDuration),this.initializePlayer(),this.runTorrentInfoScheduler(),this.player.one("play",()=>{this.runAutoQualitySchedulerTimer=setTimeout(()=>this.runAutoQualityScheduler(),this.CONSTANTS.AUTO_QUALITY_SCHEDULER)})})}dispose(){clearTimeout(this.addTorrentDelay),clearTimeout(this.qualityObservationTimer),clearTimeout(this.runAutoQualitySchedulerTimer),clearInterval(this.torrentInfoInterval),clearInterval(this.autoQualityInterval),this.flushVideoFile(this.currentVideoFile,!1),this.destroyFakeRenderer()}getCurrentResolutionId(){return this.currentVideoFile?this.currentVideoFile.resolution.id:-1}updateVideoFile(e,r={},c=(()=>{})){if(!e){const A=(0,i.zZ)();e=A?this.getAppropriateFile(A):this.pickAverageVideoFile()}if(!e)throw Error("Can't update video file since videoFile is undefined.");if(void 0!==this.currentVideoFile&&this.currentVideoFile.magnetUri===e.magnetUri)return;this.disableErrorDisplay(),this.player.src=()=>!0;const y=this.player.playbackRate(),k=this.currentVideoFile;if(this.currentVideoFile=e,(0,n.gn)()||this.playerRefusedP2P)return this.fallbackToHttp(r,()=>(this.player.playbackRate(y),c()));this.addTorrent(this.currentVideoFile.magnetUri,k,r,()=>(this.player.playbackRate(y),c())),this.changeQuality(),this.trigger("resolutionChange",{auto:this.autoResolution,resolutionId:this.currentVideoFile.resolution.id})}updateResolution(e,r=0){const c=this.player.currentTime();this.player.paused()||this.player.bigPlayButton.hide(),0===e?(this.player.addClass("vjs-playing-audio-only-content"),this.player.posterImage.show()):(this.player.removeClass("vjs-playing-audio-only-content"),this.player.posterImage.hide());const k=this.videoFiles.find(D=>D.resolution.id===e);this.updateVideoFile(k,{forcePlay:!1,delay:r,seek:c+r/1e3})}flushVideoFile(e,r=!0){void 0!==e&&this.webtorrent.get(e.magnetUri)&&(!0===r&&this.renderer&&this.renderer.destroy&&this.renderer.destroy(),this.webtorrent.remove(e.magnetUri),console.log("Removed "+e.magnetUri))}enableAutoResolution(){this.autoResolution=!0,this.trigger("resolutionChange",{auto:this.autoResolution,resolutionId:this.getCurrentResolutionId()})}disableAutoResolution(e=!1){!0===e&&(this.autoResolutionPossible=!1),this.autoResolution=!1,this.trigger("autoResolutionChange",{possible:this.autoResolutionPossible}),this.trigger("resolutionChange",{auto:this.autoResolution,resolutionId:this.getCurrentResolutionId()})}isAutoResolutionPossible(){return this.autoResolutionPossible}getTorrent(){return this.torrent}getCurrentVideoFile(){return this.currentVideoFile}addTorrent(e,r,c,y){if(!e)return this.fallbackToHttp(c,y);console.log("Adding "+e+".");const k=this.torrent;this.torrent=this.webtorrent.add(e,{store:function(D,H){return new Ci(new ki(D,H),{max:100})}},D=>{console.log("Added "+e+"."),k&&(this.stopTorrent(k),c.delay&&this.renderFileInFakeElement(D.files[0],c.delay)),this.addTorrentDelay=setTimeout(()=>{this.destroyFakeRenderer();const H=this.player.paused();this.flushVideoFile(r),c.seek&&this.player.currentTime(c.seek),Pr(D.files[0],this.playerElement,{autoplay:!1,controls:!0},(Z,ne)=>(this.renderer=ne,Z?this.fallbackToHttp(c,y):this.tryToPlay(we=>we?y(we):(c.seek&&this.seek(c.seek),!1===c.forcePlay&&!0===H&&this.player.pause(),y()))))},c.delay||0)}),this.torrent.on("error",D=>console.error(D)),this.torrent.on("warning",D=>{if(-1===D.message.indexOf("Unsupported tracker protocol")){if(-1!==D.message.indexOf("Ice connection failed"))return void console.log(D);if(-1!==D.message.indexOf("incorrect info hash"))return console.error("Incorrect info hash detected, falling back to torrent file."),this.addTorrent(this.torrent.xs,r,{forcePlay:!0,seek:c.seek},y);-1!==D.message.indexOf("from xs param")&&this.handleError(D),console.warn(D)}})}tryToPlay(e){e||(e=function(){});const r=this.player.play();return void 0!==r?r.then(()=>e()).catch(c=>{if(!c.message.includes("The play() request was interrupted by a call to pause()"))return console.error(c),this.player.pause(),this.player.posterImage.show(),this.player.removeClass("vjs-has-autoplay"),this.player.removeClass("vjs-has-big-play-button-clicked"),this.player.removeClass("vjs-playing-audio-only-content"),e()}):e()}seek(e){this.player.currentTime(e),this.player.handleTechSeeked_()}getAppropriateFile(e){if(void 0===this.videoFiles)return;const r=this.videoFiles.filter(A=>0!==A.resolution.id);if(0===r.length)return;if(1===r.length)return r[0];if(this.torrent&&1===this.torrent.progress&&this.player.ended())return this.currentVideoFile;e||(e=this.getAndSaveActualDownloadSpeed());const c=this.playerElement.offsetHeight;let y=r[0].resolution.id;for(let A=r.length-1;A>=0;A--){const D=r[A].resolution.id;if(0!==D&&D>=c){y=D;break}}const k=r.filter(A=>A.resolution.id<=y).filter(A=>{const D=A.size/this.videoDuration;let H=D;return(!this.currentVideoFile||A.resolution.id>this.currentVideoFile.resolution.id)&&(H+=D*this.CONSTANTS.AUTO_QUALITY_THRESHOLD_PERCENT/100),e>H});return 0===k.length?(0,n.FE)(r):(0,n.qx)(k)}getAndSaveActualDownloadSpeed(){const e=Math.max(this.downloadSpeeds.length-this.CONSTANTS.BANDWIDTH_AVERAGE_NUMBER_OF_VALUES,0),r=this.downloadSpeeds.slice(e,this.downloadSpeeds.length);if(0===r.length)return-1;const c=r.reduce((k,A)=>k+A),y=Math.round(c/r.length);return(0,i.M_)(y),y}initializePlayer(){if(this.buildQualities(),this.autoplay)return this.player.posterImage.hide(),this.updateVideoFile(void 0,{forcePlay:!0,seek:this.startTime});const e=this.player.play.bind(this.player);this.player.play=()=>{this.player.addClass("vjs-has-big-play-button-clicked"),this.player.play=e,this.updateVideoFile(void 0,{forcePlay:!0,seek:this.startTime})}}runAutoQualityScheduler(){this.autoQualityInterval=setInterval(()=>{if(null==this.torrent||!1===this.autoResolution||!0===this.isAutoResolutionObservation)return;const e=this.getAppropriateFile();let r=!1,c=0;this.isPlayerWaiting()&&e.resolution.id<this.currentVideoFile.resolution.id?(console.log("Downgrading automatically the resolution to: %s",e.resolution.label),r=!0):e.resolution.id>this.currentVideoFile.resolution.id&&(console.log("Upgrading automatically the resolution to: %s",e.resolution.label),r=!0,c=this.CONSTANTS.AUTO_QUALITY_HIGHER_RESOLUTION_DELAY),!0===r&&(this.updateResolution(e.resolution.id,c),this.isAutoResolutionObservation=!0,this.qualityObservationTimer=setTimeout(()=>{this.isAutoResolutionObservation=!1},this.CONSTANTS.AUTO_QUALITY_OBSERVATION_TIME))},this.CONSTANTS.AUTO_QUALITY_SCHEDULER)}isPlayerWaiting(){var e;return null===(e=this.player)||void 0===e?void 0:e.hasClass("vjs-waiting")}runTorrentInfoScheduler(){this.torrentInfoInterval=setInterval(()=>{if(void 0!==this.torrent)return null===this.torrent?this.player.trigger("p2pInfo",!1):(0!==this.webtorrent.downloadSpeed&&this.downloadSpeeds.push(this.webtorrent.downloadSpeed),this.player.trigger("p2pInfo",{source:"webtorrent",http:{downloadSpeed:0,uploadSpeed:0,downloaded:0,uploaded:0},p2p:{downloadSpeed:this.torrent.downloadSpeed,numPeers:this.torrent.numPeers,uploadSpeed:this.torrent.uploadSpeed,downloaded:this.torrent.downloaded,uploaded:this.torrent.uploaded},bandwidthEstimate:this.webtorrent.downloadSpeed}))},this.CONSTANTS.INFO_SCHEDULER)}fallbackToHttp(e,r){const c=this.player.paused();this.disableAutoResolution(!0),this.flushVideoFile(this.currentVideoFile,!0),this.torrent=null,this.player.one("error",()=>this.enableErrorDisplay());const y=this.currentVideoFile.fileUrl;return this.player.src=this.savePlayerSrcFunction,this.player.src(y),this.changeQuality(),this.player.trigger("sourcechange"),this.tryToPlay(k=>k&&r?r(k):(e.seek&&this.seek(e.seek),!1===e.forcePlay&&!0===c&&this.player.pause(),r?r():void 0))}handleError(e){return this.player.trigger("customError",{err:e})}enableErrorDisplay(){this.player.addClass("vjs-error-display-enabled")}disableErrorDisplay(){this.player.removeClass("vjs-error-display-enabled")}pickAverageVideoFile(){if(1===this.videoFiles.length)return this.videoFiles[0];const e=this.videoFiles.filter(r=>0!==r.resolution.id);return e[Math.floor(e.length/2)]}stopTorrent(e){e.pause(),e.removePeer(e.ws)}renderFileInFakeElement(e,r){this.destroyingFakeRenderer=!1;const c=document.createElement("video");Pr(e,c,{autoplay:!1,controls:!1},(y,k)=>{this.fakeRenderer=k,!1===this.destroyingFakeRenderer&&y&&console.error("Cannot render new torrent in fake video element.",y),c.currentTime=this.player.currentTime()+(r-2e3)})}destroyFakeRenderer(){if(this.fakeRenderer){if(this.destroyingFakeRenderer=!0,this.fakeRenderer.destroy)try{this.fakeRenderer.destroy()}catch(e){console.log("Cannot destroy correctly fake renderer.",e)}this.fakeRenderer=void 0}}buildQualities(){const e=[];for(const c of this.videoFiles){const y={id:c.resolution.id,label:this.buildQualityLabel(c),height:c.resolution.id,_enabled:!0};this.player.qualityLevels().addQualityLevel(y),e.push({id:y.id,label:y.label,selected:!1})}const r={qualitySwitchCallback:c=>this.qualitySwitchCallback(c),qualityData:{video:e}};this.player.tech(!0).trigger("loadedqualitydata",r)}buildQualityLabel(e){let r=e.resolution.label;return e.fps&&e.fps>=50&&(r+=e.fps),r}qualitySwitchCallback(e){-1!==e?(this.disableAutoResolution(),this.updateResolution(e)):!0===this.autoResolutionPossible&&this.enableAutoResolution()}changeQuality(){const e=this.currentVideoFile.resolution.id,r=this.player.qualityLevels();if(-1!==e)for(let c=0;c<r.length;c++)r[c].height===e&&(r.selectedIndex_=c);else r.selectedIndex=-1}}v().registerPlugin("webtorrent",Cr)},42107:(F,_,d)=>{"use strict";F.exports=d(67461)},8749:(F,_,d)=>{"use strict";F.exports=d(86030)},31899:(F,_,d)=>{"use strict";F.exports=d(62834)},62528:()=>{},30970:()=>{},11356:()=>{},2378:()=>{},32067:()=>{},98671:()=>{},39696:()=>{},68856:()=>{},65688:()=>{},57525:()=>{},10139:()=>{},60146:()=>{},92050:()=>{},50876:F=>{"use strict";F.exports=JSON.parse('{".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}')},41907:F=>{"use strict";F.exports={i8:"1.5.4"}}}]);